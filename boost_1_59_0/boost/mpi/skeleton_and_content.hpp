// (C) Copyright 2005 Matthias Troyer
// (C) Copyright 2006 Douglas Gregor <doug.gregor -at gmail.com>

// Use, modification and distribution is subject to the Boost Software
// License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

//  Authors: Matthias Troyer
//           Douglas Gregor

/** @file skeleton_and_content.hpp
 *
 *  This header provides facilities that allow the structure of data
 *  types (called the "skeleton") to be transmitted and received
 *  separately from the content stored in those data types. These
 *  facilities are useful when the data in a stable data structure
 *  (e.g., a mesh or a graph) will need to be transmitted
 *  repeatedly. In this case, transmitting the skeleton only once
 *  saves both communication effort (it need not be sent again) and
 *  local computation (serialization need only be performed once for
 *  the content).
 */
#ifndef BOOST_MPI_SKELETON_AND_CONTENT_HPP
#define BOOST_MPI_SKELETON_AND_CONTENT_HPP

#include <boost/mpi/config.hpp>
#include <boost/archive/detail/auto_link_archive.hpp>
#include <boost/mpi/skeleton_and_content_types.hpp>

namespace boost { namespace mpi {

namespace detail {
  typedef boost::mpi::detail::forward_skeleton_oarchive<boost::mpi::packed_skeleton_oarchive,boost::mpi::packed_oarchive> type1;
  typedef boost::mpi::detail::forward_skeleton_iarchive<boost::mpi::packed_skeleton_iarchive,boost::mpi::packed_iarchive> type2;
}


} } // end namespace boost::mpi

#include <boost/mpi/detail/content_oarchive.hpp>

// For any headers that have provided declarations based on forward
// declarations of the contents of this header, include definitions
// for those declarations. This means that the inclusion of
// skeleton_and_content.hpp enables the use of skeleton/content
// transmission throughout the library.
#ifdef BOOST_MPI_BROADCAST_HPP
#  include <boost/mpi/detail/broadcast_sc.hpp>
#endif

#ifdef BOOST_MPI_COMMUNICATOR_HPP
#  include <boost/mpi/detail/communicator_sc.hpp>
#endif

// required by export
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::packed_skeleton_oarchive)
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::packed_skeleton_iarchive)
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::detail::type1)
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::detail::type2)

BOOST_SERIALIZATION_USE_ARRAY_OPTIMIZATION(boost::mpi::packed_skeleton_oarchive)
BOOST_SERIALIZATION_USE_ARRAY_OPTIMIZATION(boost::mpi::packed_skeleton_iarchive)

#endif // BOOST_MPI_SKELETON_AND_CONTENT_HPP

/* skeleton_and_content.hpp
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
*/