// Copyright (C) 2005, 2006 Douglas Gregor <doug.gregor -at- gmail.com>.

// Use, modification and distribution is subject to the Boost Software
// License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

// Allows broadcast of skeletons via proxy.

// This header may only be included after both the broadcast.hpp and
// and skeleton_and_content.hpp headers have been included.
#ifndef BOOST_MPI_BROADCAST_SC_HPP
#define BOOST_MPI_BROADCAST_SC_HPP

namespace boost { namespace mpi {

template<typename T>
void
broadcast(const communicator& comm, const skeleton_proxy<T>& proxy, int root)
{
  if (comm.rank() == root) {
    packed_skeleton_oarchive oa(comm);
    oa << proxy.object;
    broadcast(comm, oa, root);
  } else {
    packed_skeleton_iarchive ia(comm);
    broadcast(comm, ia, root);
    ia >> proxy.object;
  }
}

template<typename T>
inline void
broadcast(const communicator& comm, skeleton_proxy<T>& proxy, int root)
{
  const skeleton_proxy<T>& const_proxy(proxy);
  broadcast(comm, const_proxy, root);
}


} } // end namespace boost::mpi

#endif // BOOST_MPI_BROADCAST_SC_HPP

/* broadcast_sc.hpp
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
*/