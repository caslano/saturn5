
//          Copyright Oliver Kowalke 2017.
// Distributed under the Boost Software License, Version 1.0.
//    (See accompanying file LICENSE_1_0.txt or copy at
//          http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_FIBERS_NUMA_TOPOLOGY_H
#define BOOST_FIBERS_NUMA_TOPOLOGY_H

#include <cstdint>
#include <set>
#include <vector>

#include <boost/config.hpp>

#include <boost/fiber/detail/config.hpp>

#ifdef BOOST_HAS_ABI_HEADERS
# include BOOST_ABI_PREFIX
#endif

namespace boost {
namespace fibers {
namespace numa {

struct node {
    std::uint32_t                   id;
    std::set< std::uint32_t >       logical_cpus;
    std::vector< std::uint32_t >    distance;
};

inline
bool operator<( node const& lhs, node const& rhs) noexcept {
    return lhs.id < rhs.id;
}

BOOST_FIBERS_DECL
std::vector< node > topology();

}}}

#ifdef BOOST_HAS_ABI_HEADERS
# include BOOST_ABI_SUFFIX
#endif

#endif // BOOST_FIBERS_NUMA_TOPOLOGY_H

/* topology.hpp
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
*/