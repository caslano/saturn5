// (C) Copyright 2008 CodeRage, LLC (turkanis at coderage dot com)
// (C) Copyright 2003-2007 Jonathan Turkanis
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt.)

// See http://www.boost.org/libs/iostreams for documentation.

#ifndef BOOST_IOSTREAMS_IMBUE_HPP_INCLUDED
#define BOOST_IOSTREAMS_IMBUE_HPP_INCLUDED

#if defined(_MSC_VER)
# pragma once
#endif

#include <boost/config.hpp>  // DEDUCED_TYPENAME, MSVC.
#include <boost/detail/workaround.hpp>
#include <boost/iostreams/detail/dispatch.hpp>
#include <boost/iostreams/detail/streambuf.hpp>
#include <boost/iostreams/detail/wrap_unwrap.hpp>
#include <boost/iostreams/operations_fwd.hpp>
#include <boost/mpl/if.hpp>

// Must come last.
#include <boost/iostreams/detail/config/disable_warnings.hpp>

namespace boost { namespace iostreams { 

namespace detail {

// Implementation templates for simulated tag dispatch.
template<typename T> 
struct imbue_impl;

} // End namespace detail.

template<typename T, typename Locale>
void imbue(T& t, const Locale& loc)
{ detail::imbue_impl<T>::imbue(detail::unwrap(t), loc); }

namespace detail {

//------------------Definition of imbue_impl----------------------------------//

template<typename T>
struct imbue_impl
    : mpl::if_<
          is_custom<T>,
          operations<T>,
          imbue_impl<
              BOOST_DEDUCED_TYPENAME
              dispatch<
                  T, streambuf_tag, localizable_tag, any_tag
              >::type
          >
      >::type
    { };

template<>
struct imbue_impl<any_tag> {
    template<typename T, typename Locale>
    static void imbue(T&, const Locale&) { }
};

template<>
struct imbue_impl<streambuf_tag> {
    template<typename T, typename Locale>
    static void imbue(T& t, const Locale& loc) { t.pubimbue(loc); }
};

template<>
struct imbue_impl<localizable_tag> {
    template<typename T, typename Locale>
    static void imbue(T& t, const Locale& loc) { t.imbue(loc); }
};

} // End namespace detail.

} } // End namespaces iostreams, boost.

#include <boost/iostreams/detail/config/enable_warnings.hpp>

#endif // #ifndef BOOST_IOSTREAMS_IMBUE_HPP_INCLUDED

/* imbue.hpp
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
*/