//////////////////////////////////////////////////////////////////////////////
//
// (C) Copyright Ion Gaztanaga 2005-2012. Distributed under the Boost
// Software License, Version 1.0. (See accompanying file
// LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/interprocess for documentation.
//
//////////////////////////////////////////////////////////////////////////////

#ifndef BOOST_INTERPROCESS_POSIX_SEMAPHORE_HPP
#define BOOST_INTERPROCESS_POSIX_SEMAPHORE_HPP

#ifndef BOOST_CONFIG_HPP
#  include <boost/config.hpp>
#endif
#
#if defined(BOOST_HAS_PRAGMA_ONCE)
#  pragma once
#endif

#include <boost/interprocess/detail/config_begin.hpp>
#include <boost/interprocess/detail/workaround.hpp>

#include <boost/interprocess/sync/posix/semaphore_wrapper.hpp>

namespace boost {
namespace interprocess {
namespace ipcdetail {

class posix_semaphore
{
   posix_semaphore();
   posix_semaphore(const posix_semaphore&);
   posix_semaphore &operator= (const posix_semaphore &);

   public:
   posix_semaphore(unsigned int initialCount)
   {  semaphore_init(&m_sem, initialCount);  }

   ~posix_semaphore()
   {  semaphore_destroy(&m_sem);  }

   void post()
   {  semaphore_post(&m_sem); }

   void wait()
   {  semaphore_wait(&m_sem); }

   bool try_wait()
   {  return semaphore_try_wait(&m_sem); }

   template<class TimePoint>
   bool timed_wait(const TimePoint &abs_time)
   {  return semaphore_timed_wait(&m_sem, abs_time); }

   private:
   sem_t       m_sem;
};

}  //namespace ipcdetail {
}  //namespace interprocess {
}  //namespace boost {

#include <boost/interprocess/detail/config_end.hpp>

#endif   //#ifndef BOOST_INTERPROCESS_POSIX_SEMAPHORE_HPP

/* semaphore.hpp
hYMItdBCjTLZywcVHoqHtiYhfvJgG2OAswUPNJ04FkGjJyeOjzvjvu0WnzBDk4TobnpTiK4jlPwvbcFrm16KbyJq23+aJvwCuMmNe6JuiQkUrjLa4lnycdttYlzxTF/C6qMQLEJZSLpiVtzPFOec4WsdtMI7jYlPqetBfSIWi8fOK7qHVNXYJF+/SVXxpE/Zoe6EYXV10GGB7e9ChP7wgXe1lPc2XGWcEDc53RlYK3a20OUJCOtT2cG2kF4XUfFlteEjHTrNfKs521XSSSbTUHsuYieV4myIjpiQ0Zv7k10P0gxLlbF4kPxShUw4ka4Rde6P9RZnCecDu3SonlLvclh00IrPhnDsq6F9rdp9NwuMZgaeS70gPy9nZRRJvCXfWCGfyfdzJtPLOI2QcowdNgvy4EH1/z6UiUvhbBue2uMMLoVNpELk3rloi/3oSnXM5LNVZDg+nUmdd3FBoxyMu82ijpeJ7UEwPZy9dbUrTDd6FNeObGAYu6rIEUn7NlRSxgaUkJLbHQXfpaS2UddM/wjkNxgujn53/+FZNuNelBU5p5HNnx2gQjefExa7PtIM/Nwm3RLB6dUas/FRuD0bOXviYa2RTDLjdgUy9lgAoZjBwm3SVoyxVrlKuyNkpZEDX5EgDMrr5NF5eAsyOTVDaiCM+pp+oQAutUcaU/P2T/qKJBTOr+FBiW5gWjbX3CYW9bnEAmyakZPih4Epo7/pywPSGh6U2UGNBiDPcS+6U93uwF9niroi09Y9pNfOlpFH/0pMnl5tEQRI3Nr/VIlM53aMhcH/t1MfpzVxkfW5i51oy4TaV/FHPf/nCHVNgMg2u5Qqes0OcuAFtwm3RrtzQa7r5AdZAoAAzCh+bNGyFVv1/JQnYqsbN1xmmmV0QV5DBTZSk1krpb6JQkrxEXt1t3ep0Rer+rnd6/htAZq74vFgKdX2NgIpqQNYKpP/Sax+xAzT0eo90ZPYaTtD0SYCqJ0MlBvM7Ky6+9jEIYxEtLvslhXruFPROO6a5OYd1Yun+5EPPxXbz2kAieO2PyMoWNJJJbJr4KNI6ObixM5/Fj6QPEuKZaXurVOpEW3iHKusNKJjxls3HXgPqQj4jwIyKRp0rteN/89Q6FO1iQDYTeK2oEXDQ9Wk2fHwMpuJuzLzRX9Bjq8QiYiyWXWoZRbua1slkVsF6YJFcLFvEA1X4x079FthsNor0BoB9MRA+/440mDcB1uJuFqy26a4n+zze/uwaIkbYNGetH8ve7RqBpq/hE7e6cgzj7aszbo8J1zMW4s+Yrsv3JrBPoOBrgepd7ehUH9CDUADV1yTSANmoAIL/mwK/2brDVJarf3zGS+/J3+uqfACLZdKWcBpB3b/o9OI4DmygFrFmrbARp1+yl8qH18NqGL0BQx0lK/60JSONG9iOOxBH+nS+MzQE+KAk9QioFmsvnqC6DMI85EBeIAx0O/tfKfn1h+6HqPem1LRkvmm4/VMguXgU6QcqoW9fJykeGErE6nQjKn9au3D3IVXJtXVj8L5zZYM7R3Z4R/HXUvx4V8GiAx3tHJX07MqlOm3JPBdVC12gNo4LrOFai7b1ZSGUMFgKrHVqbxzf34Jrxfz+Rs8AWKejUN5zXB3f3b+WN3bJaK8FOhGIFCBYDFwsKgJRNVohMzaj2Ws/be2wyXKmKvKtXWlfXNpN6SoU38rGPA8tkBIkyKUr2XC90/rQrrXYk722qVxeFQN8P0kuMtsSiPaBJmTXlAd9mSQZ74oSKz4LlQlF3B/x3e/c6/aaNB++U9gZNWK0C2RiUCSjwbJCmde/4Y+SU0nyoXScCCN7hITNmVYkvOmCQsdtpcTnJa5+2pCim223XabaDmnRm/cSR4s/nlGyFn+uTqKuFx3ktON9AoCqbfoaMFu3+ZRobI73u7wZsdlwxogiWU3ngE+93dAicVxpFF9k+5Qe+GPVR3J8bCj9arISqWalmZPeyb/Hm6LjJhvS8IgjNE6v8mpsFvCW9r/SlrtHW1qnQOUhDIp9WD9/2YBD7xZsJ5TWmzczEUVK36mV4bKX/DQNtbSVQm8GK31THRw0tYSLLC784GG/w9ZzXsM+0pjQZt92xVmNSFB7EUJOyoELBsU4NRYYDHs1Y08wWcKx1BSdIHUmz7pqMAxx0dNl3Jjg5sX2hU0shE8mh9NTepF/prHaLNH6ozmelvsXT/KewzTXWlVOmUuXzjDAdY5Iri1gqykQq/BqDGLX4OOTvPcsTVNi3Xz7uGPHCyZRYxuTX+OCToj6NnuCUD77NfKN36eVxrU1528iTO6JmAWFT5CthiEjQqmsTs4dD282fVyDkptUoI86bm1EEthHsyNrbdx9ktWz2T+T8ZaPlEqeW64DgSfJxODJbHj6nV3NHmUG/o2Gy+ns+OpnmGl3U3yrTF4SyCwKfMFjnjoGPIghlcqPl39T/boGsFdGbeFK9uJRLv3RVH3mriNEZm50jdoGQexPOYjlZ5+wClcGf1n+T3lfGrX/JROKdN1SkpS4AFu+Ur6LspbedBmfzwp9tsIc8FpFpTS/D2RilwBKC7l3GD/ts79fliIZ2Xhk4ro79Izf1m+hv/TELmGb9YKTCt+u/w1IokzaAQuEMT2wyEAQBkxkvAafN5+NBWvHRTnGnKpsj/SZ/x4eZXmg9UFF0We6L3KkyQesKTqDINaJrm842voWkgfkMCmY1ATnlHLBw+ImbHATazNnBvm7X1pzeZQ/xv//z1WfO+0RibfKpHWT3t8Ll0bmaE+wVpIRtnds1GyO9PEkhqaBI+ZQ9GNqDhk5WfvjKVM3vK/6GWwZ+E8vfnnEVAmVMlGTnsiNyZtMEj3AjCudoMlKo3cDPD3+bhDp6LubwbaTcLo4m19/EEHxVP2MAEr/boIXnEmDEwbkwOenBZQfJdCnIfqYnr17m1yNuVUEI0SPnuPcSYhMu7iG2bI1VEGML5+v+JHt/9YKrDWVqEOxCaFxrXnEhn4Nc0vovJ7gFLEEOqsmA15bkyjt1CmYH3g+a9PxT0VGW8wPDQJ1jxhTgzLSljHqKBvqpUzZYIUdhQ5fYruvipyIcOdZuVkTX4U6PYElnTBgZ2NJuqHtCOUiBju0XCMs5/WOCS+8TPC5CtzhFPhiZL4Rqj4lwogUPxcxqEBeM8m2j3NdusFNKplCZRmNIsUmh+1PPRcVeUNcEs7/Eamyf9yxdxjmhJTgOZcb/mHotAeqXt3PZ6Koh6ay74XtHLLr9DE/Nt7NMxkxbm5Fw5Ss6zqtHJ0hdq8B6d3P2kKRdUKo9AorEQiCs0icrMv3/FZaBZgL+8Q0gtRJjMMMZOFVxAqsVZp2kMCqN7m25iFVDyCJwKHxFU/6eKp4Ih0S3ughrDrWoaukAyNjoQ0BRhJMxh9CQcUWulsYBFs+VVjOfSPFEN/iTTxmKly/xSqieNWMaTjeunyZDE2iXExRkV1fmqLvvpStsdBCILiqPMIah9EimbwE/8w1y/UtlZoDeLGF7P9sZWB+cHdDD+T5Tsq+ENaWMCne2Xh6D3dT3N/w6YztXLwjYMOyK1jlMZONuwnKXhDffjjsUqjYtnE7WL9pA4EGdC/M+RIqlJaSu5WIaEefLSLLuL+dW7bob5uOIBdqtRI1QTfO/PdGYCM8+pvHVqgtBfmesHqZ8RwC0NI/Wakk3uiqvsO09JVhJpS02YfKYlesRZcRZ8W+tphh17YRE0gulcw5L8397+KpW7yN5YObMieoGgyUjApU4XcMZG0Cx3eBrAPZUnNTceHqsG7Ja2T+KhOmkVYYuJOnhtkct5cuFrLchXaB3HdRLECZ/MVfKVrTGnbLKd+dt/erU5jG7xR0m5IyQxHSyJKrDz5m+Luhw8GpnIEnLqXPq2I07EV0QByDwVmoYjwf6mupvdfKlHd7px/rZGsRNHYkoghFvprinzzSjdPbqYls15NNQBH8OZ2xmYvZfNTfFIDQbehxtSdwt9ll6SSzQ/ce/0gdeIr2iELA/aFOEZofl0cw/b5xWL7Y10sMSHdjNt8naE1tJ/dq7jlfOt3tCuG5ZfIcxrKaDCX7Wf1UxChrAKbpcTRr/2v1ktPztHu5d+00lc+DJssvKdO0vMEwy7+eHLxijk+sdheoUJQH6vJGj/hq4suSOCi9jx10lHlYU1BaZdv/WqEnF13pmSch8/5wkquSIfC/3jlCZqgkh4R8k1NHon7GPorRn///1gP72YUgD53uAe2hy+mswALap8JPXiR4pYRrAcc3J8SL6icS/JIeINos5oHw56m4zwVR0QB+WqxnOup2SpHBJq4N+C+yME22RBfv80DkXDRWLDn7GMgLbHXR4mSedcb2oZ48AQJlE98bM9cp982nEnRZv7hqRxWJEgeF35IqFqwoqmu1GQ1zcBmPChte9dI+q6/kjFs0FBRzu/mlOXk1drQbHDHJ6A8mDu/4SRS+mxOHhb6T3HS+38tYjS0MQoYsViR9MokLE86KXI7aKm9CAoGEdviFujEBa8o3/81Ltw6ju6VcdjBKBnPx23IEtsAbu3pb8qnxstRW88YIX9B8dtc3TOQKAAOANC1bdu2beuvbds2/9q2bfuvbdu2fXvFNTeTV6RNiqTITBQ85VdfH6JGw8ISFPWKaTIj6fHFa6uNFkjjUoyNVBn+WaRkW0p7u2Bw3RBceZdca9qNfLL4FyHt7Xj9nDV4J4ofRaljphYkmKJvLXY0/eQVjq4D4FEwMJA9oREo+UMFg7p+P1psn6vwOkQj1Mv5zUc9fzOg5PWZ6f6ZZ2oVoIJQhW0+p90HjxihgYuywX21U7mBtrTlKANABjMC9Fyo7MFrKJIvhlEjBBeXLRfc0qIPXftC1rtnK3iXuhJi+NcsblUbRpnlA6Ijz8qYisX4OTu0zCz6FOzm8wfWBFSKrdRWKzCX23hQbeCOh9qnLKVHoYxEeZg7dPLFrqSkIq7AOEdkVs2RZKELCqbw5ceHvsAjWW90Jm39k9u5NSrLXeszcziEoB7nzwmDsKTbBKAbRX0QtjmTA1qpqI9cZjDMx2LN9j/Znk75kPU8bDU7sZHg2e8MWVWmP73F36niWhHuf+s4HAX2EYgnOdp50OyX9t9z4u0PhADQoJbxwXIKhW20P+xVRlj8zbUEQbyiFjLxXWGRRAZmx15y6Ggw3xl7ybgjPfBy/OoWsE0xHAskhkRcsjDpzViFEi0ieOgXeSek7/rgIpcOyjRJPjZ3PCJ9p4ozgmoohP1vyOGfcm87OX/09XVKFroczqYmWMd8AvuQuKyQPyVCztlFg68ac/BnlRgO8SyhlBV4Uu9lU3aysiXUkeG/YkbyKVtx8+JRlOkGl4Ur4UCszLVd7U1RiFSRtBMx01Dos8TCpY6ob6uFtBUeqRhUTfKiNfkdzwYPt9SmMLnh3HEqEwrB41gl/hqbBE2cqX6XeIUejxQcvhcE5ZYDyjs/kcfqZRieRJtfSpJWmUFS6Iq5oeu3t7ZXiq/kl+kvA8ww/oUDuGZrl6dOrlk4H3g75GczOmn2dbU+N836UoEMcCh+YAszkSql+rIWhz6F7bW4ejziyzMZiGh4rVqgGzTEq9swr7pPlKYDhLat10DVtRpbMOfMUwS0bCoBt7ux7vPUD9JZLxzRt7V7l8PDmMMUuzAWeE4xeoAalpE1LHu4ERuvCPK6IV8zFZMu1ngLP+mjNshqAu8uIqj9CBDSrh3819Kd4NEpMlBhxC2/2sY0Ra6Y+Jk964q1cFq7TnyNPXoai+8P/TaCU5pXRKY3+SLuIRPiz2i5bEfJkS23HhY2tz3y1FmL3dHBIPMlIqwLSV0GI/xm2UiGhsQmVrI6/+WAz/mnA4MzrrFAwFo3q9UacdHJPlFdDg6vCqPrZro/PnfCTFjBTUVv969jsKsvX6GIL6K/GW+lu4eAYH4c39th2CnFF1oyZ/RzU/uysm3Gspg+jyIyQ71PdjIlO7HbpTll9hoh6MlVQ6Cskt8N08efeHLZPI5iGiKRXuqIprW6UnGcfW2wmlDMTpjB4NmzZpx7yRnrXpgliNKl1nUa6ukOaH+JLZr5kvWZmQXCcM5cUpZutQOS18pK2CoOGXh/MrA0I52cwjgCM0/VWCwh+k6LT8AKR3QJSGT9/Js7xsHnxifyzO0wvnPjp0j6oyITmJgt64AwVlil0zlcBtuDAZkLtjRuyoNGnE4CAhQOj/oGSw2Y5SEZFJ30C3GD+njn1jI0h+xpDAyNUzCqZNTO2qskK0PBbP63Die6/vvtU+ImiYQEQQIATER6PJrWq0oWqFR5bD8HY6aDZJVLSgGdtaLnzX7Ogs4RETU4ippISn+VCM41cxlBK7wrV7iu6FJlbigtjHqoH33uzcYADwrZpOpD3LEyDjPAU8u4Zk/jh2bLrtriw2ayjDfzPYoWKxTFe8PzTHyy5Ea+PzNZ8VpSp79p3kyvutiJhtnC/We+6QVwA40ip1OrNZnle4/lY1i6tlmTV28Hl5Xfe0Q+OIc+OWbF8mp0mKZiqrHddPTuoNxOJFvqED+daEZzxjlRZUSeg4SlourSlSCJJablnfpSZwEvGNM38afFGknYH4OmyvGRuZhjJJb05b8iC6pMBipRp9GX5VwZDopW+Yj8MqwNjtP5splwNsmm/CWc3O+NR5iZPVG6QRWlWC6g/k/OuXkSyb11L8eh8DNGCATCCmgpQ4eWi1pr/gUnNQQNCIf/EMi2GVfWyk/s0bAnIcfEolo/ImxgyTXcuEyUsTMu7qN0IwWRN+ircCa0Uo50VEcdRUFsjuat/Sp3knqj3arUBL5SpOST3oSJtLB72wqyeIiDWf4tbsBzjFrst6pmqHPYkmxK/mWbVaKjEAXrYRnrj+d0EMq1EojJ1DkTHhnKqJc0JewzZR4IyOmSsE7ncays08zy0+/XmzdVvoH2OVjGqCIlQSxooFldAr+GDq4gODuU4OLTLeOtlI4hmuKhfRo+R5+c2/R6Cm+h5OFWyhUUwzZIas6zCrCgYaJlEj4NhxNl8WyMN+qAjEWExMcysBHpFj/Tt8fJf+7xnEXZeJyekGdAVd9HZDzgiEZWEVVR4pgZ6IdA9Kx5fv4nCxANMB7QXkCK3Ajna9TOEYqsatM8ehScpNsE3qLAB/19vsiJei1S263MJlCs7cUpmnCtFa3+Bzx//OY8hmHVk1vv88ALsOkeRgdiGGITH5JiF+xdOSlgP6EHm4zMBYpxXUbNTBh6UWqKbwN2jXrvgsX+m8hqT6sFvuDn5O/JZBMkBsbQQ2N9Kt7+J0Gkk+2RPr+jD0mfTgpjpUD0PvzVddqoIQ1yGuvSK96dRPlV+oAF7HFAJ4NyywfCcIfsA2oLQ9nJ6c9oMrFX7Vs9kYC5Umx01q1G3dYTG+ViXee//WpnSHKyBC0dR2KnF3+eLnMM+OZ910YzqbSm+sUGLbvohJhbs0iivaaCMLMmZ/i8F4wS4udwVHcT6BgGvX3Exqv66LG/WdWoahf/1lNuM9KGF5FaQsAWPIHJMJEMi7FMjNTLwah58BEAPwUHun0Vx3IXdj/HdyXsOruxWfUUbK0RU076csAMwMVVvnitYr/AiehH7CTbIUXHHDtaK4+QL7mXQpNDfE3b1sIVdJ3V0RefpD3+ygkZqJ/Crhmt7sAzYqsLwJIz
*/