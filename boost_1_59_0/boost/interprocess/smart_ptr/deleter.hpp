//////////////////////////////////////////////////////////////////////////////
//
// (C) Copyright Ion Gaztanaga 2007-2012.
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/interprocess for documentation.
//
//////////////////////////////////////////////////////////////////////////////

#ifndef BOOST_INTERPROCESS_DELETER_HPP
#define BOOST_INTERPROCESS_DELETER_HPP

#ifndef BOOST_CONFIG_HPP
#  include <boost/config.hpp>
#endif
#
#if defined(BOOST_HAS_PRAGMA_ONCE)
#  pragma once
#endif

#include <boost/interprocess/detail/config_begin.hpp>
#include <boost/interprocess/interprocess_fwd.hpp>
#include <boost/interprocess/detail/utilities.hpp>
#include <boost/intrusive/pointer_traits.hpp>

//!\file
//!Describes the functor to delete objects from the segment.

namespace boost {
namespace interprocess {

//!A deleter that uses the segment manager's destroy_ptr
//!function to destroy the passed pointer resource.
//!
//!This deleter is used
template<class T, class SegmentManager>
class deleter
{
   public:
   typedef typename boost::intrusive::
      pointer_traits<typename SegmentManager::void_pointer>::template
         rebind_pointer<T>::type                pointer;

   private:
   typedef typename boost::intrusive::
      pointer_traits<pointer>::template
         rebind_pointer<SegmentManager>::type                segment_manager_pointer;

   segment_manager_pointer mp_mngr;

   public:
   deleter(segment_manager_pointer pmngr) BOOST_NOEXCEPT
      :  mp_mngr(pmngr)
   {}

   void operator()(const pointer &p)
   {  mp_mngr->destroy_ptr(ipcdetail::to_raw_pointer(p));   }
};

}  //namespace interprocess {
}  //namespace boost {

#include <boost/interprocess/detail/config_end.hpp>

#endif   //#ifndef BOOST_INTERPROCESS_DELETER_HPP

/* deleter.hpp
FZv9NWo10C3yn7noQau2gobWwpwIR/p4nAG0AaaDV2G8mNJzxKavpxDg3sqhmzExrSs2voyEIbKTaAbXvYaA+mDspqU7SUT9GJZhhE6VyJ8egOQzn9GEVmzbtUVr/hHP4y+YE3khqNTdH4X2ARuLpizpe5iy+Enj4+L2RDY99HOp8mRlHBIuvym27x5HlZCNgjRapR4O/sdNe+xoWHNd1N64F+hlyGsunOSI3+euaoWSatzflKdVIILoVuodF3FgSOW/i98SQo1FcG2ht9hCAWXDJgyvrVlDrem3BzWFIxjV0nB7d0gSfPeriqjMXr8/8Z7bPs/1JoseZJYdmpciK9GcSLOLsfJxH/mzRjMwKA7wUjJvYbMuMRdRhCxRBUqYUfF/wOrRJoOg7E7ZJeZAjA/bxsmOc0uxrtbkM3dm6GYnJGLSRQVdcl72FGLVcgivdguenCQzVWoQhgwnqVMpfCPzyuXXaw1Sg/A5DKsxGA0HewS1MvogfPTsrrYBHRaE1K6UiyUZhcd0KFe3EynzmWA1/pTaj6Xym9XAYpcWJ/Yo+i+l+ibMTeL9khwiFegwcuSgMzxKGFpp2kOy7QXHbz6E9gZeOA5D/RLCuSZ81y0ydX84KcP9XxJe1ICDTq7PK2dGHAM/zOXmUwe54PLeujS9vaW3tIUjhBXChH1JL/5Ygkt40Zz/YKJoJ0q+bMX7IRsm1mvZ9bs8oQ366GyGxPeV+ksNLf0dNirui60gkmC2gRl9V+QYGRZQqnvJ+EcCHx+9GHjJA+RZ43PX+BA7YVYGWSX1971+Rz0V2nePQFxTtooYccggBZfAXVE3lg/Vj8EgOrsPLc1fWaKuEdI3lDu+KSREDQkSTdFma4ocIocJb07W3267PxwWj8ZzBUminclaNd7/NcStW1vlXzM5vm6MhSLMGQkeii2XeCuoR1S0aQtouiwG4OQkuOGjgHZ5xuDMUskLbVQChrogByz82Gh7epKs6UySpzZNfjinDRjLRxi7A8eZQxCoKZL/tDJmwrCHaqPfcAZ+kMDyj+Hjq6QduyqE/WuMM+U6ESEl8zZNRxxrTSKWmEtZVu0qfELp5h97DB8ljBoGznCKs5tn7XN07I3e8vbD1VyXneuaHjn93YHxfT17/fF1FvAxFh6a/n1dKt7bsG0ixI0TmMYofy7KhTCSKTyJqKkzHi0VB6K+G2UIZcNh75OyIr9q41zPSkr5XfeEvSqh46NSEZWupRp1Aw7fiBCpOaObB/7PcnKIYVTumQ8TEMaxQgre9Ej3k03BzzxtvTUQjlvuK5WdAb/KQ7xc/X32PYZHe2HD+QDThIbYDIbYemEMR4FR2U837KNV2EI4uq9C6yy7pV2QnMIJ+hIaqQbtVQ4funJWpi4LN8lNu46Q+uNh8MfWE8JDAdIQCjJHydkA6VGAbDbebCVmfWELpnaz5imvB71MKN8Fhx+UG8JTov5Cl5Et/J4K2uAA7ls9j7286F7FD1ruHVjxOkfyhdsFeH1HNCui2WKZy/1UG9JxtUckCvaEuUAo3pcDAf6cXqXa7ewHyZvJwrFwjtIrfgPj1MBtiSZ7o84DDhnlemkUd/J5SztGnxlHYv1z38Evyhp4EeatCRuUVHRRXKW3vjnjwrhddqzYNG0eFtMDwL9mgBBQf6JFrFL5yglGjCqFnDZHhS5jG9x3GN6v4sujAwoHemEHGqKnMWcKPUNLSBhhRhmFxZe9Cf9HQZA4TDLNU59oOFAsFqZtAm/1yjxptTI+JngEeDCGWPibehYOuAadKz11axkJRCTG3bhqYAOY0xR/6PGzbxN0Ohh0QQgkm7npzcIFKITzeChpfGNO5KN3lS3xN7vNZtOdXjmNpvWsbc/Myk2IPveeVVCLRCfBe2nfuXLxW5799GQqao6NY+tJl7S6mtYz1mZx5IzNLkoFBQv9loT2v/ljU31Vzi3/in0c0JpX0dlSvQIoN81Q8zH6z1UxfHR1P7kw33TzFcHaDtc+ji53LH1HlF7KwUbgAJCAPlsG5kTJFvyUkQuwkFiQX2Mrl1iUWehGOeL15ItSC3lN8Bpv4SDKEzcVSWG//6ct1Eduv2fJCDwHbJyDWtqBVt4aIqZ8Ciakp8CrQTrUlGYZAdjc26ykFqhQ4fI8j4qqPlGlu6FfKhv8D8HGDDmSAELLE56a6hPv2hCQuYnmO3cb1F/lqfsLmeGzqwm72Jf8y5OVngO97XkeFttufaaBWHWodA8zjZZ1Ne0s7AAWKeJu1gkAv+7CBWQqP5yWHmszwUqlUk44dsVf2ivRCw8ZzIxQ7xp9DPOhkN0t9hLsRnPEkeJqSOuXkLc43wJBPwQxGPqMpqC9H8KwAVOWaNZcWO7DK0YIPe15pLe9gGGqqEqOOMk5ZsFKcafbjOm27dB9OENoZF/VTZ2aEs84+C8CQFY0ZeZTGmYaObyGc8bmfJZCxko0Cd1tAs7IPwm94oD7HbUJZTW4rOJunlkqXYBzwHw08OdnPlxW74bKcxoFKIKgNew/vFo7w1UdzsUgor0KvCuGdRlgdh7vhNuqRex11b/W0dJI25htRmcgKEWbJu9L/e+EM3OFkn7Nma7dsVqctMsACCz30zWtQ3E6VxB/RRj2OQLR/GPgd8owz979kjjciFFPTQX5gXaqWRVTb3JeOG8HJsvUHWt2fsjSRi8XoztDJ+Ubo5dQOSo2Bi11iV9QbcmGbMCJFg8juuwH8NbLVyfgjUe3FJC5ANET46/RvTzfPYp5pZ8ZeAf4ML7PqcpUvk7dEkCxIUIm4Mzi9PCu7cqR2r41DLOoAcHSMDskeoaNYBaDKKvbCX4lXtoTEBIYecO2EF2e1HhqSgBdeSTB2Jk7lwPCe4SZKqXbBX0+Y2P+15oS5esP1Ss8ZYYTaBdInGS2e1VY3qS4nNvWnF9gWqRKIMJoCt6329m5AoLrdZqAhjSq/J5wxu1y3t5NT1zXA31jqtIKrt4m53UmituJCatCrsNNmQmUBNLGU0pSRAl301Io0WIk9G+tuYxCIODNpBW6yaTa8NmwFwDcCcX4ZkKhZnPjg12ZaPkuWQ2DCrUR+kck8z3LwCkzrK2yWvKR49NMpreKnE+4ebVc9mJQdkXCL5pSidDy4KgDDNPAHSsDxkSn+plnIGP8z1eJY5i5D9nxsa18yy51OCdwCRWlN2FR2Mzy+Rh/HcM/jku/mp/6MB675wu+aw68VaD+h2WgjXHqPFKRjM1l9V2sU5pIyEc57MBztP11FHgzHWEf2tNj5sPk+84QidTH6Y/q4JvWUGVc9Yj6wgoCAzKd/wLXebDE9hI3BjO+ZEBiLu7tHsE6ZuwgZXaIdDbiBoRtm3EYb1zNzbEwlOSyyazn/t+SX/eNHP8ev7vP7VM+3e0XRgYYcTBDMIp8nKYNh+N4nI1xLVyutDG9MMwKbHF/hamKVh5zG13JuFvopgsJ0SXgEfi3sVQYCBdw3oWRfOp7JTpn7aDu61d7oAvh/yar1s3wxXzzmVHclu0rB1gIy+D9M+RZM9l77CtFYY0l6nCU0KidXCm9/JeUitpWKWhXSR6wjooP/xcBSM2+fw/fIzAM1b6dKOMCYHSiuR3BIO9kw7bhYW8uOC2ANdXqcDYlj2+RB/3e9GdLLrv/9ioDMENa0TImfKKihdrQmL0+7hX5YSmHCphVXM7zC6oCOt2N+1YrRb6udvLGXNDdqGoD4uJNG0QMtgde97nLyRktjSDiqFY2YJv3mnVRm0+0ct8pNAHl3XmKNt4AZ6TMmqHIRQSkQEcfY/7/XOcgSRS72ZFJVkoUZWKikw4h0TIMhaXA4X/jCt9xgxMbFf1nTeqysxTWbEFQsdtc8oEAySZHcBTTUHkYiqnvAaMbW7gLbye67ImWmLS5nOySIMtcy1uGgyYgAcQbc/iZOL8iUjgOSdSL5HlBAU41e2fs6GTwB1AW/Ddcu7zIkB1ry4xGEQlhVpWPO5D3PDOZTlS8ebJPPf05zBbMoDrzqbQ4Nz5ZC8XM4uADsxoPjKfJFCTxTVBoA/D8asXhU49mHZNf2nruFsQPn3hpXHAEvI3TtF+MhynkFPvjgBSIP2JTQ1CrJerhGniXW5pPLW/L3T3kOLCDrlkH1YQlZHj1BOGs8lqgg5FZFNxjcyA6FAbg2ra2tm3btq2tbdu2bRtb27ZtW7f3w/MDkkyS98ycJHSZN6mC8LIXKgnremzvCvr4hfNiUX64eLDbObp4MwWHyeH9DmHD38OPJ9WIwnb4DW1CzfFZvyqHBxcrPpElyKg+gkaMSSuKqsA21OX6TilTUioUhORYzr83jp50tB9ZHKFYSPrIWzTSfjlZAvI07aRpfp9YuFeN1E6Gz16aviwJX5DAIkwz7aCO0MKbK+98SicGGziLZxTzhXTySuB+6tPK/CVE164JGvq2INltPmOf+rgub6/XfiR5lvD4CqI4sjm+ZjWzOYGxgs5ZdQUv0QhbRGcGzw6x2cRbbyNo6q4MJJag322fDB+mwU+zv0sj2SG0PRzQbSzqVoK9XqEqau3ynV26jOMM/OwSUzcp9MKLHNd4VlPPtbanU75GGF/jYZSTlj/Oe61e2K9J+QvFvEYNE9/++SzBxC+rIX7UIjkMmLT/uqcrnFm4poJ5LUsRrt8ssyNRdzpYGr3/mzF5dwTEHFdtKXzCvR0Jb9eAxX3IxEt0I5FLfFmROtt1k54Rvf5nTqYPqRfqimyynTXmjKbm5tu385kkp/7dUXrM2a8Wx+QPvw8ut6zjbR20MjxWSq3Diw6exCaVw5vCDIm7KJH8AN63USZinu7F5zmXQO72a8qGrV32z8uF+IrQmypUCaQ6CQsLlphaYFzyMwd8TFlJsFm7FAhQp4PSuJLm6ljHaHRzkM2VXj9xgGcJy3ykGUWh8KVYNshdTLMUX4OMjHeE3tD4uFP/64IRPEHbch46rkCRoyS94JQnC/usp/VZFZfUWWj/paUs417734R6o7MzcwcgZLRGceDXEoUV8HM/vUYE6PfeuSNk6E+RDQWERyfuHc5Qmkr0wwbuqqUSRRkNixTult5/oSHiGLFR2Qhnn7Td46nAMt+o+YbyefmNl9gO6CLKGNxPH9bdrk24RlWu8Cc+pOQrg+L34Ec1zsVY3FSkosNDVsMrWsLfJvOvtaDC2Z0uZJ19ysLC/Ekp9SDda2FnIpr4cauiPzM0/5Bp5QEpaY45qyjyLVOZKT0Rs31VPbcGbf8dhqCsDGlv75j4RSpY074Jj/fLfPi2YQRn+LBueU0TZS7B0wLX6O3vJr/NCoqNcQVPmVz9UVqYDyZZTnn3qlQq/0gRLuE2v3Xqqjnjfk7pPEzWASn47kSEl8OPrXHVt04oab3HttkvFh2yMwJa/u7gBpdDaL3vpClhIq69REbVIBCJj4GOXHfFKiuBLt746p31//tIJ5RKwMQR2DHJvSoTehD8osElqwQ9H+1bImz8Kgqhph1fQqrMudht3TQwKoTUS0C0xMwD7kcKLsibR8Mv+cgF7znL5mYYeljd1Mbme2QpvroDPtxPDFx4eFTp6CZvq39pgNR1duDOJKv4TZyt/Z2odt0b2T+cmD0PQr+pYH4bSYejW2JWmyyppuEQ8tz+GQkrp+rKWt0p1/BmZswyIFNM5LJcCYdhVMIQhxyCqhak1QgtljOHxSdTg3OLyyK57BLoNI+mk4MCYir1JWnQQYxO/WybSmkHLWjJdhynvcnlct7yUBKX61b3unwFKzcEfnGchPZNh+rMvwnkzaDpwOHH9rZjPW80h52bDgkNdeXyQzKR16YonnhBwMJxqb5s5mQx08U+0bINHekos1q3c6hxibvUNgL5r2UgVD4Euu7Wj1Mf9YZFRyPH3WBVtzIf35KtVSea7Eo00cuiZQO6UwsyE/m9rVH+KgIWbIbKuzHJE+6zvAw4k8somygTkxKhOIqRLirXKc2bt0tFG1xG2BbQv7EgeyhNcXAmbKTgdhiJhCpg90pOj7Ao76mkyXIg92zbZucSNSigV2YW1fC1wqhzLSobaHp4BK680hs7q8kGCpbp3TPs9brGnsNJ5towCumfIK2VwY/ZhXf2gVoC4hEGKSH/2PBxgORfqjTUmzPzqE3NEY4wxqV/WLe+VaC3oEMm4lQigTYZ68QFkip/h3neHP4K96NY52Yj9PuDiE2PKVQEwFPdiyhoX9frdFgFy60KxprXQNrxfhMnOYcXBCmW1nLyhOl0f3caTwD//VeuYeCm/94uxaL+Dqh6DqNV/orIlhK86iUOstun9y43n8PcHg55/RqA4dAJjWenxIEuxIBLNPQ6rLrWwCHnot8Ub+sq/Pyvwd5wwDRzXvC7yk2tfs819spUOxqohQTS4hgB53Kps1+9cIJkQg+177HwVpzJIln8iAxJUnD1Gp0Gcx+EAZztvfnSmHiwMyzx75957Wcy+e6rE67gYdKfk5A6p4KaFFcgMM2ZXaf1NXelZVW1rqKL2kDpLU2OqK15/iVPkyzdY+yUsaXXIXGsbs3VtSGCNGArnGD1d+Znee8/BrQXGJrUFPWo9zPCM1JodPMYSQxP1AuS/XxwuZfDt37+Vi/CQqA9fYHLKv2hSPE8wmyetavYCou5z1BbB4A4jftPTxmjOQwQQfLnVRVbK3gMwvsqOKLnSo55icNLqjOdWYvbKXCi2vvdfxl6nYJTU+yeBXWSw2uA+ssXvg7tEhzVpRzJegCwULkIG7BUM+VTyiIT/I/dw2lf0WCamrMoqLieF95sPm/r9YECJp8Er7g/Z4dLkh32Rlh+ty/qEVXLE+9lEoYb29EA3CLQH4j4exPb26UELMGFxGUPl5W548855ZBriW6TQ9pkHvUFQ1N+mwQObbUWAExcyml/gyJCkYQsGYi2mPTWcc/mozefpDDRzJPoOJFZj3f7wnZWfco4XhsiwT5KjN2/6I2IOoE3r031mZC9SYx4FTPlpSG6siuFYUJp5ae9nHxRuXlGcdK1zZZ7ks69PfWisgYlI4TW1xV9dhs9IypMoBmB45ss+zpZ4OmLzCrOu/Mjc/eR2v/opwMHbT+WnR81DV2IAyWvrP4KYGRobz6zCfgM8vcv+QbEdM7zAwAgD1t9m0ZcGLdCjv7T7e9J02KUkU3QNQHZ/b/NsCXawD9v1YkcITjIBACic3w/o1ojY/28pg4YEwUkOA3JLgxuUtmvID4sq0XSRTMMdQWeALji7u1O49Nlki4pX02bfSGGUQ/1j7iKVoERY1XJErL/AVWBjly4f0Fn7Lo3PGiIFozAvsASBcNaSCrPLUbHJuW2N4aw03Ghv8lyIRW4zjFZSeU9r9tVz7/Zx1yIpSPvXM8iBM+wkvuxrYOzK06zDmU/ABEKKhh+k4vGUpncRZhgB0zrVDHQ1M7RxiGxE/rWiaQ7UhaLj49JpiWcTInXv+n22OMmHUEn9kLi0yT6dCKelb4ETFViHNkG5gBJfthMNnEtzO9QDSlZPRk827HPGi8zhYmnY+eCKxPxc+SXHV858fGzJm7US1lpNiDjvYwAWAA83T7fdT1mGNVD/pMPANpjff+3e9QkAgv0nsqTwEBCABE2La9ddS4VlWslqBwDZMwDMozddXaIZCLJm4h664ukR9VQPM2v8sR2YrSTwnpvKEymA/+R
*/