//
// detail/std_global.hpp
// ~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_STD_GLOBAL_HPP
#define BOOST_ASIO_DETAIL_STD_GLOBAL_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_STD_CALL_ONCE)

#include <exception>
#include <mutex>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

template <typename T>
struct std_global_impl
{
  // Helper function to perform initialisation.
  static void do_init()
  {
    instance_.ptr_ = new T;
  }

  // Destructor automatically cleans up the global.
  ~std_global_impl()
  {
    delete ptr_;
  }

  static std::once_flag init_once_;
  static std_global_impl instance_;
  T* ptr_;
};

template <typename T>
std::once_flag std_global_impl<T>::init_once_;

template <typename T>
std_global_impl<T> std_global_impl<T>::instance_;

template <typename T>
T& std_global()
{
  std::call_once(std_global_impl<T>::init_once_, &std_global_impl<T>::do_init);
  return *std_global_impl<T>::instance_.ptr_;
}

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_HAS_STD_CALL_ONCE)

#endif // BOOST_ASIO_DETAIL_STD_GLOBAL_HPP

/* std_global.hpp
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
*/