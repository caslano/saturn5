//
// detail/gcc_sync_fenced_block.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_GCC_SYNC_FENCED_BLOCK_HPP
#define BOOST_ASIO_DETAIL_GCC_SYNC_FENCED_BLOCK_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(__GNUC__) \
  && ((__GNUC__ == 4 && __GNUC_MINOR__ >= 1) || (__GNUC__ > 4)) \
  && !defined(__INTEL_COMPILER) && !defined(__ICL) \
  && !defined(__ICC) && !defined(__ECC) && !defined(__PATHSCALE__)

#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class gcc_sync_fenced_block
  : private noncopyable
{
public:
  enum half_or_full_t { half, full };

  // Constructor.
  explicit gcc_sync_fenced_block(half_or_full_t)
    : value_(0)
  {
    __sync_lock_test_and_set(&value_, 1);
  }

  // Destructor.
  ~gcc_sync_fenced_block()
  {
    __sync_lock_release(&value_);
  }

private:
  int value_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(__GNUC__)
       // && ((__GNUC__ == 4 && __GNUC_MINOR__ >= 1) || (__GNUC__ > 4))
       // && !defined(__INTEL_COMPILER) && !defined(__ICL)
       // && !defined(__ICC) && !defined(__ECC) && !defined(__PATHSCALE__)

#endif // BOOST_ASIO_DETAIL_GCC_SYNC_FENCED_BLOCK_HPP

/* gcc_sync_fenced_block.hpp
5VKu2oWjJ9n0EvwRLDiDu66ZOrvamkhOsyXRATEBKJjn4jZFqPCBuJtt5ebm75L+5kDXkdFPN/iUvSOXG7676HyfI0YAlilvHRGx8HddJPdBo8TgXMuFxkN5JE+qjkT37wItAGLJN8LR593njXlgnW9uYEQLnDyag9tD96tx01F1Ts5WCVALDWLx2mzZ1eSXnWjWl7MG+Plk7J2RdvKeDrKQbllfut37+PMb97L9Tb+ovJt7EgBFb4ycQm7P/O6fn8RBaaJ9ZH8TLsvu3J4sQandw63nGHeyT+Yv/K8RQaPd26JnQCmMaVliqogfGfSYLokf//S/Z5dR+qjZ5+4SmsGyG4VQqDcbTbP1xSVCh3ECdy/6st+1XsKAmvVTehRT31ezkl9aBmyO2JV9ti4dv/RX6Qj7EM/rFplJcfT7OLcQzqO9DTsZ1j+dxhybpd998acB4Yj+MO4jMwPKjRhoWUg6MvMmZg9XQ1pcZb2dgDlMXkkdQ2sQUle2toRV1YlkeFcQcSLSiCQkw4B6EmA9bOlaXT+xaGLPlcmQ3b40ZG/bwrWSxW9l3Zi99OfI8ob92QpEwI2UiWBVz79K7BDPSZepOU6wy9w4W/WOYaP/q2MHMb8Q0kOB4KkKvlwb75Wk8TreURjwMWrzXgg49MQciKt+x/9EXBh6NUlFaDyQ/inXuIeNHLE7w1hJaT9OUR63G9O37tPVyFwx+9WYB3X2Rp8TpfIdyxMuOGWj95R8PL/shGK8oPWEhiV/8ISOpWCBlLo6f28+aX7KDyORZyosAdAyFZOQ7DmVrJp4M5U9mYj+RPOCCR0y3q5NJN5f4o3C8PUiGg4nfQl2DzV6+eEekfeCX7W09+QGTg0a76ZduyMFRbpH5r3GX2363RuBk1+Hgqi7xFB8Aev5yAFyZOxyqJQB/SbsGVdYCIXBV3jhhQBIiGdfFBkXtTgzuxIqFexUyifq98scEZCwASVyiqksBmrULM5cKTE/FXL1qfwli+AMpt2kEDORqm+IUYzq0vGfuAsjUHFj+s04pHIoVSgQ8g2tAfjfFjU03ut58jDAKQum94mvTND157uMysM1OSIQfMjy+kSAuOyFTIBO6E1AAKvnjUCAnOWNQ4Cw/CspFjGuMy0WtrozLxZhvDMxFv7YQHogLKKGFktM0YkOS1zzlDZZTP+UKlncnGgIe2oZDaJTr25PrelwTDMjFtQK2BaLBFJwiiUYkw+GsXZLqMAEBOaOvcsNTB7DdIpplY/yVu2UtQoLdKJzExv0StSYulSVz7zT8JffjRY2w8iku4nuKjZ4czItzpbXuWAmxkN3AvNH+UTq1M/ofLrvzcUpvn4mRdVAMy9k1323XYjM/2lAhlMDfrsIpzx1ZchBLndV/ETswLTKnTLGtNidoqznG1RGJfzTTFgOYlEpHj+JjAqZK2JsXiBECV/cx6LcfhiXXxF9RNyVJ7b0Pb8sKTkG+d5I2E4vRKhNjJV8bzTclUIXkcoeURe9yB73TZSqOPyhTaaGAo/QLq4ZQmneVZ9nYC9kISTFGjI9OFTyGc7SlSBWItcAnar+UxucjLmmK03sUBqEET/VYXjOSraRStfGk0Mw0c7kuyfVwm/6Y/GasMTlGAOMomaMtt4xzsuhOKsp1KTssR8EFJUmV+iUvH/es5JXjv8ioGvN+DNmCtFyS+GPXkWk8iVuI5G5pnZFij0qh6jgr3EOGX7+bZ3YYZqSnuQ3poB/aGfSFKRo68N6OnzpDXgdY4OkX9rdoT1ZBRJ1x9TuYVzK3uMOmoFGNjZPz27vPUHZQSPd7/zuq/eHg3CFpZ0CC/BpBqLkzSoyKKyiNNRZGfsp1elUMMui9PtzzeK8xargDX2lrnBVf5T1X25Z1qd2w98Znhfcyfkzi+Bt/DjtV93iPU/no+fUTfPgjwlikBlm8aZryzVgiOyjzlcBWI9e9g0O0GpyfJ3hahzftbJr7IJydmQ8jwUT8CBlSY5Ruv3kBxPbqXwuy5gZxxpb2jVo/LDePFBv01dvM1tvNVZvtVpvlWTe/N281mJQgyG+RINEsYQ/TcGLOfWvDvVMvZxuvLQtRKd4IF56xJNZA2uQktuDWYPzDbyYNVAGKZvdmTWY3uBNR/QGbzrBQdxmL3t1pEFcD3d79Xhza//43GGPIyW6wQl3zyMlvDd4u+J9A68jJYzBiSv3IyW2N3jTkb2BB7OY6CDclRezWJ457FM8Qh0xykdnZrGpepj7eIT3grjkWzrBP81hEflwTfLfgB93E38QDtWTuefjIBw2Hy75rk6wxNsnflzyE51gs0E4amKUz7P1MH/eYLUehuoNwPUwRW+wXA9j/gbz9TDbJkd7gPMJnbzN2K2oCfo8SOzq8MRQ7lbsqnluouAcQfVMzrTAGkH1IH+RRwSnXoKXzCHyxLdcaOy87sQ3FheZQ3tr+wmXAatyTp7RnHr+BYLsy5x63ZPY8Q9vcq+BXThrey0Bc7cCTp7KN/lx7Lj0xKLQNEE2d179EhDpZXvRP7x7YmP3tHdxdSdWeYqCOLvr5bC+Tf4KMyGmrM9ti+acMIjojOccNn68tt9rS/a88k6TGFDObDFOkt32mQePz5zzbU03U3sR/zevZlK4BfMvMnNh7b53G5uu93G3fwk6XyxO+QQ/v0AHmPsc40iuCsDLnTvGgyDRqWxVZcuz6cj2PsS9fmj353klqdm7EP3bnnMadkhz4fq7j/1C3pmEEgi3kOFPaBATr/bHSQUtiI/7aWe2bqP8L1xZRHIuoYqHLd9aOex80AWBJ3KkwExJWvusLqtHi2LutsZe+6wP+k7Vz3Ggw/ITTS78vBUvxVYwnxz+IoIOXagDIAr1RpyOMfaw7WbiI8FfKUB7Yr6mYss5Y6yVd1JQcqkY29Hcix3ggUDLiYx/h/Cc0/ToTxf27gYfk5SftHhOM2w4ndeSnYR1goSHVqfxb9srEUHE31plWvEW2dOL365ac1E6lG/Wv9CBkYr1g89DtXOajypP2l858x2df04aHsRw0bDVK74ONrPvjUIte2QRagXF3juk/zZx2G0orTCJYGZ/TGjKvlIQkVdhdL3Z3pwsnpYW+ZbK1mbcGeAshEYfBhXQiaU7NuQrJ4p1k/A/cUxDO85NFRjOQ2fIzxqj1Lgx2cT//h3OVTSMNjNB2fz2csKfuXb3+glVh874nZYb06vySNKAwl6MlQkb6FN3z09HWB5hJJl9ZFcN3UXTwEgEkjzomWukxSCn4PrU+WB80G7TEBSgmcMpsLeYY8M/uEMMdPOdiMixAAAs/9N2W59Yymvk3UvPCQMNgFRAjqBAkJDxFG8P7xDvIt5t7mblTS60Y+RWrWbIIW2FsVXTsXU1sM3clW4nD+DneDLX5uVllgtRiRPkPp4t1FxR4c/19TxYs9EpS1KxzNXdO5poM5TXnp87ylpr9lmYN1zxOgY3qy6YLIgbMnWwHvs6LuwYsh34Wi7ot68veBgujBuSHT7YL2h3gNavw2qM3Ylmq/P1TVt113bds1ccxFsPRFID0q7sPLRXOlxv6wMKAsJu0NbxVvA2Wj03Fh6THq3J8F03y+AfMTxFfom2bSydXiXO5fO12Qv4BXv93fYmEUWQ2ZDOL2gNYXvqmJUjpGPBS4/h7cPIv0KUq6aqmkaB6I78Qn9XrLX0dwkdSTApXlGw5uROE33YJnd7lCCNE72Eh9PaZmIgZ89tffyefq8sZ8O/bwG7eB6l2Oq+sGZ2N2yW9bLas3ges4RHwMvsxIW8edSgnBu2vBk6+6mEp1KznIp7Q1TOIYepebS95qR9IHV5lLz5VtwW3qA81SMbQyN7rgy9eP6AdUOkvfYP6L1ctYnxNKgP1Hp7vBH0O6Q3ftYfKX1ZQzHwA2E73iZLHcogzFXT9YVJeEDqOkwFnsvLUZD5KxOczPhL64/HvcePFH4lXZ8VbnPkh/DyN/z0jmxayobzBvwabjL8YoUfSB0SGmQjyqNOTf2GeD3JEtf2YA3QnE9OREVBfrdJTnvwz2et6r9qFgMEKDp2TwV8bneFawOWrW9p/GrWPG5rUgW1Tzo99sK/H3XOBAZqV+bSneQgl3fmIgjCC3YcyR3Rr7N/k3WX/SZrIrsenycocPyttegevf358divJaj5+fIYuKjqEBT4mHasah+E/3OvZaP+ufe4fwWldbDFa2ndxu/kJh5o2Pp4vkbkJSLQOrdauoWMH8rLyEu/wLRQsq75okeac206n73LG3rGf+Ndgou6fSouwSlm5hJcUtdCVxex8a5EORjgX9nAcN20/IlctXlWw6O5JfljV0luJa+0HCDovgjpGtnZ8F3dYnLHUJsA/9tWdnd0z7M/yu7Bel/7us95hWXg+xCkHghQHOdGJNgJYuoZdoAYuJKKhlR957/1d0VuA6xKnVC0hn01hqUUjjRA5jxPgJi5oumqMIyN+Q0zZpQH0YomGg9VQ0QyaoF0t8lLFuhtsSlJ6fIEPiGdUi1J2kOVEO4LmkzFderaZN4heAvS+zwDlfWQ+2cHDRUQrd8QgoVIOTnKkISGfEUP/E9auiTpTZzZJF8NWdxkGgiTKyZ/eI6SCk1Z8szQHwiuKy1/GDONdaJTT2XQ95riBTUZ/tSf5I9Dgb4sXfFGqk7kSEPijJrhFdTyTsW801+vrNqz1iW4KzTDsq60fInu455UnMq8pgShhleOvhiGkqclt9OPUPgr8WWxBbCHu/B9mH0R0364O3zAD8dijBllrhiewoSp8Sb28VLlb5oN2f5K2dO7V+oP+A7i+uCY/e0r5PZwEXlgoeqMVhO3D4BriqeJJSBCRHFl+qYJ/lgOWDSZLDpsDMG6YBgvEMlSFJzG24+5onngCAgHKRgX6dtYL4d7lqztH16hPdAGxICUNyiybbyWw26Ku4asIW7tykYUxvTG1MbMxpTGjMa0xqzGFMYMxjTGLLUptYm1OIaQQ8jhcO4F2kXchfIF472VT7N/jH+lf7Z/h3+kf5l/OpexHvkGywZVbeJp6mnyaToZgCyFCNJ8IeDT1SlekYI7gjFMtBO5o3xBdWF1r37Pfu9yj+wT81T8lPLU9BT7VPWU89T5FPpU+JT01PAU/VTxlNX5NdAwUHKZjQSAriAv/g5HyZkCmcKi4P3XbxJ4EU+lT2lPLZ3KgdqBqoHGL2IvauuspwDRJK+RDsjaxeAF3UXZhfXF3gXeRfqF9uf57sTboY2RjeGNGS+o31XAA+wzwJE3i3FJAaukHKxkU9OkpsdYnTKvQFSSCzaC5rt/ccUGJlW6c2QRjMfhbvYecXgSkREB8YGEQAIgkTG+MaFxZndWd2Z3dlBGUFZQ5uPY8y7sZX7mGKUuVwxDbiqrgnZJNtgQWnD1xZehS1q7qGRaQbcipySnOqcopzKnLKeWWTONCY+eKQUlNSYlJlUxRTF1NGU0lSmFKbUypXK4wyK9Iamz1qDIoNIAaf4Qsc6Ml6EyJTt1boRlpHrEYeQYAn9BsaTimXQ7JDtCMpI7YjiyNiI8QrhjZD34BGu9EFjdoKJba69GyqFH5BDbIiNY1DXdu/8Ngi9CtbBv4c7Tjm8Y5yjjVRQZECrFkqKiHjP7S6+KdrZAI1dAiaQmXk22omh2+gDfo0pAhaRWRY2uInl2+AD7WsejQkA5t4a0bEItQVtVzbqisbgyLk+Grah1enDf7orzgchnYGGAd4B0W39b8I+TjoxYl06XVNeXLqUugy6JLo0uhS49w3KjIqNKozKj2vX89Z/rOf2NxcziAuCuK6QHqjXxoELRGeN9pyuvB6Tn5Bdpv5kAd1FhMQywyKb+J5nehG0ls9BhJVPGmQyVRw54XDbdqk92Yw26WPMp3ObjNqLzoc3Fzzakdv16jTxVLHaDy43oVVSjsGTHlGe8AuqizTrWhCaGOtrzcR7Wwjqq8zHXPKEyoPq1RVN/C3+nI+7Az4FfjE0CdIznE66tfcYmmXFNxNMmJZirQD9BfSqmZQ0zi9AjVE9a/ZEJM+tGt8W2I6FrS08R/VJQIagCVOr41Vh7Q23jy4bGhtaGemv5acVp+Wkl2U+yipU5kgPZAxWP9Hb9Z51nqecvz0rPBs8SzxrPCs8ya0WBlYFlgbUnX4PUgr4EaQRpBakHfQ3SDNJ+VXv98mo2uoRAqc+lflv+KK05rSScT4o9Lo0yrdGkkUw4/XNAym5aZjurGFl5Hlt5jkt5AXUc20FacNrI/SOJdHxaCTeY0G7pN52rNN20rl0h91yWzXgzrp5ideq8nl1R89yyzXEzup4si+ylTZseXbVbWpXHXLvNWjOpnmp1+rz+IVX7jxo942rgvPHozFNWCUJTflpteFMd7nThMsy0svsCom1Yk3lT7/LHarEYm3C9RNyF6Obv58nnjTxfiNJKLMp19dLyLC0yl50dvvNoEJXEzQ98M292WfZ2COVRzy5Wni/9Nmir2djQQGjJPTEyX2oz07zdRLB8voy8rOSQplU4Pr/7rUQvk0c7uyzVDmeAbdnfIUSrnGW2osnWIdGzUKtoztZDr6slw3CM1TS9YXRx5+iDZ0nXzIAWYXeD3WLzkYCncEfI2pCjWeXi+DLmNu+21zbGtupNtUuZS6RLukurS0L9wK+FX6rvYrsXb+3ZRGOAfya3R+8Q6qLbU4yhR4C1d3bBgvG/JG8wg+KenRdJlxaeBEHpr0OBFqL1wCW2I+0bosfcZwpKSkZE/FsiDHwMwsfY5wHY7fxELuTH5Of+m/rnIxjBoaQc5xGCPQOzDde/Rw1o2GF9JuowqngCgg5/0I+bzomtax1qMtgqpOJ0xjpiNF8cWuNuJxadVjLaNgYeo1v7/cpJeE/wjKOFzWrvdJ9eboV5QbKOVF58FzVEk+ks/PSyJuFc+J3PEvwTX9t0VIYkd0wvnH2+C2mQ0iSkDQ6Z77hcePuECqnnUaumlQ0Njmju2Fy4/3LLqZ/XAaZhLLT1jqf45wh3arQZ1HwmHVnsPfzm6ep1djGWT+Dieba1+9lt1lTQe2fXvxG8mDknUIn2/OOkuGPf8YH9WUrxQKpMYKaNFSqR7iGt7aG84CHJe83clbiuMzmfva98beXr9sDwrPSg/GD4IPmg+aC4bG3PbcS7/nmda51jnWedvYXglPCU4JSIrK52ceGIqGXQO76K5nDxwz0/ITVGYhyE4IFfV5UHYB23N7wEYWiITQjx2HunIxlXhjejGIt3ZyESTjZadhHlnxSopkr4/Umhm+tn77fFzYi+vJQJ8gSCz2uE0YkOXOytWbXZThlODShxGMMeEMELrrYwA/FIgKJNLGtp+gzTfqo78pKUKidXm0pNenrdXpxs7PhA0YD5wPYA1gDutvw2ww2cX2JXn5FVbZ32kp09k19uV++6hVN965JKS8yxFVmj6mLZEecN/2NoAPKyD+q3bSl2eaVd/tVBNx+6qWH+wi8pIXnxONt93lPgTLM0ethxEgaZqOl8u8novb7LfKfa6IU+rak1PXW6A/GYyn5KF8rTCb+zvE68b5flW1wuAt8uEPInR8WAbO+eRZJvdwPEKtn2AnxE14F7LqKt3sFI4opBn7qjN8TMu3E2ok7FVRvFNbOXhcRVBUcuxbXxhlL9MV4RN/WnRvG/WX369uB4Xn/3rqmVbt/Z
*/