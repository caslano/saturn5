//
// detail/io_uring_operation.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_IO_URING_OPERATION_HPP
#define BOOST_ASIO_DETAIL_IO_URING_OPERATION_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_IO_URING)

#include <liburing.h>
#include <boost/asio/detail/cstdint.hpp>
#include <boost/asio/detail/operation.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class io_uring_operation
  : public operation
{
public:
  // The error code to be passed to the completion handler.
  boost::system::error_code ec_;

  // The number of bytes transferred, to be passed to the completion handler.
  std::size_t bytes_transferred_;

  // The operation key used for targeted cancellation.
  void* cancellation_key_;

  // Prepare the operation.
  void prepare(::io_uring_sqe* sqe)
  {
    return prepare_func_(this, sqe);
  }

  // Perform actions associated with the operation. Returns true when complete.
  bool perform(bool after_completion)
  {
    return perform_func_(this, after_completion);
  }

protected:
  typedef void (*prepare_func_type)(io_uring_operation*, ::io_uring_sqe*);
  typedef bool (*perform_func_type)(io_uring_operation*, bool);

  io_uring_operation(const boost::system::error_code& success_ec,
      prepare_func_type prepare_func, perform_func_type perform_func,
      func_type complete_func)
    : operation(complete_func),
      ec_(success_ec),
      bytes_transferred_(0),
      cancellation_key_(0),
      prepare_func_(prepare_func),
      perform_func_(perform_func)
  {
  }

private:
  prepare_func_type prepare_func_;
  perform_func_type perform_func_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_HAS_IO_URING)

#endif // BOOST_ASIO_DETAIL_IO_URING_OPERATION_HPP

/* io_uring_operation.hpp
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
*/