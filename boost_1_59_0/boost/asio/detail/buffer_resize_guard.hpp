//
// detail/buffer_resize_guard.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_BUFFER_RESIZE_GUARD_HPP
#define BOOST_ASIO_DETAIL_BUFFER_RESIZE_GUARD_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/limits.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Helper class to manage buffer resizing in an exception safe way.
template <typename Buffer>
class buffer_resize_guard
{
public:
  // Constructor.
  buffer_resize_guard(Buffer& buffer)
    : buffer_(buffer),
      old_size_(buffer.size())
  {
  }

  // Destructor rolls back the buffer resize unless commit was called.
  ~buffer_resize_guard()
  {
    if (old_size_ != (std::numeric_limits<size_t>::max)())
    {
      buffer_.resize(old_size_);
    }
  }

  // Commit the resize transaction.
  void commit()
  {
    old_size_ = (std::numeric_limits<size_t>::max)();
  }

private:
  // The buffer being managed.
  Buffer& buffer_;

  // The size of the buffer at the time the guard was constructed.
  size_t old_size_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_BUFFER_RESIZE_GUARD_HPP

/* buffer_resize_guard.hpp
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
*/