//
// detail/std_fenced_block.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_STD_FENCED_BLOCK_HPP
#define BOOST_ASIO_DETAIL_STD_FENCED_BLOCK_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_STD_ATOMIC)

#include <atomic>
#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class std_fenced_block
  : private noncopyable
{
public:
  enum half_t { half };
  enum full_t { full };

  // Constructor for a half fenced block.
  explicit std_fenced_block(half_t)
  {
  }

  // Constructor for a full fenced block.
  explicit std_fenced_block(full_t)
  {
    std::atomic_thread_fence(std::memory_order_acquire);
  }

  // Destructor.
  ~std_fenced_block()
  {
    std::atomic_thread_fence(std::memory_order_release);
  }
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_HAS_STD_ATOMIC)

#endif // BOOST_ASIO_DETAIL_STD_FENCED_BLOCK_HPP

/* std_fenced_block.hpp
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
*/