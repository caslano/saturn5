//
// detail/posix_tss_ptr.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_POSIX_TSS_PTR_HPP
#define BOOST_ASIO_DETAIL_POSIX_TSS_PTR_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_PTHREADS)

#include <pthread.h>
#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Helper function to create thread-specific storage.
BOOST_ASIO_DECL void posix_tss_ptr_create(pthread_key_t& key);

template <typename T>
class posix_tss_ptr
  : private noncopyable
{
public:
  // Constructor.
  posix_tss_ptr()
  {
    posix_tss_ptr_create(tss_key_);
  }

  // Destructor.
  ~posix_tss_ptr()
  {
    ::pthread_key_delete(tss_key_);
  }

  // Get the value.
  operator T*() const
  {
    return static_cast<T*>(::pthread_getspecific(tss_key_));
  }

  // Set the value.
  void operator=(T* value)
  {
    ::pthread_setspecific(tss_key_, value);
  }

private:
  // Thread-specific storage to allow unlocked access to determine whether a
  // thread is a member of the pool.
  pthread_key_t tss_key_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/posix_tss_ptr.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_HAS_PTHREADS)

#endif // BOOST_ASIO_DETAIL_POSIX_TSS_PTR_HPP

/* posix_tss_ptr.hpp
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
*/