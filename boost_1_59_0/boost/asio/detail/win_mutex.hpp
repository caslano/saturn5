//
// detail/win_mutex.hpp
// ~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2022 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WIN_MUTEX_HPP
#define BOOST_ASIO_DETAIL_WIN_MUTEX_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_WINDOWS)

#include <boost/asio/detail/noncopyable.hpp>
#include <boost/asio/detail/scoped_lock.hpp>
#include <boost/asio/detail/socket_types.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class win_mutex
  : private noncopyable
{
public:
  typedef boost::asio::detail::scoped_lock<win_mutex> scoped_lock;

  // Constructor.
  BOOST_ASIO_DECL win_mutex();

  // Destructor.
  ~win_mutex()
  {
    ::DeleteCriticalSection(&crit_section_);
  }

  // Lock the mutex.
  void lock()
  {
    ::EnterCriticalSection(&crit_section_);
  }

  // Unlock the mutex.
  void unlock()
  {
    ::LeaveCriticalSection(&crit_section_);
  }

private:
  // Initialisation must be performed in a separate function to the constructor
  // since the compiler does not support the use of structured exceptions and
  // C++ exceptions in the same function.
  BOOST_ASIO_DECL int do_init();

  ::CRITICAL_SECTION crit_section_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/win_mutex.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_WINDOWS)

#endif // BOOST_ASIO_DETAIL_WIN_MUTEX_HPP

/* win_mutex.hpp
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
*/