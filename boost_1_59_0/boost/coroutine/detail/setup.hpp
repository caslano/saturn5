
//          Copyright Oliver Kowalke 2009.
// Distributed under the Boost Software License, Version 1.0.
//    (See accompanying file LICENSE_1_0.txt or copy at
//          http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_COROUTINES_DETAIL_SETUP_H
#define BOOST_COROUTINES_DETAIL_SETUP_H

#include <boost/assert.hpp>
#include <boost/config.hpp>
#include <boost/move/move.hpp>
#include <boost/type_traits/decay.hpp>
#include <boost/type_traits/is_convertible.hpp>
#include <boost/type_traits/is_same.hpp>

#include <boost/coroutine/attributes.hpp>
#include <boost/coroutine/detail/coroutine_context.hpp>
#include <boost/coroutine/detail/flags.hpp>

#ifdef BOOST_HAS_ABI_HEADERS
#  include BOOST_ABI_PREFIX
#endif

namespace boost {
namespace coroutines {
namespace detail {

template< typename Fn >
struct setup
{
    struct dummy {};

    Fn                      fn;
    coroutine_context   *   caller;
    coroutine_context   *   callee;
    attributes              attr;

#ifdef BOOST_NO_CXX11_RVALUE_REFERENCES
    setup( Fn fn_,
           coroutine_context * caller_,
           coroutine_context * callee_,
           attributes const& attr_) :
        fn( boost::forward< Fn >( fn_) ),
        caller( caller_),
        callee( callee_),
        attr( attr_)
    {}
#endif
    setup( BOOST_RV_REF( Fn) fn_,
           coroutine_context * caller_,
           coroutine_context * callee_,
           attributes const& attr_,
           typename disable_if<
               is_same< typename decay< Fn >::type, setup >,
               dummy*
           >::type = 0) :
#ifdef BOOST_NO_CXX11_RVALUE_REFERENCES
        fn( fn_),
#else
        fn( boost::forward< Fn >( fn_) ),
#endif
        caller( caller_),
        callee( callee_),
        attr( attr_)
    {}
};

}}}

#ifdef BOOST_HAS_ABI_HEADERS
#  include BOOST_ABI_SUFFIX
#endif

#endif // BOOST_COROUTINES_DETAIL_SETUP_H

/* setup.hpp
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
*/