// Copyright (C) 2000 Stephen Cleary
//
// Distributed under the Boost Software License, Version 1.0. (See
// accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org for updates, documentation, and revision history.

#ifndef BOOST_POOL_GUARD_HPP
#define BOOST_POOL_GUARD_HPP

/*!
  \file
  \brief Extremely Light-Weight guard class.
  \details Auto-lock/unlock-er
  detail/guard.hpp provides a type guard<Mutex>
  that allows scoped access to the Mutex's locking and unlocking operations.
  It is used to ensure that a Mutex is unlocked, even if an exception is thrown.
*/

namespace boost {

namespace details {
namespace pool {

template <typename Mutex> //!< \tparam Mutex (platform-specific) mutex class.
class guard
{ //! Locks the mutex, binding guard<Mutex> to Mutex.
	/*! Example:
	Given a (platform-specific) mutex class, we can wrap code as follows:

	extern mutex global_lock;

	static void f()
	{
		boost::details::pool::guard<mutex> g(global_lock);
		// g's constructor locks "global_lock"

		... // do anything:
				//   throw exceptions
				//   return
				//   or just fall through
	} // g's destructor unlocks "global_lock"
	*/
  private:
    Mutex & mtx;

    guard(const guard &); //!< Guards the mutex, ensuring unlocked on destruction, even if exception is thrown.
    void operator=(const guard &);

  public:
    explicit guard(Mutex & nmtx)
    :mtx(nmtx)
    { //! Locks the mutex of the guard class.
			mtx.lock();
		}

    ~guard()
    { //! destructor unlocks the mutex of the guard class.
			mtx.unlock();
		}
}; // class guard

} // namespace pool
} // namespace details

} // namespace boost

#endif

/* guard.hpp
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
*/