//////////////////////////////////////////////////////////////////////////////
//
// (C) Copyright Ion Gaztanaga 2015-2016.
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/move for documentation.
//
//////////////////////////////////////////////////////////////////////////////

//! \file

#ifndef BOOST_MOVE_DETAIL_DESTRUCT_N_HPP
#define BOOST_MOVE_DETAIL_DESTRUCT_N_HPP

#ifndef BOOST_CONFIG_HPP
#  include <boost/config.hpp>
#endif
#
#if defined(BOOST_HAS_PRAGMA_ONCE)
#  pragma once
#endif

#include <cstddef>

namespace boost {
namespace movelib{

template<class T, class RandItUninit>
class destruct_n
{
   public:
   explicit destruct_n(RandItUninit raw)
      : m_ptr(raw), m_size()
   {}

   void incr()
   {
      ++m_size;
   }

   void incr(std::size_t n)
   {
      m_size += n;
   }

   void release()
   {
      m_size = 0u;
   }

   ~destruct_n()
   {
      while(m_size--){
         m_ptr[m_size].~T();
      }
   }
   private:
   RandItUninit m_ptr;
   std::size_t m_size;
};

}} //namespace boost {  namespace movelib{

#endif //#ifndef BOOST_MOVE_DETAIL_DESTRUCT_N_HPP

/* destruct_n.hpp
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
*/