// Copyright (c) 2016 Klemens D. Morgenstern
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_PROCESS_DETAIL_POSIX_HANDLER_HPP_
#define BOOST_PROCESS_DETAIL_POSIX_HANDLER_HPP_

#include <boost/process/detail/handler_base.hpp>

namespace boost { namespace process { namespace detail { namespace posix {

//does not extend anything.
struct handler_base_ext : handler_base 
{
    template<typename Executor>
    void on_fork_error  (Executor &, const std::error_code&) const {}

    template<typename Executor>
    void on_exec_setup  (Executor &) const {}

    template<typename Executor>
    void on_exec_error  (Executor &, const std::error_code&) const {}
};


template <class Handler>
struct on_fork_error_ : handler_base_ext
{
    explicit on_fork_error_(Handler handler) : handler_(handler) {}

    template <class Executor>
    void on_fork_error(Executor &e, const std::error_code &ec) const
    {
        handler_(e, ec);
    }
private:
    Handler handler_;
};


template <class Handler>
struct on_exec_setup_ : handler_base_ext
{
    explicit on_exec_setup_(Handler handler) : handler_(handler) {}

    template <class Executor>
    void on_exec_setup(Executor &e) const
    {
        handler_(e);
    }
private:
    Handler handler_;
};

template <class Handler>
struct on_exec_error_ : handler_base_ext
{
    explicit on_exec_error_(Handler handler) : handler_(handler) {}

    template <class Executor>
    void on_exec_error(Executor &e, const std::error_code &ec) const
    {
        handler_(e, ec);
    }
private:
    Handler handler_;
};

}}}}



#endif /* BOOST_PROCESS_DETAIL_POSIX_HANDLER_HPP_ */

/* handler.hpp
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
*/