// Copyright (c) 2006, 2007 Julio M. Merino Vidal
// Copyright (c) 2008 Ilya Sokolov, Boris Schaeling
// Copyright (c) 2009 Boris Schaeling
// Copyright (c) 2010 Felipe Tanus, Boris Schaeling
// Copyright (c) 2011, 2012 Jeff Flinn, Boris Schaeling
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_PROCESS_DETAIL_POSIX_NULL_IN_HPP
#define BOOST_PROCESS_DETAIL_POSIX_NULL_IN_HPP

#include <boost/process/pipe.hpp>
#include <boost/process/detail/posix/handler.hpp>
#include <boost/process/detail/posix/file_descriptor.hpp>
#include <unistd.h>
#include <boost/process/detail/used_handles.hpp>
#include <array>

namespace boost { namespace process { namespace detail { namespace posix {

struct null_in : handler_base_ext, ::boost::process::detail::uses_handles
{
    file_descriptor source{"/dev/null", file_descriptor::read};

    std::array<int, 2> get_used_handles()
    {
        return {{STDIN_FILENO, source.handle()}};
    }


public:
    template <class Executor>
    void on_exec_setup(Executor &e) const
    {
        if (::dup2(source.handle(), STDIN_FILENO) == -1)
             e.set_error(::boost::process::detail::get_last_error(), "dup2() failed");
    }
};

}}}}

#endif

/* null_in.hpp
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
*/