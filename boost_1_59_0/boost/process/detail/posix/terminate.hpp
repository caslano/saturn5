// Copyright (c) 2006, 2007 Julio M. Merino Vidal
// Copyright (c) 2008 Ilya Sokolov, Boris Schaeling
// Copyright (c) 2009 Boris Schaeling
// Copyright (c) 2010 Felipe Tanus, Boris Schaeling
// Copyright (c) 2011, 2012 Jeff Flinn, Boris Schaeling
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_PROCESS_DETAIL_POSIX_TERMINATE_HPP
#define BOOST_PROCESS_DETAIL_POSIX_TERMINATE_HPP

#include <boost/process/detail/config.hpp>
#include <boost/process/detail/posix/child_handle.hpp>
#include <system_error>
#include <signal.h>
#include <sys/wait.h>


namespace boost { namespace process { namespace detail { namespace posix {

inline void terminate(const child_handle &p, std::error_code &ec) noexcept
{
    if (::kill(p.pid, SIGKILL) == -1)
        ec = boost::process::detail::get_last_error();
    else
        ec.clear();

    int status;
    ::waitpid(p.pid, &status, 0); //should not be WNOHANG, since that would allow zombies.
}

inline void terminate(const child_handle &p)
{
    std::error_code ec;
    terminate(p, ec);
    boost::process::detail::throw_error(ec, "kill(2) failed");
}

}}}}

#endif

/* terminate.hpp
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
*/