// Copyright (c) 2006, 2007 Julio M. Merino Vidal
// Copyright (c) 2008 Ilya Sokolov, Boris Schaeling
// Copyright (c) 2009 Boris Schaeling
// Copyright (c) 2010 Felipe Tanus, Boris Schaeling
// Copyright (c) 2011, 2012 Jeff Flinn, Boris Schaeling
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_PROCESS_WINDOWS_INITIALIZERS_CLOSE_OUT_HPP
#define BOOST_PROCESS_WINDOWS_INITIALIZERS_CLOSE_OUT_HPP

#include <boost/winapi/process.hpp>
#include <boost/winapi/handles.hpp>
#include <boost/process/detail/handler_base.hpp>

namespace boost { namespace process { namespace detail { namespace windows {

template<int p1, int p2>
struct close_out : public ::boost::process::detail::handler_base
{
    template <class WindowsExecutor>
    inline void on_setup(WindowsExecutor &e) const;
};

template<>
template<typename WindowsExecutor>
void close_out<1,-1>::on_setup(WindowsExecutor &e) const
{
    e.startup_info.hStdOutput = ::boost::winapi::INVALID_HANDLE_VALUE_;
    e.startup_info.dwFlags   |= ::boost::winapi::STARTF_USESTDHANDLES_;
}

template<>
template<typename WindowsExecutor>
void close_out<2,-1>::on_setup(WindowsExecutor &e) const
{
    e.startup_info.hStdError = ::boost::winapi::INVALID_HANDLE_VALUE_;
    e.startup_info.dwFlags  |= ::boost::winapi::STARTF_USESTDHANDLES_;
}

template<>
template<typename WindowsExecutor>
void close_out<1,2>::on_setup(WindowsExecutor &e) const
{
    e.startup_info.hStdOutput = ::boost::winapi::INVALID_HANDLE_VALUE_;
    e.startup_info.hStdError  = ::boost::winapi::INVALID_HANDLE_VALUE_;
    e.startup_info.dwFlags   |= ::boost::winapi::STARTF_USESTDHANDLES_;
}

}}}}

#endif

/* close_out.hpp
1YyLUNtvScQf3z8a7XdZP8c8ENK9DYKOSVwrukOr0pujTyDqI0r1sBtOGqosZEcEswqlEWN5ObLgDWbsgp20x31NVtPLqbS0PtZ+A5W1dDTx4vtNGpC5NjcP7eXs+/3/g+9EE/OoOhP6/eVZ9Do9cWs5tQp1smV/ucPE+dvl003+xRP4kw4ricbtkwxn6F+pr731nx1wcBfn1xejnRq4e3tJx7Pqv+l6iWFGIkgicfU0Oy6ELASNdXiaIyhlqtmNODsGI/P88RsBJu30VlKH71zC7lMVzhYfqs26Sc8NvjY6oPFlcDsQdrcKu62yNm0Pt9lOOCDL0LB5RM+845dm1LuuV2zEKhN2R4Tdh6dEYoK1V8wZT3nEo3aoX6oX3IHWzamGNkz/rTqHPyD1f6/aKJEmA9l+f0dSW1Cc7Z3/Npuu0XNoi3aYckuJO7/brX4qqt1SaL0d/jvgf5YYvhvuXAymKvtzOu6EcFhvJ4Ehdl86cYoDqUhsgidKhbIzadzzrIV74sstu2R4ooglW7jChMyM0OxTabiRIjjbvNH3Iu7QvEv3pCBiwKPPJprYC6u4VV/kNdJ7NG7EUkEeh6CFufeLtFQSIoWZdhzFcJbU84VAxu7U9Goj2MZun0q3OnbLShSekM1MRHWckO0BigEpnjJz7YD0lTiJm+VwCVws0++CYPYAb2PNOjOHxcgeIpPz/nOYb/oYo6A09kYOqvzNTkSPcPqSVBSy+saLZn4HnQw5NNvOphrWbtLzwPVI69wQ70w1U0klubzZD8CvMkJteKR+rqXFCEX/n6L/FNX2IvzCpBnbzMVwMbNcjBziyj4ajNrLFIK/HA69hiur4M5N2kH7ELUZhb654JsErVKPASHw3ympJnwO0DMXv0g7e4ZUyPWwfCkYVQquv0tL4q68q7PlOaLx7sEsfxnPsvcXlGVmPMtUikt52g1nHj0yqVwgjd2eCrXMgi+aWFmxL5pRo+hrDyorstv+AQPfLQSeR5nt8GYLlqw2h+9zoRggcyzncw8tQHgsevVdM3xJUvg7ZpRTgjG/8X68r3a4Hz7tGIF9xsv+e55rV2Ft0txcoQZl6+c0ViW75jQJTyPmYfVdc3wPGam1lSYT9L1kVFmydMRy0OyQYEsyxKtNmtO46SKmusVI9cpKLPN/TYIqm6liz+lYuLAvKcQHHfrxlmJq5V4Xie7BlsRuWEYBE6+cpncgskGsg2N9eyp5aN++Rl/a/VB0NBH5iVdk8a8fwPq/0vODH1wd8fA1/Hb/gBscL7lat5XbwTSYX3n+h3JKTCJsDeoZ/5dwWXqEZPBPi1vPodLdphRRPyz6D18S9cZ9kwLaPe7AaV+m2tSjRb60qQ0RNsnS9kj7Q85TvnwxHPw2zAwIi0a+TDLCHm7fgdeNQ0qGHJ5naT2ve8qjkvrcX94MTDJpo8Dvs5a43wvgJ+otYRX14tQmUW/oAf9DYqQvSVQjkJ1kaQHvHjZYtKjWS7mHfuI/a7E0RHoTxHBaAlCDltaH6x+laVljnwpUKwzU+rpnczw/hLSipS3yZYKRXI080p70SH2SlNuAEEBibr2lQXI2bElyh5cl9GkWydLm77MJgXbi6A9p+KFIdJLlOG/4DWH137Q7Wa35Swc2NgkcL4JDcrYJT28leJ/zSdqTauNU6uckvcXfckmvp07Ge9v/xz7+RTP2ZwT68z/ifawO+mEfS5bnSCXEUDDALY8rH3AXzs2H61EO28I3N9F/yeybJoUy31mcYgrZ3sK/E5sXc0GSUnzi5rqzSHThg0AJRH2Nou6FvwwNikODitT0P8AnsrGN3FvqTKum2ULpz4H3EymWFj39KXBpac6WqhG5LbqtEvNIf4yKW4chz1wloHn8aRLQjOu+og2EmBx6GTJAw7IDLhylDrbfxjekcriWFb5ADfdNQDlcguQnIdzhRj3VxzM4Qp9z9ulFKSZfmnP2OfgVahBHtnDiszYgHWtGIelROHEDfuxOf5x+bPwrcy38SOC7An5RZR9hoRH1S1Tf8OVBQKbEI0ws4L+22/AX7weojSTBn+lIHwFV/paWg+EZPF5mig13dwwjsPY8jIlP4kBTswlo4Ht3+k+sPMuwlWq0nX4yt3Lf9O9Zh9covxXacD8GUp7qwgzfFCxoMY8/0Y3xqU7LsE5QVPQ5QovfnXmTlddlSDW0zXQ9d6v/CK9LluDk9w88skkAR4KoHhTDDye6w98wQ8QStOcJ/10Iu4QpqAhENnsLuohyQ4HGRf3EaM74qhS8nx7C5r+Bb2tvsSxIoWbe5EFdEls+/KhLJojOtk3XOw8J29HKlOhsERTdY3DoWhAA4Nq2bdzatm3btttbW7e2bdu2bdv26/vxbTZzdmcyyZk5yY8k2Qz+Ax7mDyivq48spRqPQIRmLco+19yNR0z21s1Gnwmlye2zMVJGeag/ZHdrF9yHTuw2VYyTYTls5dFzPcTV+D++eQofzqU8Wsp36d1Z0iCYrjXdBgIWMdhjn9iR3fBcTX66DG9F9Up6vQr6Tn3o8LyPujAV5NXow8Df77zhOjimYYjVrvYz6NsDFeUGyMdYjHQh6VB9SCZ1dF3t31S6cXuKXguu0phbIdbQKDSIF/LcIZAt9tCn5J3nEDPLvCtQOjvMASJgyJahh+1GC4Nm8RS3nFrNmch6Q7TS1RsNvot7dIdpAnJyjezWuGfhj6aESEZBW0dNi5G1Mh8X6L2+IRldXNr5L8IGaldS+dHb8wF7PCehto+wQs9vtSufaRiuV0kTsRNHtPcDVTP7tIwvCK3lN/4fMUVP4S5x/Q0sill+w5eq2OaxR8MrbKSRbbC1SxHJYKtJ9aUErNZyoci9KTaXjQjeVVXLL7CT2BHzyQOIg0zHH69qR3g7wz90bVrCT1JvT6hs206PQ2hsm/8iGP+WajUguG0GzmY5Hk44a9j0Vgtzp9yHzM5D5q//4dPW+zoB3JKiaN8JXgXcohZ/spwDkVNvtpQgItIXqQw+Lqcb3HRt+5Q3LxOabAITErHn46F42dynmxHNU+KYB18Tc3+mdbYXrM8uPXrdHaNcWSvn/VleSxoxYRdwghcoEoxsyNWlVFucgEs6b89VKjoXFPiGN/SiGSFstqF3NS97in9us08taHQ8b7pqzf/GnNxgsP7Of41cHo6rXkGMJRdp2joJaejHEaLEiuKzpPedm31l8xH5bMh2/5wTOtBLDBmC3/gmzLPVXHUdfuWx/ax2LkkNGYUawEViadhtZ0S0yZ2+SfT6Mzp9HA1U8QgTP6xJC+13dtC5/fcPtCJdcqEbbzboSxapXmFqP6krAe/T5MBMfEy2XYjftuCtqDt+rt0Jj0i9Uuid50+LKfRx2RceH9LbCD1YXF0Kf/T8XTxEcIgPcmFumg8NvC2kUUBgRriaDe20DaKVjIhAxVrBykovLJbMtW9AvxJxAPFaDgNhGjwnhAwHyoKRy1gIgxIaHrTYQrfycwcN0KoKiIYdimtRPd012fsuUEgwZeW8mQgveRpVFS5thYDtwLS2FXyxYL6mlL2zDTYl+CJ/OxA7TAg23VGxVA0NH+54iuVIAYB88++qGKGBNXyH0wQ5nwkH+hACgXB8weiodj2veFKtMH/SnmRMhQn1CWOS8DiwNM1dxJYd3LWsrX+XFyBiA6RBaQthuBm5Ql9luXg9Gh8ZMKBNuGnZwbxsuB4nfhDD7wz2jXeddF5mqB5qiQ2jBGY3GN8hQ/KccQUbLbYOV+RznkwwBDeSj4KFL7QU+ED+zohlahP7rm/HDdQTtudwWOGsqmrfGNdQ/47T0410tbiv+sF9hFvpA1Om9hqhPgGkA8/njisdQwfcDleVUOYiH43RaWQEsz8wayU4sCyHpPFEUKaBAs77KGO0FBcLgchQkgIURvIlH1PJrM/XFuU7rztdA5+Jlsz8fpFwdNI1PT0CeqyhL11/+oLId8lCpArZAnKmZqL6Tf7NZdYadALX/sAXT5sDKhvZTwe3H22LM+7wLSlq7c8m38J+yTiRzLaqB+2Mqzh6ztVdWFyI6egezGHv+fC6/nZMINPDjTFq8EBH2oPavL9uE14MNO2JmB05mqxUf1SYuXFzpzevEMGYybBCLG5Xj6+330vYQ+Lbuw/ixq9GI4PWUvnHXhn9kPJF4hyIetM9WxzJizM9YpJJ2O9GSOXg4vYTx9U6NZmMe/47wNjiLwQlgoGNiAioiHiYWC33/DYsIolSfNPGs65fxFilsTL68RsIh3esRiUx7cYwVwjMmr7YyYqYCaOVK6hD1SvH1L5m+2c3KoO1zNLz+5TDR8+FCUvajU2+597TRdgGmYMHG3qc0aWdVOtR15x1aOFF3tklgTFkIdoRCBfygBrfmockZoreTc24Qx9/Jj9s6SYrxrvtHvqmCKGiuz9mwL3WHH57Z9rDEw2ttRzDVq+NjATZVTNGZmShLbk6Ri55KIBHf79KLIsEx0LbJ8JHYuVI/xVCkaEvE17eKyTIQx+4qh/Pd7VCUkKT9+uEH2TZ2h86kcEGe4cSLZ7ArNnL6QVaBhjr50gY5YvZLX/4rYBPBtd+WGnaCNrslZa9xJ1FqdFSnbsiZB3DvWcMp9VAkcCPW6a61Zux8g7qZu51+SUGFajtYJK4h8MDC5oWimbQnl0F5JdTfoPeM06pbKR4RO9PDaycfMC1nZoBaTn7CjHucwUCRCwFSxfOPkEmfxL7pPA4OjTKxU5Rc/A7SdEfiJ0lLSTTVySHvtOp8/N/xYWdXVYQ0bUlRtpWT2nT5+Im9uEacHQS+jlj2vibc07rEJr4jVJ9ktDHeCKjwG3Tgz8qXkDhEfEVhWgpYTX/8MYrtNsEACwpiUDJn5x77SoTs2PUz6tpDzbypH/WZH/eEuLi7f6heNMD1tV/TaF5SBbAKIysyOHWIrS6ZpvaaabSIw90UmFKzGYYlHqzutlHgZHHdDidlqMHBpDfsuxRorbxinoAdVPYdaNCIVjt3EqXjRDJ1kLNzavv3dB6TyoaWECQeRDBLL8gjnYKPuJ3Pg4iBo1WabubEPnVfNVtHN4KdrXnCtapoNPcCsCbjHlGPpeNrFUaL65XfED5SCzBOgXA0XoQIDVaJQOiT1dNJWyeA9ahlTSVdk90e/BsJ0VIGUvxNY7hdvPN6NCDNRPpXHJwVPOWLLTjnRfGxBHPaWjNzD6O0k5XSFtomk+LJDxqUrWa5kpdc0Amgj02dzbB23GpvPEfvtDwvGTk4I4mhwPIYJFsDda6NH7ae6HRkFWHmXMcOjy/55584JW3i1RL+ZyoXZwUdT5QS4sb6+2jWhjYdTAaSKpUS2/gfB+QkmknlXMlS0qz06DS3MBCKdoHp836d+x7aV2yBxCfSqDzhYThN79T14HshnTPS64UmnAkfRJcUqjOnIaKJNWZgvNB2RnX7KBqTeXYLLuoCaCSC4HB1g144gktI7cb8PAF1uH3riJGVPFfvoT+A9XEtp66kBlnP/Hqvri/EPnZzMR0fDPYhKOdQp1SdcoO/zS8kA2ymbNc/xdduEOI6HFZuz/r2jgxKTu16KKeWEpr8ZIoBVG8gP1q/HBAYvLUmvaFcoA8jiryMyAdcwZO3swnOw2SIHxbDybLt3fOIaPyQFoRfe4lS4bi1rvNA8dye90XNQ4/cb7xKcwzjjfYOY4Ni1pfcLlKwulUTRLwXeWo+zl594P8vnOchcZnP17tsTs6/DCNLf14CzzSR7YlAT5dL+O+ax67a1EwJIsNnkXpEVgSDcKSEUzOBZMdpC6MIA7+wfD8FBxYMqHMrXMezVbEfWCehsenUi9z6Zby5q8YAj5eL93epna/MGiOPFmLMVloc7BILauYS04XYfm4RC03P2CdNUk+b96sj9clwKchsvIUZoCalEfSCrIgyic4QtoMrYWdHUfO1aOM5NDotHE6mYjwcUW/0dxrrp4vsVGZf+gReXiJohv26kWnwpEFzralsFBeOFR6mU2QiT28hjUT3IJXgtiMd4x4CbDCGQAPxxMQfbow9QnhexhJKHb7hOkMgkxyQHXOmgoEmt9jF31P+3qhihfQg2oe/LdyR59PiUwsb4MF5iPkH7CfCDMEJ/Ows7BWbmoShRHDSYWgkiehc79a8HdFxnBDby9nn3mStuNaWHN2vgd7az23tprzEC5l8Rcl83WZ53FaiXz0UL/LXexbo4EbU6vXDWU3Pmak61AA+8LRvTaB8/1FC1pyqwyZ3vq2Msg2XSc5tOjbwzDxtqPDnzgb3aYtK4FXX7UQrVWd9FaKSxaTNoNtP5ku8qkL6524/AhXqcCVtWYBBERDWsatK+7OPZrkXNEQAocDntUK0c69R68fT92X0qpLLU5E0BX0E1FuS+x3EJcYQcLSapxcfq/1zyzTAeOnx9YqYiBXpm1M/UOb74uDBx54GcY+RjRXPQQgwHUnOAY+y9VQM5y0NCAn6/P7yE3Xa+vNveUxbX1nTl9vnWOggpDCUjU8MkpN67TbP0Ty3eTLaKiH1mkZBIuF2HLRKxPaYEn1kzjpRT7uyT7QPzbJpnmmNf42rtaEM45kvsw0hxrHs14L/QYa32i8KiEYGLHeiud1m5+2LdhHP4IhZWs47TsS/dcFhlnR1m4TJOhKNYWzkWwahzRBPJ4PWY6vGxwc70hepJXAgEdb+jtySK4CyOdH8v9YBVfVop4p1U/8+MNpzZdfXTrj8ZwFz8tNDdwSjv9NpKwaAMEEJa8CVyUtEOREzErTIguIKZBFknhQg442E4EsMFICIvfVvcMpx361GDPSsA5E6NzssiatHMjqjr3ctEa5SHe3aw3WXQcybK0Hy001zOykGyIBlcpMZ2vQG4s302IwknSDDrzXGPaxhB761HWU6kcqhnwxGKrzFeqTVW6dAufMRUvpU/FrB323q362q3sXweb3GgbwUEfkJ29BN2gL8jOJfhV6jZbiO8BjPn1dGzT5jslQ/MWXETTQjTVZ7tiCtl9UOEeyFMDYXikfnlRnCcJiIxLycjI2UKPe4A5c3uusMbf+uVM3EoP8EO/aw12GWaCwPPZw15WhN82QzgRmL0lbGCtqAiZGTOL09JKuZXgH04WsyYQPqM24sAsCieZfo2vjMLIIw3hXcTwleS3UDWI68U0hfDrU17KNjWxrOV3v+ucJU50FUlZl5ts9Za3oxZCtM9MJ7wq+qQETX/Lz13k9vnVUabuEcgXFI2JvED7lqLt5MoFZ+HjMlyuF/jzTB7Yr5CunULts5RbJ3SdJV+hER+2MJcwhjXze6tW3E+V58pLQE9atA6YrhLyVrsOMfp/1qOIJa17M0hyfyAflB3PKj3E3dCK7MGNOLOe9yrLhbBShrcug9+pcAimWauJGNfZjhtz+itWeYmeQb+i1ZNFvO5/mKaeFquV1hpxq5Sw0ce1SrmFfeuGFrZ+gTb8rdJp4htMH+1O4BfmM/onyugnUt5Hq9RvuRzdyZ8d0o8JIHgGnWH+Anh3Eru3K7AJZJpi6atx8UCj3JUg21xYbAdMf9mPTfMAcUnzJZ0C3cjuzIG/aQS1RMrJfbvJUMy3b4wcN5Z8h3o8JE2WwLhFKopw3pWHran/79dwTMb/R2oPW2mbgq/qCnZro+4dSErNfj4qEIE/u2fqUrsuObP+m
*/