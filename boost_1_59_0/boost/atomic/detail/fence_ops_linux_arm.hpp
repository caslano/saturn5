/*
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * Copyright (c) 2009, 2011 Helge Bahmann
 * Copyright (c) 2009 Phil Endecott
 * Copyright (c) 2013 Tim Blechmann
 * Linux-specific code by Phil Endecott
 * Copyright (c) 2014 Andrey Semashev
 */
/*!
 * \file   atomic/detail/fence_ops_linux_arm.hpp
 *
 * This header contains implementation of the \c fence_operations struct.
 */

#ifndef BOOST_ATOMIC_DETAIL_FENCE_OPS_LINUX_ARM_HPP_INCLUDED_
#define BOOST_ATOMIC_DETAIL_FENCE_OPS_LINUX_ARM_HPP_INCLUDED_

#include <boost/memory_order.hpp>
#include <boost/atomic/detail/config.hpp>
#include <boost/atomic/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {
namespace atomics {
namespace detail {

//! Fence operations based on Linux-specific system routines
struct fence_operations_linux_arm
{
    static BOOST_FORCEINLINE void thread_fence(memory_order order) BOOST_NOEXCEPT
    {
        if (order != memory_order_relaxed)
            hardware_full_fence();
    }

    static BOOST_FORCEINLINE void signal_fence(memory_order order) BOOST_NOEXCEPT
    {
        if (order != memory_order_relaxed)
            __asm__ __volatile__ ("" ::: "memory");
    }

    static BOOST_FORCEINLINE void hardware_full_fence() BOOST_NOEXCEPT
    {
        // See the comment in core_ops_linux_arm.hpp regarding the function pointer below
        typedef void (*kernel_dmb_t)(void);
        ((kernel_dmb_t)0xffff0fa0)();
    }
};

typedef fence_operations_linux_arm fence_operations;

} // namespace detail
} // namespace atomics
} // namespace boost

#include <boost/atomic/detail/footer.hpp>

#endif // BOOST_ATOMIC_DETAIL_FENCE_OPS_LINUX_ARM_HPP_INCLUDED_

/* fence_ops_linux_arm.hpp
+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
*/