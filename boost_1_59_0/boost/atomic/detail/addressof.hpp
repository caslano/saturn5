/*
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * Copyright (c) 2018 Andrey Semashev
 */
/*!
 * \file   atomic/detail/addressof.hpp
 *
 * This header defines \c addressof helper function. It is similar to \c boost::addressof but it is more
 * lightweight and also contains a workaround for some compiler warnings.
 */

#ifndef BOOST_ATOMIC_DETAIL_ADDRESSOF_HPP_INCLUDED_
#define BOOST_ATOMIC_DETAIL_ADDRESSOF_HPP_INCLUDED_

#include <boost/atomic/detail/config.hpp>
#include <boost/atomic/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

// Detection logic is based on boost/core/addressof.hpp
#if defined(BOOST_MSVC_FULL_VER) && BOOST_MSVC_FULL_VER >= 190024215
#define BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF
#elif defined(BOOST_GCC) && BOOST_GCC >= 70000
#define BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF
#elif defined(__has_builtin)
#if __has_builtin(__builtin_addressof)
#define BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF
#endif
#endif

namespace boost {
namespace atomics {
namespace detail {

template< typename T >
BOOST_FORCEINLINE
#if defined(BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF)
BOOST_CONSTEXPR
#endif
T* addressof(T& value) BOOST_NOEXCEPT
{
#if defined(BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF)
    return __builtin_addressof(value);
#else
    // Note: The point of using a local struct as the intermediate type instead of char is to avoid gcc warnings
    // if T is a const volatile char*:
    // warning: casting 'const volatile char* const' to 'const volatile char&' does not dereference pointer
    // The local struct makes sure T is not related to the cast target type.
    struct opaque_type;
    return reinterpret_cast< T* >(&const_cast< opaque_type& >(reinterpret_cast< const volatile opaque_type& >(value)));
#endif
}

} // namespace detail
} // namespace atomics
} // namespace boost

#include <boost/atomic/detail/footer.hpp>

#endif // BOOST_ATOMIC_DETAIL_ADDRESSOF_HPP_INCLUDED_

/* addressof.hpp
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
*/