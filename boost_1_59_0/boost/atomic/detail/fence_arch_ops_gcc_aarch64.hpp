/*
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * Copyright (c) 2020 Andrey Semashev
 */
/*!
 * \file   atomic/detail/fence_arch_ops_gcc_aarch64.hpp
 *
 * This header contains implementation of the \c fence_arch_operations struct.
 */

#ifndef BOOST_ATOMIC_DETAIL_FENCE_ARCH_OPS_GCC_AARCH64_HPP_INCLUDED_
#define BOOST_ATOMIC_DETAIL_FENCE_ARCH_OPS_GCC_AARCH64_HPP_INCLUDED_

#include <boost/memory_order.hpp>
#include <boost/atomic/detail/config.hpp>
#include <boost/atomic/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {
namespace atomics {
namespace detail {

//! Fence operations for AArch64
struct fence_arch_operations_gcc_aarch64
{
    static BOOST_FORCEINLINE void thread_fence(memory_order order) BOOST_NOEXCEPT
    {
        if (order != memory_order_relaxed)
        {
            if (order == memory_order_consume || order == memory_order_acquire)
                __asm__ __volatile__ ("dmb ishld\n\t" ::: "memory");
            else
                __asm__ __volatile__ ("dmb ish\n\t" ::: "memory");
        }
    }

    static BOOST_FORCEINLINE void signal_fence(memory_order order) BOOST_NOEXCEPT
    {
        if (order != memory_order_relaxed)
            __asm__ __volatile__ ("" ::: "memory");
    }
};

typedef fence_arch_operations_gcc_aarch64 fence_arch_operations;

} // namespace detail
} // namespace atomics
} // namespace boost

#include <boost/atomic/detail/footer.hpp>

#endif // BOOST_ATOMIC_DETAIL_FENCE_ARCH_OPS_GCC_AARCH64_HPP_INCLUDED_

/* fence_arch_ops_gcc_aarch64.hpp
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
*/