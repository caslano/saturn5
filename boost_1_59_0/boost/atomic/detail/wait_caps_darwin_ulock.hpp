/*
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * Copyright (c) 2021 Andrey Semashev
 */
/*!
 * \file   atomic/detail/wait_caps_darwin_ulock.hpp
 *
 * This header defines waiting/notifying operations capabilities macros.
 */

#ifndef BOOST_ATOMIC_DETAIL_WAIT_CAPS_DARWIN_ULOCK_HPP_INCLUDED_
#define BOOST_ATOMIC_DETAIL_WAIT_CAPS_DARWIN_ULOCK_HPP_INCLUDED_

#include <boost/atomic/detail/config.hpp>
#include <boost/atomic/detail/capabilities.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

#define BOOST_ATOMIC_HAS_NATIVE_INT32_WAIT_NOTIFY BOOST_ATOMIC_INT32_LOCK_FREE

// Darwin 19+ (Mac OS 10.15+, iOS 13.0+, tvOS 13.0+, watchOS 6.0+) adds support for 64-bit
// and inter-process ulock operations.
// https://shift.click/blog/futex-like-apis/#darwin-macos-ios-tvos-watchos-and-more
// https://github.com/thomcc/ulock-sys/blob/2597e63cc5372459a903c292a3919d385a3e3789/src/lib.rs
#if (defined(__ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__ >= 101500) || \
    (defined(__ENVIRONMENT_IPHONE_OS_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_IPHONE_OS_VERSION_MIN_REQUIRED__ >= 130000) || \
    (defined(__ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__ >= 130000) || \
    (defined(__ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__ >= 60000)
#define BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK64
#define BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK_SHARED
#endif

// Darwin 20+ (Mac OS 11.0+, iOS 14.0+, tvOS 14.0+, watchOS 7.0+) introduces __ulock_wait2, which accepts
// the timeout in nanoseconds. __ulock_wait is a wrapper on top of __ulock_wait2.
#if (defined(__ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__ >= 110000) || \
    (defined(__ENVIRONMENT_IPHONE_OS_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_IPHONE_OS_VERSION_MIN_REQUIRED__ >= 140000) || \
    (defined(__ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__ >= 140000) || \
    (defined(__ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__) && __ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__ >= 70000)
#define BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK_WAIT2
#endif

#if defined(BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK_SHARED)
#define BOOST_ATOMIC_HAS_NATIVE_INT32_IPC_WAIT_NOTIFY BOOST_ATOMIC_INT32_LOCK_FREE
#endif // defined(BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK_SHARED)

#if defined(BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK64)
#define BOOST_ATOMIC_HAS_NATIVE_INT64_WAIT_NOTIFY BOOST_ATOMIC_INT64_LOCK_FREE
#if defined(BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK_SHARED)
#define BOOST_ATOMIC_HAS_NATIVE_INT64_IPC_WAIT_NOTIFY BOOST_ATOMIC_INT64_LOCK_FREE
#endif // defined(BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK_SHARED)
#endif // defined(BOOST_ATOMIC_DETAIL_HAS_DARWIN_ULOCK64)

#endif // BOOST_ATOMIC_DETAIL_WAIT_CAPS_DARWIN_ULOCK_HPP_INCLUDED_

/* wait_caps_darwin_ulock.hpp
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
*/