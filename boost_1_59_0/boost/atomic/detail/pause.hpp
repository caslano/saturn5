/*
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 *
 * (C) Copyright 2013 Tim Blechmann
 * (C) Copyright 2013, 2020 Andrey Semashev
 */

#ifndef BOOST_ATOMIC_DETAIL_PAUSE_HPP_INCLUDED_
#define BOOST_ATOMIC_DETAIL_PAUSE_HPP_INCLUDED_

#include <boost/atomic/detail/config.hpp>
#include <boost/atomic/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

#if defined(_MSC_VER)
#if defined(_M_AMD64) || defined(_M_IX86)
extern "C" void _mm_pause(void);
#if defined(BOOST_MSVC)
#pragma intrinsic(_mm_pause)
#endif
#elif defined(_M_ARM64) || defined(_M_ARM)
extern "C" void __yield(void);
#if defined(BOOST_MSVC)
#pragma intrinsic(__yield)
#endif
#endif
#endif

namespace boost {
namespace atomics {
namespace detail {

BOOST_FORCEINLINE void pause() BOOST_NOEXCEPT
{
#if defined(_MSC_VER)
#if defined(_M_AMD64) || defined(_M_IX86)
    _mm_pause();
#elif defined(_M_ARM64) || defined(_M_ARM)
    __yield();
#endif
#elif defined(__GNUC__)
#if defined(__i386__) || defined(__x86_64__)
    __asm__ __volatile__("pause;" : : : "memory");
#elif (defined(__ARM_ARCH) && __ARM_ARCH >= 8) || defined(__ARM_ARCH_8A__) || defined(__aarch64__)
    __asm__ __volatile__("yield;" : : : "memory");
#endif
#endif
}

} // namespace detail
} // namespace atomics
} // namespace boost

#include <boost/atomic/detail/footer.hpp>

#endif // BOOST_ATOMIC_DETAIL_PAUSE_HPP_INCLUDED_

/* pause.hpp
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
*/