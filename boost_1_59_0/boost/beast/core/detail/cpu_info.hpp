//
// Copyright (c) 2017 Vinnie Falco (vinnie dot falco at gmail dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// Official repository: https://github.com/boostorg/beast
//

#ifndef BOOST_BEAST_DETAIL_CPU_INFO_HPP
#define BOOST_BEAST_DETAIL_CPU_INFO_HPP

#include <boost/config.hpp>

#ifndef BOOST_BEAST_NO_INTRINSICS
# if defined(BOOST_MSVC) || ((defined(BOOST_GCC) || defined(BOOST_CLANG)) && defined(__SSE4_2__))
#  define BOOST_BEAST_NO_INTRINSICS 0
# else
#  define BOOST_BEAST_NO_INTRINSICS 1
# endif
#endif

#if ! BOOST_BEAST_NO_INTRINSICS

#ifdef BOOST_MSVC
#include <intrin.h> // __cpuid
#else
#include <cpuid.h>  // __get_cpuid
#endif

namespace boost {
namespace beast {
namespace detail {

/*  Portions from Boost,
    Copyright Andrey Semashev 2007 - 2015.
*/
template<class = void>
void
cpuid(
    std::uint32_t id,
    std::uint32_t& eax,
    std::uint32_t& ebx,
    std::uint32_t& ecx,
    std::uint32_t& edx)
{
#ifdef BOOST_MSVC
    int regs[4];
    __cpuid(regs, id);
    eax = regs[0];
    ebx = regs[1];
    ecx = regs[2];
    edx = regs[3];
#else
    __get_cpuid(id, &eax, &ebx, &ecx, &edx);
#endif
}

struct cpu_info
{
    bool sse42 = false;

    cpu_info();
};

inline
cpu_info::
cpu_info()
{
    constexpr std::uint32_t SSE42 = 1 << 20;

    std::uint32_t eax = 0;
    std::uint32_t ebx = 0;
    std::uint32_t ecx = 0;
    std::uint32_t edx = 0;

    cpuid(0, eax, ebx, ecx, edx);
    if(eax >= 1)
    {
        cpuid(1, eax, ebx, ecx, edx);
        sse42 = (ecx & SSE42) != 0;
    }
}

template<class = void>
cpu_info const&
get_cpu_info()
{
    static cpu_info const ci;
    return ci;
}

} // detail
} // beast
} // boost

#endif

#endif

/* cpu_info.hpp
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
*/