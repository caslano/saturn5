//---------------------------------------------------------------------------//
// Copyright (c) 2013-2014 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_DETAIL_NVIDIA_COMPUTE_CAPABILITY_HPP
#define BOOST_COMPUTE_DETAIL_NVIDIA_COMPUTE_CAPABILITY_HPP

#include <boost/compute/device.hpp>

#ifdef BOOST_COMPUTE_HAVE_HDR_CL_EXT    
  #include <boost/compute/detail/cl_versions.hpp>
  #include <CL/cl_ext.h>
#endif

namespace boost {
namespace compute {
namespace detail {

#ifdef CL_DEVICE_COMPUTE_CAPABILITY_MAJOR_NV
    #define BOOST_COMPUTE_CL_DEVICE_COMPUTE_CAPABILITY_MAJOR_NV CL_DEVICE_COMPUTE_CAPABILITY_MAJOR_NV
#else
    #define BOOST_COMPUTE_CL_DEVICE_COMPUTE_CAPABILITY_MAJOR_NV 0x4000
#endif

#ifdef CL_DEVICE_COMPUTE_CAPABILITY_MINOR_NV
    #define BOOST_COMPUTE_CL_DEVICE_COMPUTE_CAPABILITY_MINOR_NV CL_DEVICE_COMPUTE_CAPABILITY_MINOR_NV
#else
    #define BOOST_COMPUTE_CL_DEVICE_COMPUTE_CAPABILITY_MINOR_NV 0x4001
#endif

inline void get_nvidia_compute_capability(const device &device, int &major, int &minor)
{
    if(!device.supports_extension("cl_nv_device_attribute_query")){
        major = minor = 0;
        return;
    }

    major = device.get_info<uint_>(BOOST_COMPUTE_CL_DEVICE_COMPUTE_CAPABILITY_MAJOR_NV);
    minor = device.get_info<uint_>(BOOST_COMPUTE_CL_DEVICE_COMPUTE_CAPABILITY_MINOR_NV);
}

inline bool check_nvidia_compute_capability(const device &device, int major, int minor)
{
    int actual_major, actual_minor;
    get_nvidia_compute_capability(device, actual_major, actual_minor);

    return actual_major > major ||
           (actual_major == major && actual_minor >= minor);
}

} // end detail namespace
} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_DETAIL_NVIDIA_COMPUTE_CAPABILITY_HPP

/* nvidia_compute_capability.hpp
iwg86Jnh1HN3AAbZXZGiTmxbWwykh3B6Ql2QytgcNLHCzvDxtmF3t9efutXmqEYNjO/uXSLZqQGEVmD/DUoWpPwBIXW7EcvKBfVxg0J/X2i1k01rtuRvPThk9k111peQGmuiHXl+RvxnxNmAx710hsz1uX9jQbl3ZWHpI28qKnyv5JhCkbprxUz/thAY+BacOVkZgopljav8ekVWGDcsr4AczWNzzDSS3YRo6dSyyNNIw1bt9Y/dkn6irarKyMrWDDR1DI8CnRdf2/7bQeB5oHEFgYYNJWbcvmq/mv/hw0UliyAb1FQX6gyLgIXn7zPatvlLmL6NJVSXyt7I1ZYoBCeZQZh9YnuvO1UbVsYeKGk0EpXmLP5AelMVu430ad06fSBrBoazljfqYhTL7gYrTFIiFePmxgYdvG3BVGgWSw4HNG572Kbv2gGpjVbAr7skwrMc3NbR99e1d5WyQ77YdTaYNBSRLWVq3l2DcopDIvSWwfd+jVqlAtHs6sMpi+PqFhpe6LngxvxTnKboulCuKwrh3BTU1LJq9KxFLa3fNIbhrY71rc0pAhq31Dh3qM6z/M7n9vPwlOW/+cmkp2aqDq5rwnPztGjxCCo/wJa7sTjbcrkHDBauW1Vxjcw+xMrffXv+5h2NyGOu0Gvw5yH/01DddebpSMmUxFPlfUpE9VLWrVEei+za5rst5D/Ulp03lwy85alGXTkvSV12YeNJVnA0pmcPzWZc64sdaaiESe8rpCK2T7gpVMns4kVQQfeATMHm0vV+CqYo5iM8QU/Clp8iu+TUJmjgMHRneJe5CnXwatUAhfU7j2fjxfd2SBbwUFZF24dGrfwD/va4lLK67uIuT6kw7XYarHXAV2hcM+q92KipY7rIg2dL+zMe7ODhgr/c1hjz2YpIBQO1Qq93arN6O3cCES0Z1GRDjn+XReXT9vIC0Z/z0hz+QmXCxZ2ipx7MzbDO6zNeU8T88RD+pEePyeolv21nN3v3jg13hbyzGVY6/+ff48yTASeyIS0q6XuOF5GbEnQ5Sk3qzLTM2zJb2rRf5R2SN/l//53IN55CzoPPJen37D7tif/nqgsqPPhi5yW8ueV2Wjx16ryAh7I4tRrmXMvzxDgwruhrR9AlCntxUnOnIEGZ6XWZFQ0KQYlOAT/Wq9Zbz99uFUtGSlq41c5h4U3BsesUSr7pAkYAcZXLerFrwUqLy1lArMcf+iHp0yeAgeUe09rC3dC6JjXOLQ72Bk2yE8om685JSO2TPoGo0yAf5FYmGFTOaKrW9ULC3oI0QUXDo1Auo8LVzqfalM0WVuMWURrKX0Fn+/R57Xf855vD+vnpz5fDf6Fa3gjvVg1D7iwtamXjDbQXF2ccMKeD775MUAywDFM5lgP/FkN9rR1TFtIbZoarbiWPU2QFn8CUEPCflTyEBzHCZ22qkM64s6doybjfqetp9wkfV27pt216p3tlnPFfUTdPfd+fqurlghYl1+F+tQxgutiqrRLrfGEb9UWPcvMGYVsx9ah3C8xkJerfEBS6enj+5GPyte83GWxSyLGKaKmD1jC4/5IZyzpbKBRH4nfZ+0diUyu4G1WDCIsT90teUDJ0iCS7xhDvrGNJ9Ezigw1wXj430xzgSvS9YIR/ZYT96/AkkuBEtjLSkGyCvEP4P6rx+6Z3k9fx9nYaJJ7i0Tv52aV0P1m8OlIsm9v8MyvlB/nAANJ7TYLPGM5EuH8YsTVX1n2ILaqnqtlzni39jf590RKLIMXTnmPuU/cpJHIN7Rilv9oDsbfUBoqOiyt9zyMl+4luYEjbahbDwfBW39zqa2t5Pa0m1MGymRpc98GJSWlttOpM8ZzeuZpO4NFX2C2xNy6ijIyRl7N/cDVT2FREw4lTLDH4G/d3ClfV+ouZ/0QQLY25n2c8fLo1tEpZrgkN7qwRP2bYhzPmH67dSOGlMagWE5C/WNEtwKuSMx8pBgvmidBbhbOBHY5bv2CsLnR4/zdyWeQhgt1ER+tRjlLnkTvkHb0WlsONRFSqjcZCsyZeTpXNgx9X5wUqNQQ+D+NMJKKdGjN8/7lC6+pkZXi/t+dx9lYmjil64TxsfpU6EFlSYdls4ag7wfYLhXaRS3CH4lVqgO8tTe5sabRbqX5QOzu/zzyrLIKFt5P3zBX2FYGYKuoRjKK7vr6+h1iWlcEdK0XVu+s/1KepADwzUP5nK1qqP96HOOfqhZkyaoolGzTgAtNekapf4te0lmwyKV8n+OFQO3NT97idiOuuInOLd5ljjRqApkO57Bv2f+6tJb5Jg7GFmB8MIpXEvxl+Vr8QFgMa1+VnN6/t4MIuIT0riaBHIA55wl8PmeHmdIh+Ea0ec6hEWNwMY2E86yt8B7TnyaNxjYVZjrFvv1WbolWp83xclPU6ePvkEngzhFTU4Kc8LJTS3Z0mbweXDdTA46uFrCEjroXrOEmA5F+m5DkK7R6TSjRlsf7ZQSfjXkuYWIts+Som1qphqCUhvYoR/Wk/YlLfSWAyiv7zAcV2nNjIdx33xUB1b+U1dEwtbvql0WQmbkPjxeOwyf7+N1hHs3ReJQ7vKi/3dy7Vqta2X+haJOqlJ4PoMeA2bHuysRPZ/EdSpsepiKykp3rl3Fo/4HGbxe6TBLXFfNgsNki9gSCjsuX93s2M/1mONDnXms7aS3Ru3bHkH7tpBtgzx0dAIrm+gaFINTf8/N/20CAyPu6b1sTuAqJSomOUxtKQF1S9HviqQ899Qb668BeEcKlgXIgnjv6u4KkMVpKelrf+CibI9bfGZGMzlDIdQmp7VFcdCJ4TzxyKCaF3Uvol6sCiuDeq9Wb9mg6CNAmhzm7a8Hm4vEp3A5WiN1liPi2rYVfB5OPUB2aJwiNamTJr7aEHrg/frMkgYWYCP/4fre2xE21eQiKoK6rAEe11D4Z9+3jkyJmRnRD7hyxm6J1bDVqSggDUqBtubq8DSrtc2Gcw6mCynSvKX5JfMZL9FqSNX5a0uIxlNkVoeY/GWEJDi/WOC4+jLSMVlmiu2+4THs73A4uli+VKg+CYDSftT79yOxP2w5PbbOPe8DUQv60OQgsTPENu9UaFh4ixIl/DszGSnB4nGmSk/37eu00ftlc0xSMVGvPelPdf7KhePnDmQO78qY7q9ByReWH8L81QEKwutprb476tUyw5v1Y0rtnDaZaS6y8z3dI3In/SaAP3kStV4A0di9uvmmOo3LheNjjlZhZnX3N7+7c9g7dm9qu2PRuVlQvbgn5yTL4KSJIeXyntnWt68a3E+b+TpbRTA9/eHS/6om2zBOOcDicjwyRLNQZWw18hruQVaAaseoDGDWnYpf7SZVGk2+LNt4RAhMXy2+Ek2J09BrCpKusmYxcOAn2ZpdrvCYllaNwK46c3dVGjXN5L3gd8YktkUDMdFUYUh1IMzEGRhjfUMg4ypNvWP2G6kX7LaunUSiVhrFt1Le69MR3ktOfRkowK9r875bLt9sv1vAY3lCTbhsqC39Gsij6uNW3OOI4yi68VK9fDlmT6BkG+7x1ZNpZ4y6IxDmxgWxDTxLig8YcZaFpO1Awv+9EJtSspEPHZoJuk/pmcTZuzJjSosOM27931Po1fJP/Eoy094oFMX7yek28lmM/eWQsTJ7H0zOfQLzt4aYEnvRTRCmpD1B7882bDQ4XMneguqPOFuIGJtehUZZ6Kkjp+g6MwTpqpVhNeLjB8oHuH49CZIGod9JMxfSZKx5/RvXxz/QOTiAbJAwNVZ6tnvmr8GZS0pRRDh+uE77ZQPt9fSSGSTeI6dj+3XRTIENpXcncOVx/y353DnxGwyYaXsTOZGYXlQN1DL4KB+p2UMpO7f8hXR0+6HG3siAckvp62noK4/MnMRmc+na4iU3GLmgWRiOVMRpmtW6vkUxcvznPijLjojqn0nrBKUBYYRPCVk2YRHSn+MIu5OW8Fo0saI0aGP/PeDqIejuJN38vBeRDeZ/+hhG1JOCXmE70wlPfKLx8dl+uy0KI5f9p6RmxGjb56O2Ba1VYPp3jLbrwofYbIhu3aw412XCO3+wQdWY5O+u0O3ZkTjI4cH87crsHj7kip2QrNF6WCVoGhhK6BIcTZirJV+mbbH2kqV5MmYnZCmB/Jx8CvJYDbwAhJyouJDZx6Fqw9OI8yNWKZdj9EP7/b7K0hk8uVkhlIGnKC/POyLOmmanA91fJa9DxdVO6TWXpGJU78o2ulQfhHJ5+7LT/v6hz+me/SUtiymWVzVwjbcmjiku5Xwi04qhRb27TnGtf8BHhtv2KCWpL49MXfPJD0GtGdA6miOWeVuLk2+HatqHbOyR0335PfU9XtF8o/Bd6vU2KLOjULs+wmowcjdENSfAauCOky/RjkbKiLxKfnTFaBUev8CpRbyjL/DtTM4HXUfaM2ySf0yaE7c9eksL7GApbYy6eHmZp12Y5b91Ql2FjKE1pN8HwpuoRNS6iQAsJ+0dK+NX8wf1oF+pRuawqMIqUdlrKKzHu3mEzPr3QwO25Qa3FUcqvF3VZ87qhv9MHsw6VFwrHWv3RYFUtp15H+7P9kLR4ZpKbAiIoMASse4/OjBZtNkvQfMfGwwlthZ18ilPgAFA4RwUSMdur+WlRfVYWSg0EIVcbzec5XPk37lWslNGPpUSmj+kv/XY/3JLGYh+APrNFxik7ilwjWWmKTB3/yHKOzqPo07gyfXgMZXOvX4kIapOSzWzO31n9f5kSRmVgtVTgavWWj8nhf+M9gT1MsRDxSnHorsLZSrDyLjSV3tJUYvz7YoQsGgzffRXttSthGy+KgFbRCX6hlOCKpYfAYGXCoq9Z1Izia9ZTRpmf/HwATgOx/3ggdqHCUi/HR04I2Z1y0MiYuY/IKODMnQZ2nIx3kAhrDM6Lp8kwm1+dPVbyWOFpglCQBQw+A4TTO2RpUEb5nyFJM7a2RG2bVWRHW5UtP1g01maaZD26Ey44JLRyrGUIIhljw/LZlOt2fO60w13/OUmyqAldBPKpWz/hqB3wzJcS1uKblPNQ5YnSNJK5Nti2A0ntve+EAw9updiWtUxwRtjGwxdniG+Y2uOmcbs6iXnr71VKV8AQxzhwCTlc5Z+wuemnrjgiqjkTiNUTK7B74ihjftYHtp99+GJApRZuTMXHVGLYl69s3ceRujMgJ4j+p0ujEv6AAnXpLVvWDW4I7Gh1o60lO3dBhQXd1TdLWadtrhuKFo8xfhMdJHcG+LB8rOTqfkmECgWoN2fmlWOWQDA/WRb/CO7izbBJsBXs7FQCZjgb/dd6cwQSWJuTKlNNFh2mXc/C19Nwo13B2BuE+y6h+ZxH1HThs4dYy9kWkYTQoweDBpD1BV6ejLr/0gTpapZrB6QKiq5f5XaXVqcm1sT3Rao1Rv8pyCPXMu6WmRpnevrriA6i6xgkTipSyftYstzVo3+TDl7y85Txn20iHgZo/b6wxaewRvdxlUbHOBO8Cm/ZmZlql12T0W9DqCcX2xmhjIeUcDu2w711rWOaCRp0fvY+T3ven29Z7X/3HG/0aVBLj8rfis/QKaFh5i5JwJ5wfm8AjUjWH5ka0+8c8dtRagXCBhckBkzME3MJ1bXcNRWzb50OoK77qe8r0sQjhE0cJz7aYw3CIHuU9FraaKxluTLnzNXLpW1MLICMDTsu814xOB3EVOMN1IqljzfoA4T6tHPal5kew+yWaFfDr0pzJpWb2xcbBPmKgIhIMegIWbywdQoSSWOGNH972ZxOFKK1+IROfTiXOhlMvgLm5urGk3tK5gLV+CKxTLhM+c+mODek4uA9S+yxvoAe/eSCWwtApdQElaLfAe+rXprwADVuK8zTAggB/8i/SDwCMpNpnPmG5HK4ueQ/uLNj56MWwI2T/AXZiaWnnYP/CDTpnFxeH8lePHIuGNOrkdV6JbxHCboUtRRl42DYpCxDzOLZ3Jk0Ytjp+JL7Gsrjf3ME9e66WdSRssb7ckSuH6BRU/tRhpBy86w7WV159uKGiptc4oFliWFSB8NU3xg4oDbcwKBSYcj7bzkP5WLNX64hbl2yQr/ra+j9uxga5Tu8QpxZjBGFwujWM2+0tsZPk6aKove1Ab+cYpRWibt7KRip82tKZg4p8xZ2e0cFFeG0vomRaHVHB3BDmRJSu/qJhxfFVh9gx8ceOFz2VyquXpKaCVu1qMzAOhfr0m8c+licTGZQfSp+svS283MZlzzCb73Lob5SfP3LaLC4lYDVmyWJguAUPiStwptvKqNakuYAfEGwCLAhslYkkHXKrdlYrrStNZZFB6VP3ZT2cn0DVmXoON7sEglIwIFJ1UK4bObdC+JhXxqaoO+3wKsIVpsdP5irW/bva5M3XK8/d9miXoh2ZMSqk4SHVCmokVnZwTA3Cy4lElN1oEejPnWW1Lj0/WtfUcY3nB1a5YunSBBN1B/pTFJo41SXcExrTe9gIe6qrIvvmBF9IPL9GCGh+OzLY4/RUNUO5Krfx5UUFHLIxuAtygjCjR1Td8YTcI+ZKAA+ywI5MXZju0XDFX3makjQp7mSiBH2x4BSA6wj5PGKd8VV7KlVTg4BFhOzRsBV8d8NQMLHH3A1CXoMtKMrPlppdbetNRKZT9tI3Cz6djkdRbQAPJ6ZZ8TzgIO8abcHag3vXJwi9eQv2hjK+1vBfg0DuYAksX98LVBWo92+MkJDTrslLauqJGZdfrdEMgjgWFzlD5vWHJjVaWoZj2mTjLrNLHcdrFiwitO7EnlOh35ny6pIxjRuQ3c48SnwJFgyw4t/jwedUfR8z6v1FQVqqj4C8xptfzmS0sRqad2VOiJZScefH2FLvu5O5VZXWI6dOiofTi4HIVlZ7i2bz0W6vrIgcjiSrLBqiq9UayiTKkvIYiPok2WVZrUX9aAOH030kHY2HvY+C6/W7d0wVNacY0uK1c2zJPzu6KKaQ/w6ndwm9ES950CDT73cjF9FDITB8MBprq/hd5sFoklAT76GQMPdbgMKnEEfdSQGpy2ZfoIOd/h5ZaKZhDzQjhRMQVcgtdeZU2i3PXU4ea8qjR7SNmmDxo1+qseNk2Ii7RqIwrNbtfRP4eefgt0NqCqTR4EICKBH0Nzc1ohQTkG1x8WYuq2zq7u1vRkuDP4TsAWrS0ICX0bI6TaVg2Ecru4uq8zErdqk4e5oY8mp1Q8h/9BxmPvwYiYDr+cRewOl+NPZ3NyRl6Zf1iyggyOW4cpD2DKNfUi0a51KzVi1+HP8F9cuJo4ukBpNPYTcNnR/Q3YzgsKby859qyUGrcAq/3E3NHdnXm/wpBPofmm2aMxUfRLIfBK4WwHtjNoNe3RZzVXKnkUGQRHLWoZWEpwYknO5sWaYiNk8t46rjjg7Z/J/B07nD2HjZOBwRhyfkZ25HRwRQjEsKrFCKO9ZK0uAjMhfQ2y4JiC2eEMo5c+KI5fHiY2yrI9fjSKqh32OmDmXc55yZVxkRlL8eJEipqBbPgKBZQFKIxHOyGs5vijM2bl86rp4jM4jfPSG59pS0qOsW1Paw+BQ1l8Tpo76IGiGAmCX18XsTz5HJrw07Y5kWF2jd7+6RLfyGactTT8l4XXYZH84yb3ochfAQR2ggqz0P8Y/f/Y9lBrCK/cPobl5b7n7hjN6wvSbTR9dcqAqrzBLpCG8jVRu7XvmA
*/