//---------------------------------------------------------------------------//
// Copyright (c) 2013-2014 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_DETAIL_WORK_SIZE_HPP
#define BOOST_COMPUTE_DETAIL_WORK_SIZE_HPP

#include <cmath>

namespace boost {
namespace compute {
namespace detail {

// Given a total number of values (count), a number of values to
// process per thread (vtp), and a number of threads to execute per
// block (tpb), this function returns the global work size to be
// passed to clEnqueueNDRangeKernel() for a 1D algorithm.
inline size_t calculate_work_size(size_t count, size_t vpt, size_t tpb)
{
    size_t work_size = static_cast<size_t>(std::ceil(float(count) / vpt));
    if(work_size % tpb != 0){
        work_size += tpb - work_size % tpb;
    }
    return work_size;
}

} // end detail namespace
} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_DETAIL_WORK_SIZE_HPP

/* work_size.hpp
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
*/