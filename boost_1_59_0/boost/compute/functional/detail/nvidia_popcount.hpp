//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_FUNCTIONAL_DETAIL_NVIDIA_POPCOUNT_HPP
#define BOOST_COMPUTE_FUNCTIONAL_DETAIL_NVIDIA_POPCOUNT_HPP

#include <boost/compute/function.hpp>

namespace boost {
namespace compute {
namespace detail {

template<class T>
class nvidia_popcount : public function<T(T)>
{
public:
    nvidia_popcount()
        : function<T(T)>("nvidia_popcount")
    {
        this->set_source(
            "inline uint nvidia_popcount(const uint x)\n"
            "{\n"
            "    uint count;\n"
            "    asm(\"popc.b32 %0, %1;\" : \"=r\"(count) : \"r\"(x));\n"
            "    return count;\n"
            "}\n"
        );
    }
};

} // end detail namespace
} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_FUNCTIONAL_DETAIL_NVIDIA_POPCOUNT_HPP

/* nvidia_popcount.hpp
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
*/