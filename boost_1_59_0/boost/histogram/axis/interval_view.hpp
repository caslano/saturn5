// Copyright 2015-2019 Hans Dembinski
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt
// or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_HISTOGRAM_AXIS_INTERVAL_VIEW_HPP
#define BOOST_HISTOGRAM_AXIS_INTERVAL_VIEW_HPP

#include <boost/histogram/fwd.hpp>

namespace boost {
namespace histogram {
namespace axis {

/**
  Lightweight bin view.

  Represents the current bin interval.
*/
template <class Axis>
class interval_view {
public:
  interval_view(const Axis& axis, index_type idx) : axis_(axis), idx_(idx) {}
  // avoid viewing a temporary that goes out of scope
  interval_view(Axis&& axis, index_type idx) = delete;

  /// Return lower edge of bin.
  decltype(auto) lower() const noexcept { return axis_.value(idx_); }
  /// Return upper edge of bin.
  decltype(auto) upper() const noexcept { return axis_.value(idx_ + 1); }
  /// Return center of bin.
  decltype(auto) center() const noexcept { return axis_.value(idx_ + 0.5); }
  /// Return width of bin.
  decltype(auto) width() const noexcept { return upper() - lower(); }

  template <class BinType>
  bool operator==(const BinType& rhs) const noexcept {
    return lower() == rhs.lower() && upper() == rhs.upper();
  }

  template <class BinType>
  bool operator!=(const BinType& rhs) const noexcept {
    return !operator==(rhs);
  }

private:
  const Axis& axis_;
  const index_type idx_;
};

} // namespace axis
} // namespace histogram
} // namespace boost

#endif

/* interval_view.hpp
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
*/