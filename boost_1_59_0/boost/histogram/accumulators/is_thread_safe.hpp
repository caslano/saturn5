// Copyright 2021 Hans Dembinski
//
// Distributed under the Boost Software License, version 1.0.
// (See accompanying file LICENSE_1_0.txt
// or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_HISTOGRAM_ACCUMULATORS_IS_THREAD_SAFE_HPP
#define BOOST_HISTOGRAM_ACCUMULATORS_IS_THREAD_SAFE_HPP

#include <boost/histogram/detail/priority.hpp>
#include <boost/histogram/fwd.hpp>
#include <type_traits>

namespace boost {
namespace histogram {
namespace detail {

template <class T>
constexpr bool is_thread_safe_impl(priority<0>) {
  return false;
}

template <class T>
constexpr auto is_thread_safe_impl(priority<1>) -> decltype(T::thread_safe()) {
  return T::thread_safe();
}

} // namespace detail

namespace accumulators {

template <class T>
struct is_thread_safe
    : std::integral_constant<bool,
                             detail::is_thread_safe_impl<T>(detail::priority<1>{})> {};

} // namespace accumulators
} // namespace histogram
} // namespace boost

#endif

/* is_thread_safe.hpp
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
*/