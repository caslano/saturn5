// Copyright 2019 Hans Dembinski
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt
// or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_HISTOGRAM_DETAIL_NOOP_MUTEX_HPP
#define BOOST_HISTOGRAM_DETAIL_NOOP_MUTEX_HPP

#include <boost/core/empty_value.hpp>
#include <boost/histogram/detail/axes.hpp>
#include <boost/mp11/utility.hpp> // mp_if
#include <mutex>

namespace boost {
namespace histogram {
namespace detail {

struct null_mutex {
  bool try_lock() noexcept { return true; }
  void lock() noexcept {}
  void unlock() noexcept {}
};

template <class Axes, class Storage,
          class DetailMutex = mp11::mp_if_c<(Storage::has_threading_support &&
                                             detail::has_growing_axis<Axes>::value),
                                            std::mutex, detail::null_mutex>>
struct mutex_base : empty_value<DetailMutex> {
  mutex_base() = default;
  // do not copy or move mutex
  mutex_base(const mutex_base&) : empty_value<DetailMutex>() {}
  // do not copy or move mutex
  mutex_base& operator=(const mutex_base&) { return *this; }
};

} // namespace detail
} // namespace histogram
} // namespace boost

#endif

/* mutex_base.hpp
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
*/