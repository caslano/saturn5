// Copyright 2015-2019 Hans Dembinski
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt
// or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_HISTOGRAM_DETAIL_RELAXED_EQUAL_HPP
#define BOOST_HISTOGRAM_DETAIL_RELAXED_EQUAL_HPP

#include <boost/histogram/detail/priority.hpp>
#include <type_traits>

namespace boost {
namespace histogram {
namespace detail {

struct relaxed_equal {
  template <class T, class U>
  constexpr auto impl(const T& t, const U& u, priority<1>) const noexcept
      -> decltype(t == u) const {
    return t == u;
  }

  // consider T and U not equal, if there is no operator== defined for them
  template <class T, class U>
  constexpr bool impl(const T&, const U&, priority<0>) const noexcept {
    return false;
  }

  // consider two T equal if they are stateless
  template <class T>
  constexpr bool impl(const T&, const T&, priority<0>) const noexcept {
    return std::is_empty<T>::value;
  }

  template <class T, class U>
  constexpr bool operator()(const T& t, const U& u) const noexcept {
    return impl(t, u, priority<1>{});
  }
};

} // namespace detail
} // namespace histogram
} // namespace boost

#endif

/* relaxed_equal.hpp
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
*/