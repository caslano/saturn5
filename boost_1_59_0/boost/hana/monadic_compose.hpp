/*!
@file
Defines `boost::hana::monadic_compose`.

@copyright Louis Dionne 2013-2017
Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE.md or copy at http://boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_HANA_MONADIC_COMPOSE_HPP
#define BOOST_HANA_MONADIC_COMPOSE_HPP

#include <boost/hana/fwd/monadic_compose.hpp>

#include <boost/hana/chain.hpp>
#include <boost/hana/concept/monad.hpp>
#include <boost/hana/config.hpp>
#include <boost/hana/core/dispatch.hpp>
#include <boost/hana/functional/partial.hpp>


namespace boost { namespace hana {
    namespace detail {
        struct monadic_compose_helper {
            template <typename F, typename G, typename X>
            constexpr decltype(auto) operator()(F&& f, G&& g, X&& x) const {
                using M = typename hana::tag_of<decltype(g(x))>::type;

            #ifndef BOOST_HANA_CONFIG_DISABLE_CONCEPT_CHECKS
                static_assert(hana::Monad<M>::value,
                "hana::monadic_compose(f, g) requires 'g' to return a monadic value");
            #endif

                return hana::chain(static_cast<G&&>(g)(static_cast<X&&>(x)),
                                   static_cast<F&&>(f));
            }
        };
    }

    //! @cond
    template <typename F, typename G>
    constexpr auto monadic_compose_t::operator()(F&& f, G&& g) const {
        return hana::partial(detail::monadic_compose_helper{},
            static_cast<F&&>(f),
            static_cast<G&&>(g)
        );
    }
    //! @endcond
}} // end namespace boost::hana

#endif // !BOOST_HANA_MONADIC_COMPOSE_HPP

/* monadic_compose.hpp
+3WBIdr7XwxhqXfzp7xDwRNkksQ3xeJHQWNVBQDKpwmuktvpWIZCGLmKC+E1zPMVr2ltjwjhNexKPxfCa1iqH/eKbgY9r6115pcjt/Kvj/x7pI+Iwa5rU/GwTmAQFPEY2fefofQul3et1yyPjIjlEbERyAYhO8EnHd00Hk2FYNhUUNu4T9d+HL0o/6NGbjRUr2X0SQ6Ufx6QEu3fvIt0fhTV75K2sHuUDZaKJsKugrp56a30lmERttfnFGDhJOi1fxiOaNHblrtHl3uGKT1K58ptI2sOignXjZJicxfcKJ0V3hwpvHntlCNSrFw3PDD17SBwosf6n0oKXtzdL9cN0YyWNgxn9fh3/WyUG3UbpY01f6bZKJfG97NRAEUR1xhhAgXWubvQxsyA5yirpQ1++wPjKA87NDqSvV/LbgHj8hm/btD4/SScOti9oHUDyZ5sN2GYv5/dekrLGXIclzSrKqwGMYkPR8R4+eUJNDWP0vPCYzjCR8FqwQ9ia473qdHrBpFvp0XorAO/dlM8CBTcQ3AwvBYA0Nq2bdu2bdu2bdu28dW2bdv9a7uvb3EymSwy2dzk3swkOPN9eEduc5+UAs6UzIf/6YP2/qzQdbokrgIPnJnbQ1pUtDVc+CFFrvlPZB6+GBuSY22b+0JWl4AFJz7t6TcyfJEyO/Cq8GyLOZMAfm0hCrz2p563Pb7wMFrIbW1VFL5ifm+8gtrffpF/fbK6I5xPrWUeC5WW7tKX4PP7G+yG8NIxwtG4ZmMk+/F0m3SyWcynfz6h6gD/ShE1mRoZ5rUzyHcTystMIoOfSILeqArE9+u0If+uIxKfIL+g8+uvOZ/tyKp3+ZbK7xJ0oTpAxbia78lWj2G6L13ex3S9T6oZgUPlyg15VE556zQvKin7kWf/RL7YFgOcxeRFBdfTc+94oxTAjYnyK9XcTAEQSHNJUoNu2n02cOSnxEJHqPmZNAH2xZYeXhQ15CfP4A4HqB1ug9qGFohoI95jrG/GE+d/61nCWwMHtwekxPuDCSLV67Qr4FB9yi66+ii+M2L89gMJvQnOzEH/I+cbcxWfiYb4B89lURksxpr4EmfdLEgv+Zrh9+74lLWm+7DZeodk641IzSNRbS+V0AMGe3gN71IX7g/EyASI9I0+8Fmn5phO5um5/Sj1leR1wy+Z2V6YHDdxUBUNq/XUJtRZTxRCnaxK4G9hfrIV1mjRYh8xgnvQGzVrhdFrUqG3EPmS09BD910wh9jMTjFj9CWiEzniu/oCtlDFIl/Rxg7FmqnA7OzpYPCDMZ1vjBHVLy6UyBlm+MaBgWfPvWczjgYdUZiK9g19s+xlNgjq5gjEuSjXC/WTR74ykdQ7/14fm8sVlCMkWqZ7bDw/mmLcDi80Ab/pDt8vXMFpvt8jKbb3IK3F5gN84v6MPoz+rhYCCsvJ+5rszX8MnRUczUe+sDy6a72m401c4jFGuDiyiOL+zktxt+v8sMnNq5xroxtOdz/rbpHaJmDa5gHPL/74cYZVUti/vvx56PAamhXqUYJR1qrpPRfibl+8n4s5tuYEMaIiksjegU655C1lv7giaMEPVfDtoePbvcykt8mvd4lDvxKbHrfp/pl2+0S795+232jbF+/ewxB/ATJeU8st2hrlDDLsPYfefB0LdiSok4smOD8mLOzZrYkpvqI4wxBeamP6iZCYAYZABxEMqEKimHUocjFUvmExsUIvP+qERzwm3+ACSB5SPXwwoLB+zoCowedlzYqGCs6kn2OIc79h6yuDHszQDQR5Cv6KBc5Bg+XztAxO2ujFO5gok+kDpJ1pvcUaWO0lgznjeNd3yKxRctwD6X1I/ERPk7HWHqKX3JFOYLhVYKbeqGPHifMOn53xa/Ewvsx/DbY01wxyD213ccan1J7FCjmy11+PGI7e4d7fvBQO9uWXkiq8/zVFQLVFqn/ODbWfb93s8ow/T74d3/83M7kAUAEIAP7yvmmc5fgA5v2NkLcH59VFTIzHvSBwkByC5YLZsyM0k08pZrHcTy/Ofmz6ARIXhb53F/ymBzUSZS/PwUlt515PlrLHUel8uJs8HAlJfj4H9+MGGMkws0W7+ek4ygLSomt9CvnKBOQqjqHyLGkrUQdqzMwwnFs+Q8IOpcYH3IY8xVOALvOV4i0B8QhJ7h0LAzPW9BZrpN/V6+BfqteJ++zEPllFwdZUZB/WAWuLBb3CDP0AKwRahr1X+Di8ZDvs0uoQdCHRLgazCtARNSYQB83qARBm84/X5kvw0JursdBxJIqtk39M+5UtTw+hu2/s4M1jMPBSb7ufHnYsi2J/oZaS7gX7nArGMlnNhJfgm7J7r66nPozKOaJvA/laI5AEwTdcMG1PLukGUoijJVes/Fj5Izm27ILZDIgPLHADXiLSa2tD4LGf3hGaXQm65IJFBSHQwycYzbHeqbWtLl/jfvVa4Jqo7BCxP54cJ9Pp/KuxEfzMSNE+mGM8F8zi/bfmejMga5WivfEXsIpDD1jDFwtVhmXew508i2T2l3Z4AjFi6EMYZdvV3bnuEy7cG0QoTczhWi2O6potufX62F8YY0Fwa4aMpRT/WMrJe+hdfrTVyx3YgsEO3sm1kjyquH14s24iHDTfEVl8Pin3yuHfaUZL4wd8xxvIHTdCrjtibhsiKqOd0FKKmEBBXoJQJT8uPeIRTnY/pxsbWMHoJD8F7Wyoi2M7m2bZgUlhTgBl7j/yc4leUbWjfP7Y8X7LAOTCAhp4T/io9BByHFpMo3FpiRYC3gJRZqRXcJNoiNo9hXt8goqmMjqdYdFfXUIEl8NhfHoWZh2IzbRBXu9Mr9VFtAvNA75acyzUI05UfjYL32/G/WQKTwWtneUrOwkojYaAPE6MLSf+UB2f33j1fKQ6PdEVcHmLrLDmC3hDbqHxL0cIzRQbyerij4RacwXxHe3b06TUXA68i4oz4NrizWUsiKdwYlI5uP9ot1kHKdszKd4EUPYLATBohLZZseha8qRq46hQ16sz52zl2Ozp63SO7Ly/Sbg15irnj1fWtRI9VJ9FNtscib4Al3gGDSQKdFiYuSybxPfwEtxmPspZtmXcgvdHOIY3sqboZMfHmYlODW75y6z0hBwJ4s6OwOdugeuTefWDAo3nx+GviKMNHNqIU6hGy6qhHc7+EYVe9mHCbDyki71w0Qf6AeT6xmzeR7iDmphCs8InJ0LFzg4bjJ1T2Z6lTjJbxIrq3Jl/CUtPfQW/4vOv8t3dbiJrbiKhJ9F7j/anN3NtQHs/1f82PxIwZPQ1J5eH2zGm/sM/eqmHe+jlbX8XGIY1mp68Z5h6L1Sxf+V2IZtPaeAJ8czFvwuthaTapI5LGKDwEBd1V5ABkcd+laI7tbMcrugYrJZC7p4SXiQ9WgC8OIRWyw3B/gwpmnp7tfo8UkBlVVQiaCxT9Uq9petsSMehMoL4wXxzjIopk8guduftI0B5p9vQ+heKBghiT8DzFvZff7Ils9MH/iiF/VHE4mqMY7El4xkUjExnPGyZnFS73rziscktPqy/W59jW5VZig3imIAaxKtjiuhDmTBe8yT8vpopUPaJmJwbFHcMkzSyFd3QCZHfTvL0aASp590DYY+GziGDHSHgLf+r5vKr6rYoE/biDKeBqLPD9FNLKxnPLwWsybO4D+NBqZqqrZMN46Lm/CaOsapYZor282MGNsnsHJ1OK12N6zbIqfEeeicom3y1r7p1SCPILbTHcA7YQnz2qO7bDGib9PTZf6s3CJq6yo5dw1HxrtX/wXpAbSPpfXdE1/IGBK7hUjY335q8+uKQrY+gCfB2w7CUrzqmJ+/Al8BPV7lq6EK31K1yrYIY4NE6X1SnpjFrrVnDO9fs2Szwu8VC2AOHFqLRA8rpCJ4BvnnF3iYFUrOlX0PWr293qms3aoZSs01ZjJjBPl6TXcK9Z/yUWMByab1FzUz65bu2aR4zMwdoEud9ZBFvK+NHEk561W3gaK8ka2aqrCiTWcn9pALs4oOUUaO4+RCB102k0cuUGSaZLYqtJqbwgCfNpHR7BvkQ8iUg2fWXsN6BbeRnG59Al0kld4un0ld8cAkxw1T6c/sJAqbvhZ7lNJNG0OXMkmcVGKMf1xu9LSaSUbVnGMzgi/aC0NvG1eQbUDoSoVOK517pzYJ/LhA7+ZU8Cp4JbmNGTDDKtTJBJZV25HM8JXKkUBW/7Fv27vmVawxTabev7Ey8sBuquDD3qYVK4Rscn9Weatyeret8ZTVYittgwf23vu2kkOy8BSBFEK6LCOYNCyO47xm/4J+d+Jqv/DIylPOPmsK1L/n7xNqXcrxbm/m35WXpo4X/BeCVmRvegpaM3ZEf2aDi0xXDtXZ7zqczlGSGxMUMAcD2WYid7KeBj92etwbwwwE9dGMhZ7Dc/YHY0Kc4exGSqgKbpHtqIu2q1NqYLFzxYwYxlgTg9TbcJQlm9aCIFPO+QxS7ArC61/yhAx6cS/xzgZPJv8a95FTYKW4WdwG514bQ3JrlBbRsMkM3Swgc13VPTouFuZAif0HG+iPxpNEUSx5FLG18cSWLS18UW6wMwepf/+m4VPKiKmXHauBOY+LU5OwSSsPBw8M/M6Iy2UryGfug0y+XSNjwnN2sVGIexb+8BsUN57nkg2qWJkVeLvE/cbl3k+5hH1TcUqni6WmebbO8diUzsoFs46sxG55Zgjprn5WQWE+aIPT4taY8MNtaxB6pMT30Wt9uh4Th0fBzqNN8x3+EEQu3MMAEdqQRuFeMcIyCWf0/WGGtyK+fPeCt4OCqwgVcQL8G2thvS1+AU/jOlxsKRlMbEYJw4Zj0sQaihhnNRIf0owiczpCTmDLma0GbZ8gM3f6PUX7LN05Me+JYLV3r6V1vahX8wzAlDAnsMpq/0OiuFQ+h0qHglEYlIgC9e7GdvdFp5vMvW43xGEgEziUaM3S9d0Jk81MSEewUffsAC4eGPV/ZOSg2mPT+mXApVA2Q3U9WPSxIdV0LZMv7eUXTUSYfbznx6LlHajlGtf/IgNxv1kDV0bUXEWiBKlMyhnHvulrk+9EVvGHFIt3FVUYSFRgZ6Lo/fCBrQTfm/tOO2F1HJUVQ/Gd8uEVLwfcs6xPkHropf04Re2jTsZNlmoomgA5iX4YlKj18znOEsXMfuHqtvwbcz9gNp//MNe0CY3YtlDQvR7D7jvXAn80f82RoyduXTKRjwozqyVY17kIBNC6RnXqiZspubVWy0K7YsQFzPHotK3nlmsdmaenhARXQJWhG6l8RzX0vjFW3poArX8fZ+3RWjPBSyOWRG0Bwc0AgJjiSXngY6YsIEtR1b2w9P0o8r3IGDtuMs3Ty+wE0Nj3DmF1luMq7ZpNcJ1Zg7DF5XNrsE2TtDdpuBnn09sSH23j0CdFoImRDuYbENAcbI0aAz4qAoCy472xXt7tckFntRVCogodUt4TgmvVlyeybhCz6dd5opd2KmGKYJXOEJ6y05BEnbf9aH3HY9HIfe+iGELb0Nmv0Mi1pi8swrueVv5qxGEJTzJJnMGUtnLs5JtTQ9HufS1dR7SHpByAJl8VQZ01tR4NELoLTKXjwXRX5AZ7b/RrJXM+W7Ls2AVMBR7sMaUlE5gKMb8IfDC5z0unRwRvRFjtXPhfnAqbardezOfkf1wYqrJapqb+Biqp8VUpGj+v8dgBjFxWx6hVsxgFptlte3qZaH2uYFNy2EtXyPpfWKquLxEKOKlmq4bDEptXucKqNGi9uRLKNEpRFSfW5bBRw9AIZ7Crb7E9XKNsV3JEnJJ2MdyPpYTSJ8vGREj+dlEKG8Pg+IFSujRx83kdtlUSn0rre2bI1xDFGCZjdCX7kv/8Y+EgLXUfs4ladXbsbgWSmhUAebK/UeRx50CoO5p5OcHjq1UIE4LLmkd7HWW72NsXJ3GFvEm0GxqWmGMV8RZW82r6JRP+jfR3+p472pNh8Kuehlx2OHi5BuIeDg8EDth2ov1V/U+KP+e0N9oP6cyIxYNGmhTK6qdWdk2cbNlHEqxeXPsfN1S66+GjGsanxJmeJbbAIQRs3ssqKgln09rHnH3G4T4GCjfY1p7B8pPMifp8cxhDlRAEluhZf0H5zizPyoHP9k34XGdec1SnUveabJvkafLefcWem0KQQJMW8uTkwop0Gxdp+pG72eLxPcCDowhjKXt1rPcYhsWt8N8Zr/H3u9MtPsMMLme8AOJgbJu8/WI7iM8ggfUPio4Sg5gB5rrZZqi1dHzo4hPrUIFShKf3/28neCPspxu1LhVD2/44Neu8gRLFhd1UIJwdAte2SgjtQnY8NsjiU6rzhzTruCEbr3LQbexrFesViX5ZBv4jO2OrPumTcWxfJoX5hCSR3CHXGv9MKTm3rEoKhqUE5PY7SYG/opjmC9mf3kfPYHNuOlIFR9aZdaZ8kdOjAo/shq70BGdZdcNu7vqQZJDqSO5mMbgvYbo3gv7K30G8T9BdFyXZgxo9UeKD2gds6Xo/ymeZGUgP4ci+Tgyw4NQpyfA6K9mUZDy/CZ6myWre7bg7djvos7JNrtwaqSL7nxcA/eyNbFcD8ru06wns9H+F7dU3GwMwoyY+VywAwMGx/PPuFNz2r6NA2IwP7bw7o61kNj6r2XY/8+swMoBjz89VnAvZs3v4alUxSydDBbDhVM7gFMEq1N8198zwlet1wj8UNagtqBrLLWmKD0ra2mwU3qXj7SIv+9L3TItMFb59UM3IYM8AbE0Dz8/yZRKdPA6jP/L5x6PjiQSOwqtf7G/UWPZndCdug+xvzlhT5BJAhBtuIT0daWFubuVQuw0TjSa8Ov6grFDrbVXeoR4KIS/D8OIpfDD/yA/SAvde7z6FIxBOwKA4UY6aRrOcdPPXHluT2p+DNuuX5FLC9hwIF46KLNLJd0iZHI7E8DhlolGzRwIMv3fEgnAkCattj3Nxvu2YeXyvySWVqqxr5H9RWxccum7yp9yqU9KP4O2vYc+DRVh1jtSyOy04wv8s47vU2Qvkig6mZ54tzOUuEtUka8FeD6fFkPrz8vRYUQ7pSyVGn3O4Ce06LOefNAaLMN0ZSBvBXZg1nxjqYPctNFwB4q1f5xwOyU0SXvn9ix3m6XInPK4smsi21/tw2emVteur0aiY7BKemtQi2XvD+oto5QNgttoYKpnfcXyLSHr/vXsvvU5b57b2/X6W6icIum0Z4oMOU82t4jGSzpnsX+hzB02AicBSI8N4DdYDY48m6Fzt0Oz22b+VVm9lE94JmFLko0H7dVbZMmc9oquRRYvlQWT3R083e2M3K3PYPO6S1GDRLSiBZ5EeifpERWfbUY7j4yg+1vT7RnTyUdy2HHMILPtwowCMvtmdtlxHB2bi2PA122sRbztAWdeOmlOqA7WDYerNskIX4QwBP1tx3YRClkm9dQ2YuGk+rYPJpNFD2VU0bC4YsInXEDQXwnpegQKGMyKWF34P45sKZYmdYqUB0R5RflNaLNQXZPskoZbZ+zh+rblUYUZwlTvoB4YGii2hUpGoG9Pd8CJGHXOnitCriGu+0qUOOzhTdWueqLNRnQE2p1feHUs8RODHJSZq+lvmbNgXUh1oXjHFFm1XiOTb2lHoArfLPkmoAjVhUijVqjGjCRVopZYsCRJ+m7Z3bRXU0lsPr
*/