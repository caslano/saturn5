
#ifndef BOOST_MPL_AUX_ERASE_IMPL_HPP_INCLUDED
#define BOOST_MPL_AUX_ERASE_IMPL_HPP_INCLUDED

// Copyright Aleksey Gurtovoy 2000-2004
//
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at 
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/mpl for documentation.

// $Id$
// $Date$
// $Revision$

#include <boost/mpl/clear.hpp>
#include <boost/mpl/push_front.hpp>
#include <boost/mpl/reverse_fold.hpp>
#include <boost/mpl/iterator_range.hpp>
#include <boost/mpl/next.hpp>
#include <boost/mpl/aux_/na.hpp>

namespace boost { namespace mpl {

// default implementation; conrete sequences might override it by 
// specializing either the 'erase_impl' or the primary 'erase' template

template< typename Tag >
struct erase_impl
{
    template<
          typename Sequence
        , typename First
        , typename Last
        >
    struct apply
    {
        typedef typename if_na< Last,typename next<First>::type >::type last_;
        
        // 1st half: [begin, first)
        typedef iterator_range<
              typename begin<Sequence>::type
            , First
            > first_half_;

        // 2nd half: [last, end) ... that is, [last + 1, end)
        typedef iterator_range<
              last_
            , typename end<Sequence>::type
            > second_half_;

        typedef typename reverse_fold<
              second_half_
            , typename clear<Sequence>::type
            , push_front<_,_>
            >::type half_sequence_;

        typedef typename reverse_fold<
              first_half_
            , half_sequence_
            , push_front<_,_>
            >::type type;
    };
};

}}

#endif // BOOST_MPL_AUX_ERASE_IMPL_HPP_INCLUDED

/* erase_impl.hpp
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
*/