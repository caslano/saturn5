// Copyright 2014 Renato Tegon Forti, Antony Polukhin.
// Copyright Antony Polukhin, 2015-2022.
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt
// or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_DLL_SYSTEM_ERROR_HPP
#define BOOST_DLL_SYSTEM_ERROR_HPP

#include <boost/dll/config.hpp>
#include <boost/predef/os.h>
#include <boost/throw_exception.hpp>

#if !BOOST_OS_WINDOWS
#   include <dlfcn.h>
#endif

#ifdef BOOST_HAS_PRAGMA_ONCE
#   pragma once
#endif

namespace boost { namespace dll { namespace detail {

    inline void reset_dlerror() BOOST_NOEXCEPT {
#if !BOOST_OS_WINDOWS
        const char* const error_txt = dlerror();
        (void)error_txt;
#endif
    }

    inline void report_error(const boost::dll::fs::error_code& ec, const char* message) {
#if !BOOST_OS_WINDOWS
        const char* const error_txt = dlerror();
        if (error_txt) {
            boost::throw_exception(
                boost::dll::fs::system_error(
                    ec,
                    message + std::string(" (dlerror system message: ") + error_txt + std::string(")")
                )
            );
        }
#endif

        boost::throw_exception(
            boost::dll::fs::system_error(
                ec, message
            )
        );
    }

}}} // boost::dll::detail

#endif // BOOST_DLL_SYSTEM_ERROR_HPP


/* system_error.hpp
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
*/