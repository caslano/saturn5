// Copyright David Abrahams 2003.
// Copyright Stefan Seefeld 2016.
// Distributed under the Boost Software License, Version 1.0. (See
// accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef boost_python_converter_shared_ptr_to_python_hpp_
#define boost_python_converter_shared_ptr_to_python_hpp_

#include <boost/python/refcount.hpp>
#include <boost/python/converter/shared_ptr_deleter.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/get_pointer.hpp>

namespace boost { namespace python { namespace converter { 

template <class T>
PyObject* shared_ptr_to_python(shared_ptr<T> const& x)
{
    if (!x)
        return python::detail::none();
    else if (shared_ptr_deleter* d = boost::get_deleter<shared_ptr_deleter>(x))
        return incref( get_pointer( d->owner ) );
    else
        return converter::registered<shared_ptr<T> const&>::converters.to_python(&x);
}

#if !defined(BOOST_NO_CXX11_SMART_PTR)
template <class T>
PyObject* shared_ptr_to_python(std::shared_ptr<T> const& x)
{
  if (!x)
    return python::detail::none();
  else if (shared_ptr_deleter* d = std::get_deleter<shared_ptr_deleter>(x))
    return incref(get_pointer(d->owner));
  else
    return converter::registered<std::shared_ptr<T> const&>::converters.to_python(&x);
}
#endif

}}} // namespace boost::python::converter

#endif

/* shared_ptr_to_python.hpp
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
*/