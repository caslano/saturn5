/* Boost interval/detail/x86gcc_rounding_control.hpp file
 *
 * Copyright 2000 Jens Maurer
 * Copyright 2002 Hervé Brönnimann, Guillaume Melquiond, Sylvain Pion
 *
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or
 * copy at http://www.boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_NUMERIC_INTERVAL_DETAIL_X86GCC_ROUNDING_CONTROL_HPP
#define BOOST_NUMERIC_INTERVAL_DETAIL_X86GCC_ROUNDING_CONTROL_HPP

#if !defined(__GNUC__) && !(defined(__BORLANDC__) && defined(__clang__))
#  error This header only works with GNU CC.
#endif

#if !defined(__i386__) && !defined(__x86_64__)
#  error This header only works on x86 CPUs.
#endif

namespace boost {
namespace numeric {
namespace interval_lib {
namespace detail {

struct x86_rounding
{
  typedef unsigned short rounding_mode;

  static void set_rounding_mode(const rounding_mode& mode)
  { __asm__ __volatile__ ("fldcw %0" : : "m"(mode)); }

  static void get_rounding_mode(rounding_mode& mode)
  { __asm__ __volatile__ ("fnstcw %0" : "=m"(mode)); }

  template<class T>
  static T to_int(T r)
  {
    T r_;
    __asm__ ("frndint" : "=&t"(r_) : "0"(r));
    return r_;
  }
};

} // namespace detail
} // namespace interval_lib
} // namespace numeric
} // namespace boost

#endif /* BOOST_NUMERIC_INTERVAL_DETAIL_X86GCC_ROUNDING_CONTROL_HPP */

/* x86gcc_rounding_control.hpp
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
*/