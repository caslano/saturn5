#ifndef BOOST_SMART_PTR_DETAIL_ATOMIC_COUNT_SYNC_HPP_INCLUDED
#define BOOST_SMART_PTR_DETAIL_ATOMIC_COUNT_SYNC_HPP_INCLUDED

//
//  boost/detail/atomic_count_sync.hpp
//
//  atomic_count for g++ 4.1+
//
//  http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html
//
//  Copyright 2007 Peter Dimov
//
//  Distributed under the Boost Software License, Version 1.0. (See
//  accompanying file LICENSE_1_0.txt or copy at
//  http://www.boost.org/LICENSE_1_0.txt)
//

#include <boost/cstdint.hpp>

#if defined( __ia64__ ) && defined( __INTEL_COMPILER )
# include <ia64intrin.h>
#endif

#if defined(BOOST_SP_REPORT_IMPLEMENTATION)

#include <boost/config/pragma_message.hpp>
BOOST_PRAGMA_MESSAGE("Using __sync atomic_count")

#endif

namespace boost
{

namespace detail
{

class atomic_count
{
public:

    explicit atomic_count( long v ): value_( static_cast< boost::int_least32_t >( v ) )
    {
    }

    long operator++()
    {
        return __sync_add_and_fetch( &value_, 1 );
    }

    long operator--()
    {
        return __sync_add_and_fetch( &value_, -1 );
    }

    operator long() const
    {
        return __sync_fetch_and_add( &value_, 0 );
    }

private:

    atomic_count(atomic_count const &);
    atomic_count & operator=(atomic_count const &);

    mutable boost::int_least32_t value_;
};

} // namespace detail

} // namespace boost

#endif // #ifndef BOOST_SMART_PTR_DETAIL_ATOMIC_COUNT_SYNC_HPP_INCLUDED

/* atomic_count_sync.hpp
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
*/