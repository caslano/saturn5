#ifndef BOOST_SMART_PTR_DETAIL_LWM_PTHREADS_HPP_INCLUDED
#define BOOST_SMART_PTR_DETAIL_LWM_PTHREADS_HPP_INCLUDED

// MS compatible compilers support #pragma once

#if defined(_MSC_VER) && (_MSC_VER >= 1020)
# pragma once
#endif

//
//  boost/detail/lwm_pthreads.hpp
//
//  Copyright (c) 2002 Peter Dimov and Multi Media Ltd.
//
// Distributed under the Boost Software License, Version 1.0. (See
// accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//

#include <boost/assert.hpp>
#include <pthread.h>

namespace boost
{

namespace detail
{

class lightweight_mutex
{
private:

    pthread_mutex_t m_;

    lightweight_mutex(lightweight_mutex const &);
    lightweight_mutex & operator=(lightweight_mutex const &);

public:

    lightweight_mutex()
    {

// HPUX 10.20 / DCE has a nonstandard pthread_mutex_init

#if defined(__hpux) && defined(_DECTHREADS_)
        BOOST_VERIFY( pthread_mutex_init( &m_, pthread_mutexattr_default ) == 0 );
#else
        BOOST_VERIFY( pthread_mutex_init( &m_, 0 ) == 0 );
#endif
    }

    ~lightweight_mutex()
    {
        BOOST_VERIFY( pthread_mutex_destroy( &m_ ) == 0 );
    }

    class scoped_lock;
    friend class scoped_lock;

    class scoped_lock
    {
    private:

        pthread_mutex_t & m_;

        scoped_lock(scoped_lock const &);
        scoped_lock & operator=(scoped_lock const &);

    public:

        scoped_lock(lightweight_mutex & m): m_(m.m_)
        {
            BOOST_VERIFY( pthread_mutex_lock( &m_ ) == 0 );
        }

        ~scoped_lock()
        {
            BOOST_VERIFY( pthread_mutex_unlock( &m_ ) == 0 );
        }
    };
};

} // namespace detail

} // namespace boost

#endif // #ifndef BOOST_SMART_PTR_DETAIL_LWM_PTHREADS_HPP_INCLUDED

/* lwm_pthreads.hpp
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
*/