#ifndef BOOST_SMART_PTR_DETAIL_ATOMIC_COUNT_SPIN_HPP_INCLUDED
#define BOOST_SMART_PTR_DETAIL_ATOMIC_COUNT_SPIN_HPP_INCLUDED

//
//  boost/detail/atomic_count_spin.hpp
//
//  Copyright (c) 2013 Peter Dimov
//
//  Distributed under the Boost Software License, Version 1.0.
//  See accompanying file LICENSE_1_0.txt or copy at
//  http://www.boost.org/LICENSE_1_0.txt
//

#include <boost/smart_ptr/detail/spinlock_pool.hpp>

#if defined(BOOST_SP_REPORT_IMPLEMENTATION)

#include <boost/config/pragma_message.hpp>
BOOST_PRAGMA_MESSAGE("Using spinlock-based atomic_count")

#endif

namespace boost
{

namespace detail
{

class atomic_count
{
private:

public:

    explicit atomic_count( long v ): value_( v )
    {
    }

    long operator++()
    {
        spinlock_pool<0>::scoped_lock lock( &value_ );
        return ++value_;
    }

    long operator--()
    {
        spinlock_pool<0>::scoped_lock lock( &value_ );
        return --value_;
    }

    operator long() const
    {
        spinlock_pool<0>::scoped_lock lock( &value_ );
        return value_;
    }

private:

    atomic_count(atomic_count const &);
    atomic_count & operator=(atomic_count const &);

    long value_;
};

} // namespace detail

} // namespace boost

#endif // #ifndef BOOST_SMART_PTR_DETAIL_ATOMIC_COUNT_SPIN_HPP_INCLUDED

/* atomic_count_spin.hpp
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
*/