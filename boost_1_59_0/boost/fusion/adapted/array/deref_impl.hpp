/*=============================================================================
    Copyright (c) 2010 Christopher Schmidt

    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/

#ifndef BOOST_FUSION_ADAPTED_ARRAY_DEREF_IMPL_HPP
#define BOOST_FUSION_ADAPTED_ARRAY_DEREF_IMPL_HPP

#include <boost/fusion/support/config.hpp>
#include <boost/type_traits/add_reference.hpp>
#include <boost/type_traits/remove_extent.hpp>

namespace boost { namespace fusion { namespace extension
{
    template <typename>
    struct deref_impl;

    template <>
    struct deref_impl<po_array_iterator_tag>
    {
        template <typename It>
        struct apply
        {
            typedef typename
                add_reference<
                    typename remove_extent<typename It::seq_type>::type
                >::type
            type;

            BOOST_CONSTEXPR BOOST_FUSION_GPU_ENABLED
            static type
            call(It const& it)
            {
                return (*it.seq)[It::index::value];
            }
        };
    };
}}}

#endif

/* deref_impl.hpp
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
*/