/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   custom_terminal_spec.hpp
 * \author Andrey Semashev
 * \date   29.01.2012
 *
 * The header contains Boost.Phoenix custom terminal specialization for Boost.Log terminals.
 */

#ifndef BOOST_LOG_DETAIL_CUSTOM_TERMINAL_SPEC_HPP_INCLUDED_
#define BOOST_LOG_DETAIL_CUSTOM_TERMINAL_SPEC_HPP_INCLUDED_

#include <boost/mpl/bool.hpp>
#include <boost/phoenix/core/terminal_fwd.hpp>
#include <boost/phoenix/core/is_nullary.hpp>
#include <boost/phoenix/core/terminal.hpp> // needed for terminal-related part of the grammar
#include <boost/type_traits/remove_cv.hpp>
#include <boost/type_traits/remove_reference.hpp>
#include <boost/utility/result_of.hpp>
#include <boost/log/detail/config.hpp>
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

namespace phoenix {

template< typename T >
struct is_custom_terminal< T, typename T::_is_boost_log_terminal > :
    public mpl::true_
{
};

template< typename T >
struct custom_terminal< T, typename T::_is_boost_log_terminal >
{
    typedef custom_terminal< T, typename T::_is_boost_log_terminal > this_type;

    template< typename >
    struct result;

    template< typename ThisT, typename TermT, typename ContextT >
    struct result< ThisT(TermT, ContextT) >
    {
        typedef typename remove_cv< typename remove_reference< TermT >::type >::type term;
        typedef typename boost::result_of< const term(ContextT) >::type type;
    };

    template< typename ContextT >
    typename result< const this_type(T const&, ContextT&) >::type operator() (T const& term, ContextT& ctx) const
    {
        return term(ctx);
    }
};

} // namespace phoenix

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_DETAIL_CUSTOM_TERMINAL_SPEC_HPP_INCLUDED_

/* custom_terminal_spec.hpp
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
*/