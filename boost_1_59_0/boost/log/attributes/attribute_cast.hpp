/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   attribute_cast.hpp
 * \author Andrey Semashev
 * \date   06.08.2010
 *
 * The header contains utilities for casting between attribute factories.
 */

#ifndef BOOST_LOG_ATTRIBUTES_ATTRIBUTE_CAST_HPP_INCLUDED_
#define BOOST_LOG_ATTRIBUTES_ATTRIBUTE_CAST_HPP_INCLUDED_

#include <boost/log/detail/config.hpp>
#include <boost/log/attributes/attribute.hpp>
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace attributes {

/*!
 * The class holds a reference to the attribute factory implementation being casted
 */
class cast_source
{
private:
    attribute::impl* m_pImpl;

public:
    /*!
     * Initializing constructor. Creates a source that refers to the specified factory implementation.
     */
    explicit cast_source(attribute::impl* p) : m_pImpl(p)
    {
    }

    /*!
     * The function attempts to cast the aggregated pointer to the implementation to the specified type.
     *
     * \return The converted pointer or \c NULL, if the conversion fails.
     */
    template< typename T >
    T* as() const { return dynamic_cast< T* >(m_pImpl); }
};

} // namespace attributes

/*!
 * The function casts one attribute factory to another
 */
template< typename T >
inline T attribute_cast(attribute const& attr)
{
    return T(attributes::cast_source(attr.get_impl()));
}

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_ATTRIBUTES_ATTRIBUTE_CAST_HPP_INCLUDED_

/* attribute_cast.hpp
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
*/