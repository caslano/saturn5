/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   clock.hpp
 * \author Andrey Semashev
 * \date   01.12.2007
 *
 * The header contains wall clock attribute implementation and typedefs.
 */

#ifndef BOOST_LOG_ATTRIBUTES_CLOCK_HPP_INCLUDED_
#define BOOST_LOG_ATTRIBUTES_CLOCK_HPP_INCLUDED_

#include <boost/log/detail/config.hpp>
#include <boost/log/attributes/attribute.hpp>
#include <boost/log/attributes/attribute_value.hpp>
#include <boost/log/attributes/attribute_cast.hpp>
#include <boost/log/attributes/attribute_value_impl.hpp>
#include <boost/log/attributes/time_traits.hpp>
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace attributes {

/*!
 * \brief A class of an attribute that makes an attribute value of the current date and time
 *
 * The attribute generates current time stamp as a value. The type of the attribute value
 * is determined with time traits passed to the class template as a template parameter.
 * The time traits provided by the library use \c boost::posix_time::ptime as the time type.
 *
 * Time traits also determine the way time is acquired. There are two types of time traits
 * provided by the library: \c utc_time_traits and \c local_time_traits. The first returns UTC time,
 * the second returns local time.
 */
template< typename TimeTraitsT >
class basic_clock :
    public attribute
{
public:
    //! Generated value type
    typedef typename TimeTraitsT::time_type value_type;

protected:
    //! Attribute factory implementation
    struct BOOST_SYMBOL_VISIBLE impl :
        public attribute::impl
    {
        attribute_value get_value()
        {
            typedef attribute_value_impl< value_type > result_value;
            return attribute_value(new result_value(TimeTraitsT::get_clock()));
        }
    };

public:
    /*!
     * Default constructor
     */
    basic_clock() : attribute(new impl())
    {
    }
    /*!
     * Constructor for casting support
     */
    explicit basic_clock(cast_source const& source) : attribute(source.as< impl >())
    {
    }
};

//! Attribute that returns current UTC time
typedef basic_clock< utc_time_traits > utc_clock;
//! Attribute that returns current local time
typedef basic_clock< local_time_traits > local_clock;

} // namespace attributes

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_ATTRIBUTES_CLOCK_HPP_INCLUDED_

/* clock.hpp
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
*/