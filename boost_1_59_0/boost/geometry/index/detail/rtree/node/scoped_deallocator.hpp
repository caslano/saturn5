// Boost.Geometry Index
//
// R-tree scoped deallocator
//
// Copyright (c) 2011-2018 Adam Wulkiewicz, Lodz, Poland.
//
// This file was modified by Oracle on 2021.
// Modifications copyright (c) 2021 Oracle and/or its affiliates.
// Contributed and/or modified by Adam Wulkiewicz, on behalf of Oracle
//
// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_INDEX_DETAIL_RTREE_NODE_SCOPED_DEALLOCATOR_HPP
#define BOOST_GEOMETRY_INDEX_DETAIL_RTREE_NODE_SCOPED_DEALLOCATOR_HPP

#include <boost/container/allocator_traits.hpp>

namespace boost { namespace geometry { namespace index {

namespace detail { namespace rtree {

template <typename Alloc>
class scoped_deallocator
{
    typedef boost::container::allocator_traits<Alloc> alloc_traits;

    scoped_deallocator(scoped_deallocator const&);
    scoped_deallocator & operator=(scoped_deallocator const&);
public:
    typedef typename alloc_traits::pointer pointer;

    inline scoped_deallocator(pointer p, Alloc & a)
        : m_ptr(p), m_alloc(a)
    {}
    inline ~scoped_deallocator()
    {
        if ( m_ptr )
        {
            alloc_traits::deallocate(m_alloc, m_ptr, 1);
        }
    }
    inline void release()
    {
        m_ptr = 0;
    }
private:
    pointer m_ptr;
    Alloc & m_alloc;
};

}} // namespace detail::rtree

}}} // namespace boost::geometry::index

#endif // BOOST_GEOMETRY_INDEX_DETAIL_RTREE_NODE_SCOPED_DEALLOCATOR_HPP

/* scoped_deallocator.hpp
+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
*/