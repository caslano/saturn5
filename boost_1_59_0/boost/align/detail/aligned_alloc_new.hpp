/*
Copyright 2014-2015 Glen Joseph Fernandes
(glenjofe@gmail.com)

Distributed under the Boost Software License, Version 1.0.
(http://www.boost.org/LICENSE_1_0.txt)
*/
#ifndef BOOST_ALIGN_DETAIL_ALIGNED_ALLOC_NEW_HPP
#define BOOST_ALIGN_DETAIL_ALIGNED_ALLOC_NEW_HPP

#include <boost/align/detail/is_alignment.hpp>
#include <boost/align/align.hpp>
#include <boost/align/alignment_of.hpp>
#include <boost/assert.hpp>
#include <new>

namespace boost {
namespace alignment {

inline void*
aligned_alloc(std::size_t alignment, std::size_t size) BOOST_NOEXCEPT
{
    BOOST_ASSERT(detail::is_alignment(alignment));
    enum {
        N = alignment_of<void*>::value
    };
    if (alignment < N) {
        alignment = N;
    }
    std::size_t n = size + alignment - N;
    void* p = ::operator new(sizeof(void*) + n, std::nothrow);
    if (p) {
        void* r = static_cast<char*>(p) + sizeof(void*);
        (void)boost::alignment::align(alignment, size, r, n);
        *(static_cast<void**>(r) - 1) = p;
        p = r;
    }
    return p;
}

inline void
aligned_free(void* ptr) BOOST_NOEXCEPT
{
    if (ptr) {
        ::operator delete(*(static_cast<void**>(ptr) - 1));
    }
}

} /* alignment */
} /* boost */

#endif

/* aligned_alloc_new.hpp
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
*/