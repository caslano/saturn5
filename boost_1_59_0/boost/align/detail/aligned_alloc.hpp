/*
Copyright 2014-2015 Glen Joseph Fernandes
(glenjofe@gmail.com)

Distributed under the Boost Software License, Version 1.0.
(http://www.boost.org/LICENSE_1_0.txt)
*/
#ifndef BOOST_ALIGN_DETAIL_ALIGNED_ALLOC_HPP
#define BOOST_ALIGN_DETAIL_ALIGNED_ALLOC_HPP

#include <boost/align/detail/is_alignment.hpp>
#include <boost/align/align.hpp>
#include <boost/align/alignment_of.hpp>
#include <boost/assert.hpp>
#include <cstdlib>

namespace boost {
namespace alignment {

inline void*
aligned_alloc(std::size_t alignment, std::size_t size) BOOST_NOEXCEPT
{
    BOOST_ASSERT(detail::is_alignment(alignment));
    enum {
        N = alignment_of<void*>::value
    };
    if (alignment < N) {
        alignment = N;
    }
    std::size_t n = size + alignment - N;
    void* p = std::malloc(sizeof(void*) + n);
    if (p) {
        void* r = static_cast<char*>(p) + sizeof(void*);
        (void)boost::alignment::align(alignment, size, r, n);
        *(static_cast<void**>(r) - 1) = p;
        p = r;
    }
    return p;
}

inline void
aligned_free(void* ptr) BOOST_NOEXCEPT
{
    if (ptr) {
        std::free(*(static_cast<void**>(ptr) - 1));
    }
}

} /* alignment */
} /* boost */

#endif

/* aligned_alloc.hpp
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
*/