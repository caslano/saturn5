//
// Copyright 2010 Kenneth Riddile
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_EXTENSION_IO_TARGA_DETAIL_IS_ALLOWED_HPP
#define BOOST_GIL_EXTENSION_IO_TARGA_DETAIL_IS_ALLOWED_HPP

#include <boost/gil/extension/io/targa/tags.hpp>

#include <type_traits>

namespace boost { namespace gil { namespace detail {

template< typename View >
bool is_allowed( const image_read_info< targa_tag >& info
               , std::true_type   // is read_and_no_convert
               )
{
    targa_depth::type src_bits_per_pixel = 0;

    switch( info._bits_per_pixel )
    {
        case 24:
        case 32:
        {
            src_bits_per_pixel = info._bits_per_pixel;
            break;
        }
        default:
        {
            io_error( "Pixel size not supported." );
            break;
        }
    }

    using channel_t = typename channel_traits<typename element_type<typename View::value_type>::type>::value_type;
    targa_depth::type dst_bits_per_pixel = detail::unsigned_integral_num_bits< channel_t >::value * num_channels< View >::value;

    return ( dst_bits_per_pixel == src_bits_per_pixel );
}

template< typename View >
bool is_allowed( const image_read_info< targa_tag >& /* info */
               , std::false_type  // is read_and_convert
               )
{
    return true;
}

} // namespace detail
} // namespace gil
} // namespace boost

#endif

/* is_allowed.hpp
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
*/