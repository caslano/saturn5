//
// Copyright 2009 Christian Henning
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_EXTENSION_IO_RAW_DETAIL_IS_ALLOWED_HPP
#define BOOST_GIL_EXTENSION_IO_RAW_DETAIL_IS_ALLOWED_HPP

#include <boost/gil/extension/io/raw/tags.hpp>
#include <boost/gil/io/base.hpp>

#include <type_traits>

namespace boost { namespace gil { namespace detail {

template< typename View >
bool is_allowed( const image_read_info< raw_tag >& info
               , std::true_type   // is read_and_no_convert
               )
{
    using pixel_t = typename get_pixel_type<View>::type;
    using num_channel_t = typename num_channels<pixel_t>::value_type;
    using channel_t = typename channel_traits<typename element_type<typename View::value_type>::type>::value_type;

    constexpr num_channel_t dst_samples_per_pixel = num_channels<pixel_t>::value;
    constexpr unsigned int dst_bits_per_pixel = detail::unsigned_integral_num_bits<channel_t>::value;
    constexpr bool is_type_signed = std::is_signed<channel_t>::value;

    return (dst_samples_per_pixel == info._samples_per_pixel &&
            dst_bits_per_pixel == static_cast<unsigned int>(info._bits_per_pixel) &&
            !is_type_signed);
}

template< typename View >
bool is_allowed( const image_read_info< raw_tag >& /* info */
               , std::false_type  // is read_and_convert
               )
{
    return true;
}

} // namespace detail
} // namespace gil
} // namespace boost

#endif

/* is_allowed.hpp
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
*/