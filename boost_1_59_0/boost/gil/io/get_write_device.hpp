//
// Copyright 2012 Christian Henning
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_IO_GET_WRITE_DEVICE_HPP
#define BOOST_GIL_IO_GET_WRITE_DEVICE_HPP

#include <boost/gil/detail/mp11.hpp>
#include <boost/gil/io/device.hpp>
#include <boost/gil/io/path_spec.hpp>

#include <type_traits>

namespace boost { namespace gil {

template <typename T, typename FormatTag, class Enable = void>
struct get_write_device {};

template <typename Device, typename FormatTag>
struct get_write_device
<
    Device,
    FormatTag,
    typename std::enable_if
    <
        mp11::mp_and
        <
            detail::is_adaptable_output_device<FormatTag, Device>,
            is_format_tag<FormatTag>
        >::value
    >::type
>
{
    using type =
        typename detail::is_adaptable_output_device<FormatTag, Device>::device_type;
};

template <typename String, typename FormatTag>
struct get_write_device
<
    String,
    FormatTag,
    typename std::enable_if
    <
        mp11::mp_and
        <
            detail::is_supported_path_spec<String>,
            is_format_tag<FormatTag>
        >::value
    >::type
>
{
    using type = detail::file_stream_device<FormatTag>;
};

}} // namespace boost::gil

#endif

/* get_write_device.hpp
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
*/