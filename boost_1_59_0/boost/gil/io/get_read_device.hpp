//
// Copyright 2012 Christian Henning
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_IO_GET_READ_DEVICE_HPP
#define BOOST_GIL_IO_GET_READ_DEVICE_HPP

#include <boost/gil/detail/mp11.hpp>
#include <boost/gil/io/device.hpp>
#include <boost/gil/io/path_spec.hpp>

#include <type_traits>

namespace boost { namespace gil {

template< typename T
        , typename FormatTag
        , class Enable = void
        >
struct get_read_device
{};

template <typename Device, typename FormatTag>
struct get_read_device
<
    Device,
    FormatTag,
    typename std::enable_if
    <
        mp11::mp_and
        <
            detail::is_adaptable_input_device<FormatTag, Device>,
            is_format_tag<FormatTag>
        >::value
    >::type
>
{
    using type = typename detail::is_adaptable_input_device
        <
            FormatTag,
            Device
        >::device_type;
};

template <typename String, typename FormatTag>
struct get_read_device
<
    String,
    FormatTag,
    typename std::enable_if
    <
        mp11::mp_and
        <
            detail::is_supported_path_spec<String>,
            is_format_tag<FormatTag>
        >::value
    >::type
>
{
    using type = detail::file_stream_device<FormatTag>;
};

} // namespace gil
} // namespace boost

#endif

/* get_read_device.hpp
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
*/