//  (C) Copyright Matt Borland 2021.
//  Use, modification and distribution are subject to the
//  Boost Software License, Version 1.0. (See accompanying file
//  LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_MATH_CCMATH_ILOGB_HPP
#define BOOST_MATH_CCMATH_ILOGB_HPP

#include <cmath>
#include <type_traits>
#include <boost/math/tools/is_constant_evaluated.hpp>
#include <boost/math/ccmath/logb.hpp>
#include <boost/math/ccmath/isinf.hpp>
#include <boost/math/ccmath/isnan.hpp>
#include <boost/math/ccmath/abs.hpp>

namespace boost::math::ccmath {

// If arg is not zero, infinite, or NaN, the value returned is exactly equivalent to static_cast<int>(std::logb(arg))
template <typename Real, std::enable_if_t<!std::is_integral_v<Real>, bool> = true>
inline constexpr int ilogb(Real arg) noexcept
{
    if(BOOST_MATH_IS_CONSTANT_EVALUATED(arg))
    {
        return boost::math::ccmath::abs(arg) == Real(0) ? FP_ILOGB0 :
               boost::math::ccmath::isinf(arg) ? INT_MAX :
               boost::math::ccmath::isnan(arg) ? FP_ILOGBNAN :
               static_cast<int>(boost::math::ccmath::logb(arg));
    }
    else
    {
        using std::ilogb;
        return ilogb(arg);
    }
}

template <typename Z, std::enable_if_t<std::is_integral_v<Z>, bool> = true>
inline constexpr int ilogb(Z arg) noexcept
{
    return boost::math::ccmath::ilogb(static_cast<double>(arg));
}

inline constexpr int ilogbf(float arg) noexcept
{
    return boost::math::ccmath::ilogb(arg);
}

#ifndef BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS
inline constexpr int ilogbl(long double arg) noexcept
{
    return boost::math::ccmath::ilogb(arg);
}
#endif

} // Namespaces

#endif // BOOST_MATH_CCMATH_ILOGB_HPP

/* ilogb.hpp
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
*/