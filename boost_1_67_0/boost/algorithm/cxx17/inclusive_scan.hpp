/*
   Copyright (c) Marshall Clow 2017.

   Distributed under the Boost Software License, Version 1.0. (See accompanying
   file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
*/

/// \file  transform_reduce.hpp
/// \brief Combine the (transformed) elements of a sequence (or two) into a single value.
/// \author Marshall Clow

#ifndef BOOST_ALGORITHM_TRANSFORM_REDUCE_HPP
#define BOOST_ALGORITHM_TRANSFORM_REDUCE_HPP

#include <functional>     // for std::plus
#include <iterator>       // for std::iterator_traits

#include <boost/config.hpp>
#include <boost/range/begin.hpp>
#include <boost/range/end.hpp>
#include <boost/range/value_type.hpp>

namespace boost { namespace algorithm {

template<class InputIterator, class OutputIterator, class T, class BinaryOperation>
OutputIterator inclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result, BinaryOperation bOp, T init)
{
    for (; first != last; ++first, (void) ++result) {
        init = bOp(init, *first);
        *result = init;
        }
    return result;
}


template<class InputIterator, class OutputIterator, class BinaryOperation>
OutputIterator inclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result, BinaryOperation bOp)
{
    if (first != last) {
        typename std::iterator_traits<InputIterator>::value_type init = *first;
        *result++ = init;
        if (++first != last)
            return boost::algorithm::inclusive_scan(first, last, result, bOp, init);
        }

    return result;
}

template<class InputIterator, class OutputIterator>
OutputIterator inclusive_scan(InputIterator first, InputIterator last,
                   OutputIterator result)
{
    typedef typename std::iterator_traits<InputIterator>::value_type VT;
    return boost::algorithm::inclusive_scan(first, last, result, std::plus<VT>());
}

}} // namespace boost and algorithm

#endif // BOOST_ALGORITHM_TRANSFORM_REDUCE_HPP

/* inclusive_scan.hpp
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
*/