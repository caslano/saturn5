/*
   Copyright (c) Marshall Clow 2017.

   Distributed under the Boost Software License, Version 1.0. (See accompanying
   file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
*/

/// \file  transform_reduce.hpp
/// \brief Combine the (transformed) elements of a sequence (or two) into a single value.
/// \author Marshall Clow

#ifndef BOOST_ALGORITHM_TRANSFORM_REDUCE_HPP
#define BOOST_ALGORITHM_TRANSFORM_REDUCE_HPP

#include <functional>     // for std::plus
#include <iterator>       // for std::iterator_traits

#include <boost/config.hpp>
#include <boost/range/begin.hpp>
#include <boost/range/end.hpp>
#include <boost/range/value_type.hpp>

namespace boost { namespace algorithm {

template<class InputIterator1, class InputIterator2, class T,
         class BinaryOperation1, class BinaryOperation2>
T transform_reduce(InputIterator1 first1, InputIterator1 last1,
                   InputIterator2 first2, T init,
                 BinaryOperation1 bOp1, BinaryOperation2 bOp2)
{
    for (; first1 != last1; ++first1, (void) ++first2)
        init = bOp1(init, bOp2(*first1, *first2));
    return init;
}

template<class InputIterator, class T,
         class BinaryOperation, class UnaryOperation>
T transform_reduce(InputIterator first, InputIterator last,
                   T init, BinaryOperation bOp, UnaryOperation uOp)
{
    for (; first != last; ++first)
        init = bOp(init, uOp(*first));
    return init;
}

template<class InputIterator1, class InputIterator2, class T>
T transform_reduce(InputIterator1 first1, InputIterator1 last1,
                   InputIterator2 first2, T init)
{
    return boost::algorithm::transform_reduce(first1, last1, first2, init,
                            std::plus<T>(), std::multiplies<T>());
}

}} // namespace boost and algorithm

#endif // BOOST_ALGORITHM_TRANSFORM_REDUCE_HPP

/* transform_reduce.hpp
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
*/