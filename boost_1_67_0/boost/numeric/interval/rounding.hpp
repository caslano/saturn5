/* Boost interval/rounding.hpp template implementation file
 *
 * Copyright 2002-2003 Hervé Brönnimann, Guillaume Melquiond, Sylvain Pion
 *
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or
 * copy at http://www.boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_NUMERIC_INTERVAL_ROUNDING_HPP
#define BOOST_NUMERIC_INTERVAL_ROUNDING_HPP

namespace boost {
namespace numeric {
namespace interval_lib {

/*
 * Default rounding_control class (does nothing)
 */

template<class T>
struct rounding_control
{
  typedef int rounding_mode;
  static void get_rounding_mode(rounding_mode&) {}
  static void set_rounding_mode(rounding_mode)  {}
  static void upward()     {}
  static void downward()   {}
  static void to_nearest() {}
  static const T& to_int(const T& x)         { return x; }
  static const T& force_rounding(const T& x) { return x; }
};

/*
 * A few rounding control classes (exact/std/opp: see documentation)
 *   rounded_arith_* control the rounding of the arithmetic operators
 *   rounded_transc_* control the rounding of the transcendental functions
 */

template<class T, class Rounding = rounding_control<T> >
struct rounded_arith_exact;

template<class T, class Rounding = rounding_control<T> >
struct rounded_arith_std;

template<class T, class Rounding = rounding_control<T> >
struct rounded_arith_opp;

template<class T, class Rounding>
struct rounded_transc_dummy;

template<class T, class Rounding = rounded_arith_exact<T> > 
struct rounded_transc_exact;

template<class T, class Rounding = rounded_arith_std<T> > 
struct rounded_transc_std;

template<class T, class Rounding = rounded_arith_opp<T> > 
struct rounded_transc_opp;

/*
 * State-saving classes: allow to set and reset rounding control
 */

namespace detail {

template<class Rounding>
struct save_state_unprotected: Rounding
{
  typedef save_state_unprotected<Rounding> unprotected_rounding;
};

} // namespace detail

template<class Rounding>
struct save_state: Rounding
{
  typename Rounding::rounding_mode mode;
  save_state() {
    this->get_rounding_mode(mode);
    this->init();
  }
  ~save_state() { this->set_rounding_mode(mode); }
  typedef detail::save_state_unprotected<Rounding> unprotected_rounding;
};
  
template<class Rounding>
struct save_state_nothing: Rounding
{
  typedef save_state_nothing<Rounding> unprotected_rounding;
};
  
template<class T>
struct rounded_math: save_state_nothing<rounded_arith_exact<T> >
{};

} // namespace interval_lib
} // namespace numeric
} // namespace boost

#endif // BOOST_NUMERIC_INTERVAL_ROUNDING_HPP

/* rounding.hpp
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
*/