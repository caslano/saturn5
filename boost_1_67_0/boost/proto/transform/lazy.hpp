///////////////////////////////////////////////////////////////////////////////
/// \file lazy.hpp
/// Contains definition of the lazy<> transform.
//
//  Copyright 2008 Eric Niebler. Distributed under the Boost
//  Software License, Version 1.0. (See accompanying file
//  LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_PROTO_TRANSFORM_LAZY_HPP_EAN_12_02_2007
#define BOOST_PROTO_TRANSFORM_LAZY_HPP_EAN_12_02_2007

#include <boost/preprocessor/iteration/iterate.hpp>
#include <boost/preprocessor/repetition/enum_params.hpp>
#include <boost/preprocessor/repetition/enum_trailing_params.hpp>
#include <boost/proto/proto_fwd.hpp>
#include <boost/proto/transform/make.hpp>
#include <boost/proto/transform/call.hpp>
#include <boost/proto/transform/impl.hpp>
#include <boost/proto/transform/detail/pack.hpp>

namespace boost { namespace proto
{
    /// \brief A PrimitiveTransform that uses <tt>make\<\></tt> to build
    /// a CallableTransform, and then uses <tt>call\<\></tt> to apply it.
    ///
    /// <tt>lazy\<\></tt> is useful as a higher-order transform, when the
    /// transform to be applied depends on the current state of the
    /// transformation. The invocation of the <tt>make\<\></tt> transform
    /// evaluates any nested transforms, and the resulting type is treated
    /// as a CallableTransform, which is evaluated with <tt>call\<\></tt>.
    template<typename Object>
    struct lazy : transform<lazy<Object> >
    {
        template<typename Expr, typename State, typename Data>
        struct impl
          : call<
                typename make<Object>::template impl<Expr, State, Data>::result_type
            >::template impl<Expr, State, Data>
        {};
    };

    /// INTERNAL ONLY
    template<typename Fun>
    struct lazy<detail::msvc_fun_workaround<Fun> >
      : lazy<Fun>
    {};

    #include <boost/proto/transform/detail/lazy.hpp>

    /// INTERNAL ONLY
    ///
    template<typename Object>
    struct is_callable<lazy<Object> >
      : mpl::true_
    {};

}}

#endif

/* lazy.hpp
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
*/