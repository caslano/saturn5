// Copyright (C) Vladimir Prus 2003.
// Distributed under the Boost Software License, Version 1.0. (See
// accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/graph/vector_property_map.html for
// documentation.
//

#ifndef BOOST_PROPERTY_MAP_PARALLEL_VECTOR_PROPERTY_MAP_HPP_VP_2003_03_04
#define BOOST_PROPERTY_MAP_PARALLEL_VECTOR_PROPERTY_MAP_HPP_VP_2003_03_04

#include <boost/property_map/property_map.hpp>
#include <boost/shared_ptr.hpp>
#include <vector>
#include <boost/property_map/parallel/distributed_property_map.hpp>
#include <boost/property_map/parallel/local_property_map.hpp>

namespace boost {

/** Distributed vector property map.
 *
 * This specialization of @ref vector_property_map builds a
 * distributed vector property map given the local index maps
 * generated by distributed graph types that automatically have index
 * properties. 
 *
 * This specialization is useful when creating external distributed
 * property maps via the same syntax used to create external
 * sequential property maps.
 */
template<typename T, typename ProcessGroup, typename GlobalMap, 
         typename StorageMap>
class vector_property_map<T, 
                          local_property_map<ProcessGroup, GlobalMap,
                                             StorageMap> >
  : public parallel::distributed_property_map<
             ProcessGroup, GlobalMap, vector_property_map<T, StorageMap> >
{
  typedef vector_property_map<T, StorageMap> local_iterator_map;

  typedef parallel::distributed_property_map<ProcessGroup, GlobalMap, 
                                             local_iterator_map> inherited;

  typedef local_property_map<ProcessGroup, GlobalMap, StorageMap> index_map_type;

public:
  vector_property_map(const index_map_type& index = index_map_type())
    : inherited(index.process_group(), index.global(),
                local_iterator_map(index.base())) { }

  vector_property_map(unsigned inital_size, 
                      const index_map_type& index = index_map_type())
    : inherited(index.process_group(),  index.global(),
                local_iterator_map(inital_size, index.base())) { }
};

/** Distributed vector property map.
 *
 * This specialization of @ref vector_property_map builds a
 * distributed vector property map given the local index maps
 * generated by distributed graph types that automatically have index
 * properties. 
 *
 * This specialization is useful when creating external distributed
 * property maps via the same syntax used to create external
 * sequential property maps.
 */
template<typename T, typename ProcessGroup, typename GlobalMap, 
         typename StorageMap>
class vector_property_map<
        T, 
        parallel::distributed_property_map<
          ProcessGroup,
          GlobalMap,
          StorageMap
        >
      > 
  : public parallel::distributed_property_map<
             ProcessGroup, GlobalMap, vector_property_map<T, StorageMap> >
{
  typedef vector_property_map<T, StorageMap> local_iterator_map;

  typedef parallel::distributed_property_map<ProcessGroup, GlobalMap, 
                                             local_iterator_map> inherited;

  typedef parallel::distributed_property_map<ProcessGroup, GlobalMap, 
                                             StorageMap>
    index_map_type;

public:
  vector_property_map(const index_map_type& index = index_map_type())
    : inherited(index.process_group(), index.global(),
                local_iterator_map(index.base())) { }

  vector_property_map(unsigned inital_size, 
                      const index_map_type& index = index_map_type())
    : inherited(index.process_group(), index.global(),
                local_iterator_map(inital_size, index.base())) { }
};

}

#endif // BOOST_PROPERTY_MAP_PARALLEL_VECTOR_PROPERTY_MAP_HPP_VP_2003_03_04

/* vector_property_map.hpp
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
*/