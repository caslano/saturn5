// Copyright (c) 2106 Klemens D. Morgenstern
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_PROCESS_WINDOWS_IS_RUNNING_HPP
#define BOOST_PROCESS_WINDOWS_IS_RUNNING_HPP

#include <boost/process/detail/config.hpp>
#include <system_error>
#include <cstdlib>
#include <boost/winapi/process.hpp>

namespace boost { namespace process { namespace detail { namespace windows {

constexpr static ::boost::winapi::DWORD_ still_active = 259;


struct child_handle;

inline bool is_running(const child_handle &p, int & exit_code, std::error_code &ec) noexcept
{
    ::boost::winapi::DWORD_ code;
    //single value, not needed in the winapi.
    if (!::boost::winapi::GetExitCodeProcess(p.process_handle(), &code))
        ec = ::boost::process::detail::get_last_error();
    else
        ec.clear();

    if (code == still_active)
        return true;
    else
    {
        exit_code = code;
        return false;
    }
}

inline bool is_running(const child_handle &p, int & exit_code)
{
    std::error_code ec;
    bool b = is_running(p, exit_code, ec);
    boost::process::detail::throw_error(ec, "GetExitCodeProcess() failed in is_running");
    return b;
}

inline bool is_running(int code)
{
    return code == still_active;
}

inline int eval_exit_status(int in ) {return in;}

}}}}

#endif

/* is_running.hpp
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
*/