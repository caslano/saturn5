//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_ALGORITHM_PARTITION_HPP
#define BOOST_COMPUTE_ALGORITHM_PARTITION_HPP

#include <boost/static_assert.hpp>

#include <boost/compute/system.hpp>
#include <boost/compute/command_queue.hpp>
#include <boost/compute/algorithm/stable_partition.hpp>
#include <boost/compute/type_traits/is_device_iterator.hpp>

namespace boost {
namespace compute {

///
/// Partitions the elements in the range [\p first, \p last) according to
/// \p predicate. Order of the elements need not be preserved.
///
/// Space complexity: \Omega(3n)
///
/// \see is_partitioned() and stable_partition()
///
template<class Iterator, class UnaryPredicate>
inline Iterator partition(Iterator first,
                          Iterator last,
                          UnaryPredicate predicate,
                          command_queue &queue = system::default_queue())
{
    BOOST_STATIC_ASSERT(is_device_iterator<Iterator>::value);
    return stable_partition(first, last, predicate, queue);
}

} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_ALGORITHM_PARTITION_HPP

/* partition.hpp
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
*/