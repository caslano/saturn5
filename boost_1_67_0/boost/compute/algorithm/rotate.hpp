//---------------------------------------------------------------------------//
// Copyright (c) 2014 Roshan <thisisroshansmail@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_ALGORITHM_ROTATE_HPP
#define BOOST_COMPUTE_ALGORITHM_ROTATE_HPP

#include <boost/compute/system.hpp>
#include <boost/compute/algorithm/copy.hpp>
#include <boost/compute/container/vector.hpp>

namespace boost {
namespace compute {

/// Performs left rotation such that element at \p n_first comes to the
/// beginning.
///
/// Space complexity: \Omega(distance(\p first, \p last))
///
/// \see rotate_copy()
template<class InputIterator>
inline void rotate(InputIterator first,
                   InputIterator n_first,
                   InputIterator last,
                   command_queue &queue = system::default_queue())
{
    //Handle trivial cases
    if (n_first==first || n_first==last)
    {
        return;
    }

    //Handle others
    typedef typename std::iterator_traits<InputIterator>::value_type T;

    size_t count = detail::iterator_range_size(first, n_first);
    size_t count2 = detail::iterator_range_size(first, last);

    const context &context = queue.get_context();
    vector<T> temp(count2, context);
    ::boost::compute::copy(first, last, temp.begin(), queue);

    ::boost::compute::copy(temp.begin()+count, temp.end(), first, queue);
    ::boost::compute::copy(temp.begin(), temp.begin()+count, last-count, queue);
}

} //end compute namespace
} //end boost namespace

#endif // BOOST_COMPUTE_ALGORITHM_ROTATE_HPP

/* rotate.hpp
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
*/