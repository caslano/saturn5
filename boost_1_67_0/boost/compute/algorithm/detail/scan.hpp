//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_ALGORITHM_DETAIL_SCAN_HPP
#define BOOST_COMPUTE_ALGORITHM_DETAIL_SCAN_HPP

#include <boost/compute/device.hpp>
#include <boost/compute/algorithm/detail/scan_on_cpu.hpp>
#include <boost/compute/algorithm/detail/scan_on_gpu.hpp>

namespace boost {
namespace compute {
namespace detail {

template<class InputIterator, class OutputIterator, class T, class BinaryOperator>
inline OutputIterator scan(InputIterator first,
                           InputIterator last,
                           OutputIterator result,
                           bool exclusive,
                           T init,
                           BinaryOperator op,
                           command_queue &queue)
{
    const device &device = queue.get_device();

    if(device.type() & device::cpu){
        return scan_on_cpu(first, last, result, exclusive, init, op, queue);
    }
    else {
        return scan_on_gpu(first, last, result, exclusive, init, op, queue);
    }
}

} // end detail namespace
} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_ALGORITHM_DETAIL_SCAN_HPP

/* scan.hpp
tNiqPdOTjT4N9axRGNmfrepU63T2E8iYciVyU+OL3BqmUheJHTC1SePq+sUZV/Y0lIrNaKr12sbllW6KufiZHR1vsbQsFcs5y6OCDDJYq4QJXkD/IVZWaFOHpvUqM0soa+rcYLBVt5bC8fkbziM/XVpYybVNVze5g1pdThbu15zYh1l6LWPLapTd85S2chxfj4r9JVb2dm6UNXv7JZfKdWWzVK8D8lLvmFffQKzbNVyuWzNu0feN7wDY3nsbux7b/yCgJWKslaL+ytvF6HtJy0V2FblChWmZ103ZuKsJ11Sd6V4ZfQsbIuTwRvP5I5oZAriwPCNhiR+9xMCzfrLXf9/AnqDX83oh/QE4+3xzg8mA+5YbDxAC840ty8Z/YfdIijtFWZzaIXpKJbAOtIUvd4oqhUmaNzTNez2bdEIuzmVJ/NMmcUfJEskl8WrjWb1vlvjPwOH8juyRBNH3bjjL5dMqipQIFy2hrKVB0wM5JVSbZMkWyTMRIo8Dwn4xYZvoCjIKJ4VIElF2vzs8co42kUumEH7MQM8VubYLWuSYMqp7j6bpXvZ/mpohZAll2jXsC2pOXs9GQc2Cu8VZeT0JRJ7OskTyGevBVdMmWcXEHaKPev9587iqGOGREHuM5rnG/dgtaMuMFLJ1RJsg0yZ54N+qmZv6hDHJEhsvGw8qZO9BSySPNJF6Kdo4o0V0x/8fWvVc0JziTcmxD7yTxKMrUjtElcdoi+QqiZj+p+RCm7BsiLSCsYEDwwCFHvXHz4qofwL5f7ujhnVhXVRWWvgytqdlmJImSEAkJEa54wGJ4uNNIEBSVuLxYaUIyO6j+VFDTYxOOT8Y+SG0fHm00p4NfRFbRG+sldGJ3rHXmtBQ/xRSJVSZYqtKX8oEbPFrNlPOrrTrtIa6m974znY7kjDDQZZpwuxnOd33nGd5vfN63jqa2l4FpywTaTj8TPdnHBWlHS5BBZ4sBViatBAX5xF4kx6CIj1A1Unqg0GEjjEUNEoTpCgy9H4L/6Hv/CoZEcq1seQ7nEyTVRaTB7Ig3UcqjkcXxv/LlSQonQqQkLMWFYMUyRoW7ek+f1s5REX2stpnGVsJEm3vhKHoPolpq0AiJV0UCDEBXGBQjCYqkhIBQo0ML4OhmFbzJfOKkrusMoMWgU8g9qrVCKEhQ1QbXIHyxdAKYaRFR6mR56Oj2imFH5GGmSeEheH/4XRtOHhwN61T1JES+cGnp6tAMtemFsIKD7CRsJsoeOmaQgzZgU9hsPWJRPxn+MwCy0HIQGPb6nAWkSmgM4+00AriLI4fipaElpwXbwiytWuwYsRnjVNvbXUuYHQc9mOURFJBgKimhAg3GlDf54W40C8ll0pD1q74xozXelNRQnPd/cjE5vFrxfnRDkVK1AErWnTA75QFnQlr00xO6UB6wauKKXQXOGRxnhbB1xCnVXDIl0s5HzGzZJHe7AeqkL2GbzK5sA9V6oL/ian8+/vQkix+a7EEhoZlsTOQT8LzOfkCg42IjcHnYCOA+yXMftwvkpfkp1Sn9SC58rPnPO21jzc7z++V0ELfnfbWdgSgzMb6rSHFoNHB7ew3FOr+FzS3tUVYioL3U2Fise5E5Ydqxpnx9R7pFxTVxlszF0V9QKxj7hsVUw0raVSuJimipEzt5Panlj8wCU/JvFcwFdswT/aUVU33gwEN74Jj6G3HNbrxlOKe3ngXeNSIXn8ahnPXkPP294/y5ulvesLnW53SlyOJ5SbbKaDE51fuB8zcWfKk4u0kjd9Hbz40CqVdv/yjDnxdAh789oee6VzHYz/pDOM1TY1sV4Jo8+L4mUJM5DKOjLOZsnRjMDmYw7385OCVAvHCu3MxEIWUqAQ4Mvrk+f0+V6H57JuQzs6uI4vyfhvV4x7DDVQizHnz1tSFfT/+lLer8NgLQ8FwFbJUgHpxqsI7Py2Pg0nIi1OKxKbUEo/COwGjORJzHfOmtplQCoXO5c58FX7zPdP3or99Z2XznsGWDZj6IwhPd57Uq77Oh1iWImDJYs3RTR0BZJkZ0KhVvGDZoRhd9btClOA0bK2Nwyl2d05ov30XGWff+jKKeyP1b33yjfAruJGUioGgA4qei+xVO/0sO8oPyxTnH2DLHtdkWW5bZEK9YX6oqIC+YW0ziVN33LK/aM853/ceyDgLSn9IsewhGNFWMaUUiKwWEK9ca20zuMtQQKNOISUxot2iSogaGJ9BxPjufCQS7e+S/QTLGVICEIioCzlwobeVqBg2eBuSkhRo+ILzMCHv9bCSGKVYiE0ROmaMx6L56JXzoYHuuUInkygRBLtnhAQsdp3GsHJpoQudylC++VEY8bNcuu0yN2i+JiGwClE1STDqxnqAhO5qJFIEUKYN8GBbU0UUUHhYKHECBLUlk0MBBsKEYg1FgqiM1T9AS/vWf6QCYKwL5I3lahSrLSIakP3F53kSYH2Pf2Qz1n+pcn6kGFx27kAyw2Kyx+pCZowEsh7hG2JYSAczLT0geef9D9rHsX1H3kZdGJ+/tioZSb93hY0/gXdRUtMV0KLvZq7Tp55CvvFU2K98VFTuuy/t5de9z/wVia94xY5/S0QZdHaB68yAcj014hlsSAuRS5HRYoiacw5Fhu7UgNPYNIBWKACdWWInr6HWwkTV2fnqMJYYLRTdihE/tEDn84kB06Bw2+B/jlzo6JkfYCJgfWoiLMUg4sgo7IaQRhiK44qx0U7suSByJnmjD3YXcjKPkhAMgO7KySUxo+zvmvFUl//AQr4S9IrttZuTBOksXWTy51kIkPKOzpQ8FPr9/ntZmZIKIlX6RI3yzURHSSSNSqpq0eFeVaiYTzJLvVWosDuOAgTzIQ1ILIaksRSQU8Vbk5+0Y6IlTQ/EQiZqwAGmEQC+ygD9vwJAQ3m9JG4vVa/QQKQXXyCABno2oNOxrv2/jHxNCOGoIEOXZla9ztrsUUfSZaf9ucu896SAGD+6xLrs7+tUaGOOpCzODqEWosMZSIYleiYujEtAOH0xo+fgjijGTEothcqb02JxFjx3dxU8jCohJCSFkw9w/Rj0+x33w70kyWIJ7rw67+szRk2gJ/Uf9B8NcvfIUehPhfx7o0qbd5/X3nuU7mpUpLTa70qdlVoUB/qrSAHmgQBe2JUym1JAw50nZ8iuVov2+sdIxVIaUf00jK965V8R7A1My/WXENblOwODV3u+aaq9LuB1d38G2b/a74d/ib9Rib0fVfhTvEA5vTiov4lNYM2RJwb5Yl+4ZXUqfrOcGHYVySD6+XoY6/QwvjFHWWiUJx9j++B1i/Ohed/nLFRAMjn1IB82icK22QWEfhBtL0sUuoDasDA+wyfA/mrCRXdPjI/iHO9zfYjIwHhiQpl6DI0naT5A704IXmRQ5uk5p38diRe3NjZmx3JEr9NWvaaDsFh0WlOkuH3kkYDXoFy5jlXHAF1Y4t1hXdSpUEuSfyKssb1Cwknr7v02IVdUfNnElDrKwhQkH+QkvjcQDhlCawYHbIL2L6AxQwX/YrvQa31j43EN3smyYyeqEsbKrK1IbuaAhjWqDlmAqcbo4RUh0aL1TOZJK5TIrd8xUrKqeqdynfzJikYDxrsXIpFu5hzdXhU9x8vz2EadJfNBizraYyhW/3IE6kc5xcPNKbHVOjE+xoeQeZnkSKYPM5opHEtCQBzUJxfL4G19Hs5upWjsPCyqNKpLty7KywefhZ38YUzs0mjCcKBTUlTdFU72k9zDJ3PERZsU3qoBC12NugDow+7QlgeEwQwcJgh2Sm/13RFLFoa8jeDrhLJ2PUO0UqJ5pGrYajxkmrkewsRFq2jhechGyWILBl0n5iJ7g72ERYL/u7ub35VNZsd8iZ4skOemNd/6/5OA0XdT8PC3gotU46TWR61RoAUH4JO18TsvcC//mJcfxRdSd4tVOFnQFhM5KWh+A6G9SsOPkATShe2f7ycXcTkOpj/naoSHCZdR6hk30FQ4eS+hTRYy7FFY2PvSS4rafoHSZLnd46UGii4gGx8oWHuNEBv6NwcBwoapKXTHL7p/Lo+HmHAk4AC83upaZ8F7X7YDlKLhrki9zZ8AoK/uwt/LgcgR9z4cU7dOQIf9ESifP/i2GqG2BiVgMzIw36dDjHXj6V5z7agHXKTO1G4AW6AJEMBJR85wv4AFRK/vQYqrYtepgKMCp/+5s448Mi9x27Lsc34JCwIFD9W/uAVC+qAG8BuOJmnnbUcMdMi1ootpLPvvdcOuIHUno21x5s22J+VS6TJ2J/ln+OYQK8fRkudQNvC+Nao1Ss7bj4S2eWdrxI1JxZ9clY3fs6zcJQ9hJp4bkWXPjR7wQgxyoAIQqf7XDx0RAxfvDn7z8Z5Y5eJ3hbhwUatJXaHuiY/UTDx7KVRszyMw/FTGOwnzR+uBR0fDxNepAKXZrI5B4J1YFEwkAAsBYN8ApP8B4vjCEcMvOO+8BjxZQkSgGzvwKWgtsCso9tPAKibXDCUd4PksaG3Z15M5yhh5iVVYkj1cO5xd5N68HILq09dlqbOsj3thjRTMT5tS3UIX9QIbQba/PBAA+3wScsuP03GG7a4yAmu9GEhaJEUBhCRkZbQi0S+aPRGAEy+FgW9r2J6AYNNdZ/qQB1LpK96whciDI0QMfle4rKZcXVrANQuvQ7fwh98gDVhqY99G7/OZzeMEqXegTuU1tZNaeJE1EOVVtk9T5+x3yMyz8mufrDPutHreb6aSRf8a2eKnTHYZCg8waCElpfCjUcoqedHfPfZR3p1rRL6c7YUGeWzkHOoU3xUTHcKJVBptwjCVPvosKQSTcYHcCkqroNFWrzR7qGbDxxDyj9aJIUcc6o6czhqEAA+hH6ZwBQJNgQiecpKJCAAJHdLBM2xt4LLEWZkuwdhGDKVqOVtaxybW2u5bW3XZ5znIakGneycgkBbRxmuQGsKnNX6EE0c9uk7GIMH5hibw8hHaw5wDK5s3DECS30M2ZI4NCIm0DnV+iBPFhfx5aSwbFoM8mqoAQgJCnaisch6M3McMwqDEKM3xAUsfWBgFK5cvDe0rV/+MgIHyk5wW9r3yKwN1aXqIEzmqy5WWO+2h9PFTrQ3EO5LLF/d3104/6i8ofV/GY+qw3Fvv/Ormxd0Gwk4vNV/5dknRgObvksRNtNvMnHBTdTclpQw/ni/co2XjASpJ45cKuat5cw12p2APh/2zyEtHS6u7fF1bR40xUM79FTzY8wV1NHY0cZUbU/sompah4XvaJNWOwo3WgCZjhjEZte7i7uoS8j3o2/P59eXZ+JQM4gSCkvGxTnHWNKQt2RnlYManlbhblqk0eVAJA8Rw0r45+0bCzhyhVMoQ7Vre7QTzX0UkkcMFyZCqaIJWmo+x9r7NVA7Fp3WND16932IjQaSVLlNeHvOpZo4C4nfhSJIvx2H8toR7t73MyVegdXRJNeQz6E9uRbTpcD2l/aFEEFkqq+4Orm6Pr5kz0ve9wgyTYEUMhGEq9ncEYUeeCh22hy3Wneg+2fjZ9RtHYoarKjrqPdgHFEs6Ff3by/OLe921VQFErxvo4ZLrq3C//EoqEC3jbdhY4uC+eIJVJuYkQXLYmFFpIU1UAX8vX9+YnSEROjQ581AmhVj+hs0IomkZ0L/n0tdabHWX2ocXvb6BNWO2MqF845WM0dmoepXdn9rfXDR/ey8s56eKptre3sq+uroq5ZnmBm+ihUA4Xeek9++5aM9BJkoEk45X18ePG0Xna58j0wxF1rRnlxf3t06zpwsTKyOgdZkZKXOyURuMPfqAARjdpiRkvXJ2ZWccHY0mGRhX8EAF609L1apWmHIFutuLSwXlnABZ604CG4K+uAyh367t+nYzktuszIwR7Ppmst5tCv4gLlcobBxjuExC2m9jM7bkSM/g9rjaSJRes6lDMRudXczzfj60tU8v4Jw1QzxIui6HLQVc5Y1ciKYAGuj7ulfL+/+HkXuMESVoEwU8tueMbdu27TO2bdu2bdu2bdv2zBnf+Xb/3JvcZDfpp1KpdL15q7vSqUp3WgUsJWtGNma8L4EDWyyYeyr6faOqZNbP2aDG2vKx9am9y2QnvaAtOx+1e5jFi1zmmldHiMTCBFf8sKlCzxceUaXxIX9ItNric9v7umIQVETDSezU/Y6lmXROqB12GSZ52zdB3ZJLE6sDKDurDKunlKBUPtybVOnfPzu4pSf1u2FpAVsVT0D5woqj3uh0k900TJxm+MK1jacra1YuKdbhcTNiRV43bDgTmna/H5TUlFV5F1g5UbDFR0wBCENw08GMMLLtcSNMjDARYJlrjARYuW1aHqIKcUsz1wu13ArtkMU5gmGdLI54L2n1EGE2Z6W/yQz9m+mkrOMmJgkwCuEyJRFDpIvkt9jfpceqbxmttNlT1ZWUe7fSttqs6ZpqdP581yupsvosBysy3jxaoG+kpZ+Wu59Wsu+rPW/qGS/s4zk9PLhzi/C+h9x1ID89KLh/NWB9d5Hgh6Tf2CaBGRK/px/8eK/vmSTSkYzYErAkUgxFTkXLutfSwLk2KSYKmYwu1QOuFp9zhoMcYuFe44kCWk4XeiGBR02xw4tQ3dHcCDJWC7BGqJn+Mu5e8qxwm2jA8Ok1nzApUXwqsi6DmvZEAmaPJkym6JFCieuGlyMuly2F3dyXI5piHhWTRVeibfloFRiLFb0XR+7LVdaSh5ePMvsex/HYp0zlQOw/94iC/w61yoXf/0k3vHATwhCfMsUgnHc8hVuaM0+O/Fs0bfF5DervBMq1P++PDsc9ykHqYATww6sdDfTKoG+2kQhp3XADnNgVy/fO5RvmyN+9ramJuzq60baRVQ8cDOlzXBN1XJh/9OJaTmdCNGEEI11UQGIRphv7YY07aGdJLzhB3yeTNDsq84j3+HA7BQkD4k57XQ3Z8aDQsC1GWfyuPTOqrxesrom7q+4+wtM5025yC/slGphOsd6skRkH04iO2nnNy7vt1Abr/uH5WhXBmn/a61UrT+gVHU/tHpONx2+dffCE9ULTTs4dMcj0bAQ1q/RoOyeYwYFZH9RpA9jXcyhCic6dbqWArJNyCW60wubcjg84Bok8Mhf9QOZzogbjlX1YKK4/PTBEYtnoevWnsl7gMRTns16SUbXn6WXHM94QYOUOxWFuh9qbC4bGMiIsw5MXyXmyNQvYN7AURmkejHzUEf/5ctcMxp8bEb1puq9WdrAKNCD2UMuLsMH1JWJGEKcmC4XlL60SjUdK0q/JK78uTwmagHKJSrWZyVIZGeRVfHmVSZfbwINoRs6a1qyXb0WoHL50E8wByaW9kqZn4osgmOdOKhryESGyGOIeLq+QntOPZYAj7isAEUZSR7aZFN9nHo12Q8I0lVKVcZ42MtuIC5Ta247pWhqnRlIJG30x2Ucmu21ObKY0Jae0pKT+6+JV84+G3zUukspEvIVopf438Wg0JYZBrDjI1DPY1b+Kym0od7IfVs25tnyZiiXU/xGPhr/YHsdb3htDnCoIMmw2Do84eOcejayjop0lCf6j+DYqIVrRhBeZ1t91fZs2rHY+GrfQSm/ggpsskdS9vENpm5zRA7BFcHLxnbNTgyu3AVTiJ7yGq+AYkUfoaF2b20DIMtDRP/VXhJ1+rdsMFjVZYE0VuNcrxkFgmob1jkcG8Y7HwYPhWEdVmumUg9QlS2F2DSojsXFfSLeXe6TftEiLmhvL32xWSzoTI7xWn/qngdglXIBctqBx2VF2n5t6JcXCVrYggviEMjgJ9DEaln5WuLAXVMm1RhsQrQnUg7PCO5vmG9/9ReZ0oTHXK4b7Y2J9djvBgXZ2gdTdDiCcfO8OIJa55zkQGJnJ0Hfm3x4/Ef1bIHC0smPGTFbi6Sf5wOSCE20mfuqFWmV71HG2kfpkoEBP3Vz5Jqx7lQZr5jRM9npM0ZkTB64UknnNi7YCJKcQocDpAOH4hAp+jTePF8Sw8pDI6wNub2358Gh10QEnX5BLzmzzv9Xh4mFoUrdzFP+VHhef4gzLgRw2kDdxAbklRVEBYckidXZTA2b/DCaOEbrcKS1jryorgQIJELpmtxWN/M1pElUVNbW4ykbLjgOWMUmDGFi9+IFvCVq1zgEd7MTv1a0/L60MKSq3t+0zuxrI/Hi0LloybELRcyoE/lE0wf18OZJMnfiiszUrLecnx89UzQI0Rd1aZezdw320uxhKV42Xf60YUZOxu7TEJqezMU3xLyXlHBr9XzcT8/NcFDXBfPX+cFHDz39bNvq5VDP/e99gcGBJgHxvJKhZtYFBu5Dwzrwki1Rw9aJKuNIeQgwCDcZ/ylONqFg1RlEfcIMq3qjKINtxzEk+fgp4053Gc8JLjc/uaHDfTVt/AyjH0dEPq4hZMpvtHs2AKrmpSYyzpZgIvq0vUeAAC9V1GEzLsIl8ONe0mjoGHX993nrfw5VvvHJbQzoee/17NaZuQZozKOz+xZPilNIEEm3T4L4ME9pfelvPwYz1d3oq7P7W0wqjXrXewvWC1tfJ7RH8b0eTk7v58g4E9tyZGACuFClGlxGsktKtg2002pS7JmmcjnIDe4mAuoq6DEaH6VjagxFeOHuX1vvgj/E/vtzpcvWoVQ5MfbANoGynM6NJA40bIZtDdAeClD+ep+NaYXr1GXY40vushX/BbyisRjpQlXGDSP2xlHlS782w0Lammw172nDW9Uw1ML2q8SG5zdelKYphwBReqEZcdLXQ7acAAiz904Um2euTaFfQpbN5UGLaZzQVFptq6ls8nA1lrA87mqlWVGp1nO8jRt6dlyfVVFZrqNcQ2yeYk9VZLd2j98vinHLeKhwx7WQqRsxBF9eW64wcSoXcU1R39oBlIK6AN51SFk6gX94ZABtsJmezBh5W7r9gUwbKSw6ZD9VOj/ryloQDLaqsNRq77GFjKMn6y4bw6f0wi2hKc3i5RU1aLCaN4SdN03InS6zPLo8cN3b3bf90i1G+RperM7kJmUwtcA6mRSlOKmIkCwKgTmEN4KpZu19Fh7WtR3GndNcEn4TckMNSONvwRm3gcFnwbjQ/NxeYDVdIQfGeDqKO170pB1irqOJaahZ7oytQorZJ2aI7zjLUq7No6fIHjuxWXGsscOZbJZiNpKNH9CjacgztBX8X2uekjn73dltGRl+SDzauNr5q13a3rL68V13LHAy9jHRa1q4WN9V3z4jEdTw=
*/