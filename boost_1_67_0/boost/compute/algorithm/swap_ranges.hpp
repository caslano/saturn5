//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_ALGORITHM_SWAP_RANGES_HPP
#define BOOST_COMPUTE_ALGORITHM_SWAP_RANGES_HPP

#include <boost/static_assert.hpp>

#include <boost/compute/system.hpp>
#include <boost/compute/command_queue.hpp>
#include <boost/compute/algorithm/copy.hpp>
#include <boost/compute/container/vector.hpp>
#include <boost/compute/type_traits/is_device_iterator.hpp>

namespace boost {
namespace compute {

/// Swaps the elements in the range [\p first1, \p last1) with the
/// elements in the range beginning at \p first2.
///
/// Space complexity: \Omega(distance(\p first1, \p last1))
template<class Iterator1, class Iterator2>
inline Iterator2 swap_ranges(Iterator1 first1,
                             Iterator1 last1,
                             Iterator2 first2,
                             command_queue &queue = system::default_queue())
{
    BOOST_STATIC_ASSERT(is_device_iterator<Iterator1>::value);
    BOOST_STATIC_ASSERT(is_device_iterator<Iterator2>::value);

    typedef typename std::iterator_traits<Iterator1>::value_type value_type;

    Iterator2 last2 = first2 + std::distance(first1, last1);

    ::boost::compute::vector<value_type> tmp(first1, last1, queue);
    ::boost::compute::copy(first2, last2, first1, queue);
    ::boost::compute::copy(tmp.begin(), tmp.end(), first2, queue);

    return last2;
}

} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_ALGORITHM_SWAP_RANGES_HPP

/* swap_ranges.hpp
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
*/