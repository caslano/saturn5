//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_ALGORITHM_UPPER_BOUND_HPP
#define BOOST_COMPUTE_ALGORITHM_UPPER_BOUND_HPP

#include <boost/static_assert.hpp>

#include <boost/compute/lambda.hpp>
#include <boost/compute/system.hpp>
#include <boost/compute/command_queue.hpp>
#include <boost/compute/algorithm/detail/binary_find.hpp>
#include <boost/compute/type_traits/is_device_iterator.hpp>

namespace boost {
namespace compute {

/// Returns an iterator pointing to the first element in the sorted
/// range [\p first, \p last) that is not less than or equal to
/// \p value.
///
/// Space complexity: \Omega(1)
template<class InputIterator, class T>
inline InputIterator
upper_bound(InputIterator first,
            InputIterator last,
            const T &value,
            command_queue &queue = system::default_queue())
{
    BOOST_STATIC_ASSERT(is_device_iterator<InputIterator>::value);
    using ::boost::compute::_1;

    InputIterator position =
        detail::binary_find(first, last, _1 > value, queue);

    return position;
}

} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_ALGORITHM_UPPER_BOUND_HPP

/* upper_bound.hpp
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
*/