//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_ALGORITHM_REMOVE_IF_HPP
#define BOOST_COMPUTE_ALGORITHM_REMOVE_IF_HPP

#include <boost/static_assert.hpp>

#include <boost/compute/system.hpp>
#include <boost/compute/algorithm/copy_if.hpp>
#include <boost/compute/container/vector.hpp>
#include <boost/compute/functional/logical.hpp>
#include <boost/compute/type_traits/is_device_iterator.hpp>

namespace boost {
namespace compute {

/// Removes each element for which \p predicate returns \c true in the
/// range [\p first, \p last).
///
/// Space complexity: \Omega(3n)
///
/// \see remove()
template<class Iterator, class Predicate>
inline Iterator remove_if(Iterator first,
                          Iterator last,
                          Predicate predicate,
                          command_queue &queue = system::default_queue())
{
    BOOST_STATIC_ASSERT(is_device_iterator<Iterator>::value);
    typedef typename std::iterator_traits<Iterator>::value_type value_type;

    // temporary storage for the input data
    ::boost::compute::vector<value_type> tmp(first, last, queue);

    return ::boost::compute::copy_if(tmp.begin(),
                                     tmp.end(),
                                     first,
                                     not1(predicate),
                                     queue);
}

} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_ALGORITHM_REMOVE_IF_HPP

/* remove_if.hpp
+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
*/