//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_FUNCTIONAL_DETAIL_NVIDIA_BALLOT_HPP
#define BOOST_COMPUTE_FUNCTIONAL_DETAIL_NVIDIA_BALLOT_HPP

#include <boost/compute/function.hpp>
#include <boost/compute/types/fundamental.hpp>

namespace boost {
namespace compute {
namespace detail {

template<class T>
class nvidia_ballot : public function<uint_(T)>
{
public:
    nvidia_ballot()
        : function<uint_(T)>("nvidia_ballot")
    {
        this->set_source(
            "inline uint nvidia_ballot(const uint x)\n"
            "{\n"
            "    uint result;\n"
            "    asm volatile(\n"
            "        \"setp.ne.u32 %%p1, %1, 0;\"\n"
            "        \"vote.ballot.b32 %0, %%p1;\"\n"
            "        : \"=r\"(result)\n"
            "        : \"r\"(x)\n"
            "    );\n"
            "    return result;\n"
            "}\n"
        );
    }
};

} // end detail namespace
} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_FUNCTIONAL_DETAIL_NVIDIA_BALLOT_HPP

/* nvidia_ballot.hpp
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
*/