//---------------------------------------------------------------------------//
// Copyright (c) 2013 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_FUNCTIONAL_GET_HPP
#define BOOST_COMPUTE_FUNCTIONAL_GET_HPP

#include <cstddef>

#include <boost/compute/types/fundamental.hpp>
#include <boost/compute/type_traits/scalar_type.hpp>

namespace boost {
namespace compute {
namespace detail {

// meta-function returning the result type for get<N>()
template<size_t N, class Arg>
struct get_result_type
{
    typedef typename scalar_type<Arg>::type type;
};

template<size_t N, class Arg, class T>
struct invoked_get
{
    typedef typename get_result_type<N, T>::type result_type;

    invoked_get(const Arg &arg)
        : m_arg(arg)
    {
    }

    Arg m_arg;
};

} // end detail namespace

/// Returns the \c N'th element of an aggregate type (e.g. scalarN,
/// pair, tuple, etc.).
///
/// \see \ref field "field<T>"
template<size_t N>
struct get
{
    /// \internal_
    template<class> struct result;

    /// \internal_
    template<class F, class Arg>
    struct result<F(Arg)>
    {
        typedef typename detail::get_result_type<N, Arg>::type type;
    };

    template<class Arg>
    detail::invoked_get<
        N, Arg, typename boost::remove_cv<typename Arg::result_type>::type
    > operator()(const Arg &arg) const
    {
        typedef typename boost::remove_cv<typename Arg::result_type>::type T;

        return detail::invoked_get<N, Arg, T>(arg);
    }
};

} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_FUNCTIONAL_GET_HPP

/* get.hpp
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
*/