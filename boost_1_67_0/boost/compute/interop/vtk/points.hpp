//---------------------------------------------------------------------------//
// Copyright (c) 2013-2014 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_INTEROP_VTK_POINTS_HPP
#define BOOST_COMPUTE_INTEROP_VTK_POINTS_HPP

#include <vector>

#include <vtkPoints.h>

#include <boost/compute/system.hpp>
#include <boost/compute/command_queue.hpp>
#include <boost/compute/algorithm/copy.hpp>
#include <boost/compute/iterator/buffer_iterator.hpp>

namespace boost {
namespace compute {

/// Copies \p points to \p buffer.
///
/// For example, to copy from a \c vtkPoints object to a \c vector<float4_>:
/// \code
/// vtkPoints *points = ...
/// vector<float4_> vector(points->GetNumberOfPoints(), context);
/// vtk_copy_points_to_buffer(points, vector.begin(), queue);
/// \endcode
template<class PointType>
inline void vtk_copy_points_to_buffer(const vtkPoints *points,
                                      buffer_iterator<PointType> buffer,
                                      command_queue &queue = system::default_queue())
{
    vtkPoints *points_ = const_cast<vtkPoints *>(points);

    // copy points to aligned buffer
    std::vector<PointType> tmp(points_->GetNumberOfPoints());
    for(vtkIdType i = 0; i < points_->GetNumberOfPoints(); i++){
        double *p = points_->GetPoint(i);
        tmp[i] = PointType(p[0], p[1], p[2], 1);
    }

    // copy data to device
    copy(tmp.begin(), tmp.end(), buffer, queue);
}

} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_INTEROP_VTK_POINTS_HPP

/* points.hpp
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
*/