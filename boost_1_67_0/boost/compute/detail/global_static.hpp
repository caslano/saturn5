//---------------------------------------------------------------------------//
// Copyright (c) 2013-2014 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_DETAIL_GLOBAL_STATIC_HPP
#define BOOST_COMPUTE_DETAIL_GLOBAL_STATIC_HPP

#include <boost/compute/config.hpp>

#ifdef BOOST_COMPUTE_THREAD_SAFE
#  ifdef BOOST_COMPUTE_HAVE_THREAD_LOCAL
     // use c++11 thread local storage
#    define BOOST_COMPUTE_DETAIL_GLOBAL_STATIC(type, name, ctor) \
       thread_local type name ctor;
#  else
      // use thread_specific_ptr from boost.thread
#     include <boost/thread/tss.hpp>
#     define BOOST_COMPUTE_DETAIL_GLOBAL_STATIC(type, name, ctor) \
        static ::boost::thread_specific_ptr< type > BOOST_PP_CAT(name, _tls_ptr_); \
        if(!BOOST_PP_CAT(name, _tls_ptr_).get()){ \
            BOOST_PP_CAT(name, _tls_ptr_).reset(new type ctor); \
        } \
        static type &name = *BOOST_PP_CAT(name, _tls_ptr_);
#  endif
#else
   // no thread-safety, just use static
#  define BOOST_COMPUTE_DETAIL_GLOBAL_STATIC(type, name, ctor) \
     static type name ctor;
#endif

#endif // BOOST_COMPUTE_DETAIL_GLOBAL_STATIC_HPP

/* global_static.hpp
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
*/