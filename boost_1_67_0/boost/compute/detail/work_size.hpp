//---------------------------------------------------------------------------//
// Copyright (c) 2013-2014 Kyle Lutz <kyle.r.lutz@gmail.com>
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
// See http://boostorg.github.com/compute for more information.
//---------------------------------------------------------------------------//

#ifndef BOOST_COMPUTE_DETAIL_WORK_SIZE_HPP
#define BOOST_COMPUTE_DETAIL_WORK_SIZE_HPP

#include <cmath>

namespace boost {
namespace compute {
namespace detail {

// Given a total number of values (count), a number of values to
// process per thread (vtp), and a number of threads to execute per
// block (tpb), this function returns the global work size to be
// passed to clEnqueueNDRangeKernel() for a 1D algorithm.
inline size_t calculate_work_size(size_t count, size_t vpt, size_t tpb)
{
    size_t work_size = static_cast<size_t>(std::ceil(float(count) / vpt));
    if(work_size % tpb != 0){
        work_size += tpb - work_size % tpb;
    }
    return work_size;
}

} // end detail namespace
} // end compute namespace
} // end boost namespace

#endif // BOOST_COMPUTE_DETAIL_WORK_SIZE_HPP

/* work_size.hpp
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
*/