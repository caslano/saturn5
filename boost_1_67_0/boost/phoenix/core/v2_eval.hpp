/*=============================================================================
    Copyright (c) 2011 Thomas Heller

    Distributed under the Boost Software License, Version 1.0. (See accompanying 
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/
#ifndef BOOST_PHOENIX_CORE_V2_EVAL_HPP
#define BOOST_PHOENIX_CORE_V2_EVAL_HPP

#include <boost/phoenix/core/limits.hpp>
#include <boost/phoenix/core/environment.hpp>
#include <boost/phoenix/core/is_actor.hpp>
#include <boost/phoenix/core/meta_grammar.hpp>
#include <boost/phoenix/core/terminal_fwd.hpp>
#include <boost/phoenix/support/vector.hpp>
#include <boost/proto/transform/fold.hpp>
#include <boost/proto/transform/lazy.hpp>

namespace boost { namespace phoenix
{
    struct v2_eval
        : proto::callable
    {
        template <typename Sig>
        struct result;

        template <typename This, typename Eval, typename Env>
        struct result<This(Eval, Env)>
            : Eval::template result<typename proto::detail::uncvref<Env>::type>
        {};

        template <typename This, typename Eval, typename Env>
        struct result<This(Eval &, Env)>
            : Eval::template result<typename proto::detail::uncvref<Env>::type>
        {};

        template <typename This, typename Eval, typename Env>
        struct result<This(Eval const &, Env)>
            : Eval::template result<typename proto::detail::uncvref<Env>::type>
        {};

        template <typename Eval, typename Env>
        typename result<v2_eval(Eval const&, Env)>::type
        operator()(Eval const & e, Env const & env) const
        {
            return e.eval(env);
        }
    };
}}

#endif

/* v2_eval.hpp
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
*/