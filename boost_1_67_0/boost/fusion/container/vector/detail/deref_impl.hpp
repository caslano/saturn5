/*=============================================================================
    Copyright (c) 2001-2011 Joel de Guzman

    Distributed under the Boost Software License, Version 1.0. (See accompanying 
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/
#if !defined(FUSION_DEREF_IMPL_05042005_1037)
#define FUSION_DEREF_IMPL_05042005_1037

#include <boost/fusion/support/config.hpp>
#include <boost/fusion/support/detail/access.hpp>
#include <boost/fusion/container/vector/detail/value_at_impl.hpp>
#include <boost/type_traits/is_const.hpp>
#include <boost/mpl/if.hpp>

namespace boost { namespace fusion
{
    struct vector_iterator_tag;

    namespace extension
    {
        template <typename Tag>
        struct deref_impl;

        template <>
        struct deref_impl<vector_iterator_tag>
        {
            template <typename Iterator>
            struct apply
            {
                typedef typename Iterator::vector vector;
                typedef typename Iterator::index index;
                typedef typename value_at_impl<vector_tag>::template apply<vector, index>::type element;

                typedef typename
                    mpl::if_<
                        is_const<vector>
                      , typename fusion::detail::cref_result<element>::type
                      , typename fusion::detail::ref_result<element>::type
                    >::type
                type;

                BOOST_CONSTEXPR BOOST_FUSION_GPU_ENABLED
                static type
                call(Iterator const& i)
                {
                    return i.vec.at_impl(index());
                }
            };
        };
    }
}}

#endif

/* deref_impl.hpp
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
*/