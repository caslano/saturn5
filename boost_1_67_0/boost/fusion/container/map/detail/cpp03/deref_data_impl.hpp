/*=============================================================================
    Copyright (c) 2009 Christopher Schmidt

    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/

#ifndef BOOST_FUSION_CONTAINER_MAP_DETAIL_DEREF_DATA_IMPL_HPP
#define BOOST_FUSION_CONTAINER_MAP_DETAIL_DEREF_DATA_IMPL_HPP

#include <boost/fusion/support/config.hpp>
#include <boost/fusion/iterator/value_of.hpp>
#include <boost/fusion/iterator/deref.hpp>
#include <boost/fusion/support/detail/access.hpp>
#include <boost/type_traits/is_const.hpp>
#include <boost/mpl/if.hpp>

namespace boost { namespace fusion { namespace extension
{
    template <typename>
    struct deref_data_impl;

    template <>
    struct deref_data_impl<map_iterator_tag>
    {
        template <typename It>
        struct apply
        {
            typedef typename result_of::value_of<It>::type::second_type data;

            typedef typename
                mpl::if_<
                    is_const<typename It::seq_type>
                  , typename detail::cref_result<data>::type
                  , typename detail::ref_result<data>::type
                >::type
            type;

            BOOST_CONSTEXPR BOOST_FUSION_GPU_ENABLED
            static type
            call(It const& it)
            {
                return fusion::deref(it).second;
            }
        };
    };
}}}

#endif

/* deref_data_impl.hpp
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
*/