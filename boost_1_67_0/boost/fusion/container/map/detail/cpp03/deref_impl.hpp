/*=============================================================================
    Copyright (c) 2009 Christopher Schmidt

    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/

#ifndef BOOST_FUSION_CONTAINER_MAP_DETAIL_DEREF_IMPL_HPP
#define BOOST_FUSION_CONTAINER_MAP_DETAIL_DEREF_IMPL_HPP

#include <boost/fusion/support/config.hpp>
#include <boost/fusion/sequence/intrinsic/at.hpp>
#include <boost/type_traits/is_const.hpp>

namespace boost { namespace fusion { namespace extension
{
    template <typename>
    struct deref_impl;

    template <>
    struct deref_impl<map_iterator_tag>
    {
        template <typename It>
        struct apply
        {
            typedef typename
                result_of::at<
                    typename mpl::if_<
                        is_const<typename It::seq_type>
                      , typename It::seq_type::storage_type const
                      , typename It::seq_type::storage_type
                    >::type
                  , typename It::index
                >::type
            type;

            BOOST_CONSTEXPR BOOST_FUSION_GPU_ENABLED
            static type
            call(It const& it)
            {
                return fusion::at<typename It::index>(it.seq->get_data());
            }
        };
    };
}}}

#endif

/* deref_impl.hpp
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
*/