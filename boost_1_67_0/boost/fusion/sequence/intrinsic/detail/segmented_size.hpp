/*=============================================================================
    Copyright (c) 2011 Eric Niebler

    Distributed under the Boost Software License, Version 1.0. (See accompanying 
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/
#if !defined(BOOST_FUSION_SEGMENTED_SIZE_08112006_1141)
#define BOOST_FUSION_SEGMENTED_SIZE_08112006_1141

#include <boost/fusion/support/config.hpp>
#include <boost/type_traits/add_const.hpp>
#include <boost/type_traits/remove_reference.hpp>
#include <boost/mpl/fold.hpp>
#include <boost/mpl/plus.hpp>
#include <boost/mpl/size_t.hpp>
#include <boost/mpl/placeholders.hpp>
#include <boost/fusion/sequence/intrinsic_fwd.hpp>
#include <boost/fusion/mpl/begin.hpp>
#include <boost/fusion/mpl/end.hpp>
#include <boost/fusion/support/is_segmented.hpp>

namespace boost { namespace fusion { namespace detail
{
    ///////////////////////////////////////////////////////////////////////////
    // calculates the size of any segmented data structure.
    template<typename Sequence>
    struct segmented_size;

    ///////////////////////////////////////////////////////////////////////////
    template<typename Sequence, bool IsSegmented = traits::is_segmented<Sequence>::value>
    struct segmented_size_impl
      : mpl::fold<
            typename remove_reference<
                typename add_const<
                    typename result_of::segments<Sequence>::type
                >::type
            >::type
          , mpl::size_t<0>
          , mpl::plus<mpl::_1, segmented_size<remove_reference<mpl::_2> > >
        >::type
    {};

    template<typename Sequence>
    struct segmented_size_impl<Sequence, false>
      : result_of::size<Sequence>::type
    {};

    template<typename Sequence>
    struct segmented_size
      : segmented_size_impl<Sequence>
    {};

}}}

#endif

/* segmented_size.hpp
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
*/