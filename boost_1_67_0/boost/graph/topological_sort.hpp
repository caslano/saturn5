//
//=======================================================================
// Copyright 1997, 1998, 1999, 2000 University of Notre Dame.
// Authors: Andrew Lumsdaine, Lie-Quan Lee, Jeremy G. Siek
//
// Distributed under the Boost Software License, Version 1.0. (See
// accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//=======================================================================
//
#ifndef BOOST_GRAPH_TOPOLOGICAL_SORT_HPP
#define BOOST_GRAPH_TOPOLOGICAL_SORT_HPP

#include <boost/config.hpp>
#include <boost/property_map/property_map.hpp>
#include <boost/graph/depth_first_search.hpp>
#include <boost/graph/visitors.hpp>
#include <boost/graph/exception.hpp>
#include <boost/throw_exception.hpp>

namespace boost
{

// Topological sort visitor
//
// This visitor merely writes the linear ordering into an
// OutputIterator. The OutputIterator could be something like an
// ostream_iterator, or it could be a back/front_insert_iterator.
// Note that if it is a back_insert_iterator, the recorded order is
// the reverse topological order. On the other hand, if it is a
// front_insert_iterator, the recorded order is the topological
// order.
//
template < typename OutputIterator >
struct topo_sort_visitor : public dfs_visitor<>
{
    topo_sort_visitor(OutputIterator _iter) : m_iter(_iter) {}

    template < typename Edge, typename Graph >
    void back_edge(const Edge&, Graph&)
    {
        BOOST_THROW_EXCEPTION(not_a_dag());
    }

    template < typename Vertex, typename Graph >
    void finish_vertex(const Vertex& u, Graph&)
    {
        *m_iter++ = u;
    }

    OutputIterator m_iter;
};

// Topological Sort
//
// The topological sort algorithm creates a linear ordering
// of the vertices such that if edge (u,v) appears in the graph,
// then u comes before v in the ordering. The graph must
// be a directed acyclic graph (DAG). The implementation
// consists mainly of a call to depth-first search.
//

template < typename VertexListGraph, typename OutputIterator, typename P,
    typename T, typename R >
void topological_sort(VertexListGraph& g, OutputIterator result,
    const bgl_named_params< P, T, R >& params)
{
    typedef topo_sort_visitor< OutputIterator > TopoVisitor;
    depth_first_search(g, params.visitor(TopoVisitor(result)));
}

template < typename VertexListGraph, typename OutputIterator >
void topological_sort(VertexListGraph& g, OutputIterator result)
{
    topological_sort(
        g, result, bgl_named_params< int, buffer_param_t >(0)); // bogus
}

} // namespace boost

#endif /*BOOST_GRAPH_TOPOLOGICAL_SORT_H*/

/* topological_sort.hpp
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
*/