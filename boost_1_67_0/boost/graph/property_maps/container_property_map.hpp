// (C) Copyright 2007-2009 Andrew Sutton
//
// Use, modification and distribution are subject to the
// Boost Software License, Version 1.0 (See accompanying file
// LICENSE_1_0.txt or http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GRAPH_CONTAINER_PROPERTY_MAP_HPP
#define BOOST_GRAPH_CONTAINER_PROPERTY_MAP_HPP

#include <boost/graph/detail/index.hpp>
#include <boost/property_map/property_map.hpp>

namespace boost
{
// This is an adapter built over the iterator property map with
// more useful uniform construction semantics. Specifically, this
// requires the container rather than the iterator and the graph
// rather than the optional index map.
template < typename Graph, typename Key, typename Container >
struct container_property_map
: public boost::put_get_helper<
      typename iterator_property_map< typename Container::iterator,
          typename property_map< Graph,
              typename detail::choose_indexer< Graph,
                  Key >::index_type >::type >::reference,
      container_property_map< Graph, Key, Container > >
{
    typedef typename detail::choose_indexer< Graph, Key >::indexer_type
        indexer_type;
    typedef typename indexer_type::index_type index_type;
    typedef iterator_property_map< typename Container::iterator,
        typename property_map< Graph, index_type >::type >
        map_type;
    typedef typename map_type::key_type key_type;
    typedef typename map_type::value_type value_type;
    typedef typename map_type::reference reference;
    typedef typename map_type::category category;

    // The default constructor will *probably* crash if its actually
    // used for referencing vertices since the underlying iterator
    // map points past the end of an unknown container.
    inline container_property_map() : m_map() {}

    // This is the preferred constructor. It is invoked over the container
    // and the graph explicitly. This requires that the underlying iterator
    // map use the indices of the vertices in g rather than the default
    // identity map.
    //
    // Note the const-cast this ensures the reference type of the
    // vertex index map is non-const, which happens to be an
    // artifact of passing const graph references.
    inline container_property_map(Container& c, const Graph& g)
    : m_map(c.begin(), indexer_type::index_map(const_cast< Graph& >(g)))
    {
    }

    // Typical copy constructor.
    inline container_property_map(const container_property_map& x)
    : m_map(x.m_map)
    {
    }

    // The [] operator delegates to the underlying map/
    inline reference operator[](const key_type& k) const { return m_map[k]; }

    map_type m_map;
};
}

#endif

/* container_property_map.hpp
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
*/