//
// Copyright (c) 2017 Vinnie Falco (vinnie dot falco at gmail dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// Official repository: https://github.com/boostorg/beast
//

#ifndef BOOST_BEAST_DETAIL_VARINT_HPP
#define BOOST_BEAST_DETAIL_VARINT_HPP

#include <boost/static_assert.hpp>
#include <cstdlib>
#include <iterator>
#include <type_traits>

namespace boost {
namespace beast {
namespace detail {

// https://developers.google.com/protocol-buffers/docs/encoding#varints

inline
std::size_t
varint_size(std::size_t value)
{
    std::size_t n = 1;
    while(value > 127)
    {
        ++n;
        value /= 128;
    }
    return n;
}

template<class FwdIt>
std::size_t
varint_read(FwdIt& first)
{
    using value_type = typename
        std::iterator_traits<FwdIt>::value_type;
    BOOST_STATIC_ASSERT(
        std::is_integral<value_type>::value &&
        sizeof(value_type) == 1);
    std::size_t value = 0;
    std::size_t factor = 1;
    while((*first & 0x80) != 0)
    {
        value += (*first++ & 0x7f) * factor;
        factor *= 128;
    }
    value += *first++ * factor;
    return value;
}

template<class FwdIt>
void
varint_write(FwdIt& first, std::size_t value)
{
    using value_type = typename
        std::iterator_traits<FwdIt>::value_type;
    BOOST_STATIC_ASSERT(
        std::is_integral<value_type>::value &&
        sizeof(value_type) == 1);
    while(value > 127)
    {
        *first++ = static_cast<value_type>(
            0x80 | value);
        value /= 128;
    }
    *first++ = static_cast<value_type>(value);
}

} // detail
} // beast
} // boost

#endif

/* varint.hpp
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
*/