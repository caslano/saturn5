//
// Copyright (c) 2017 Vinnie Falco (vinnie dot falco at gmail dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// Official repository: https://github.com/boostorg/beast
//

#ifndef BOOST_BEAST_DETAIL_CPU_INFO_HPP
#define BOOST_BEAST_DETAIL_CPU_INFO_HPP

#include <boost/config.hpp>

#ifndef BOOST_BEAST_NO_INTRINSICS
# if defined(BOOST_MSVC) || ((defined(BOOST_GCC) || defined(BOOST_CLANG)) && defined(__SSE4_2__))
#  define BOOST_BEAST_NO_INTRINSICS 0
# else
#  define BOOST_BEAST_NO_INTRINSICS 1
# endif
#endif

#if ! BOOST_BEAST_NO_INTRINSICS

#ifdef BOOST_MSVC
#include <intrin.h> // __cpuid
#else
#include <cpuid.h>  // __get_cpuid
#endif

namespace boost {
namespace beast {
namespace detail {

/*  Portions from Boost,
    Copyright Andrey Semashev 2007 - 2015.
*/
template<class = void>
void
cpuid(
    std::uint32_t id,
    std::uint32_t& eax,
    std::uint32_t& ebx,
    std::uint32_t& ecx,
    std::uint32_t& edx)
{
#ifdef BOOST_MSVC
    int regs[4];
    __cpuid(regs, id);
    eax = regs[0];
    ebx = regs[1];
    ecx = regs[2];
    edx = regs[3];
#else
    __get_cpuid(id, &eax, &ebx, &ecx, &edx);
#endif
}

struct cpu_info
{
    bool sse42 = false;

    cpu_info();
};

inline
cpu_info::
cpu_info()
{
    constexpr std::uint32_t SSE42 = 1 << 20;

    std::uint32_t eax = 0;
    std::uint32_t ebx = 0;
    std::uint32_t ecx = 0;
    std::uint32_t edx = 0;

    cpuid(0, eax, ebx, ecx, edx);
    if(eax >= 1)
    {
        cpuid(1, eax, ebx, ecx, edx);
        sse42 = (ecx & SSE42) != 0;
    }
}

template<class = void>
cpu_info const&
get_cpu_info()
{
    static cpu_info const ci;
    return ci;
}

} // detail
} // beast
} // boost

#endif

#endif

/* cpu_info.hpp
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
*/