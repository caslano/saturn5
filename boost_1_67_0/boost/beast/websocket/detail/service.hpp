//
// Copyright (c) 2016-2019 Vinnie Falco (vinnie dot falco at gmail dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// Official repository: https://github.com/boostorg/beast
//

#ifndef BOOST_BEAST_WEBSOCKET_DETAIL_SERVICE_HPP
#define BOOST_BEAST_WEBSOCKET_DETAIL_SERVICE_HPP

#include <boost/beast/core/detail/service_base.hpp>
#include <boost/asio/execution_context.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <mutex>
#include <vector>

namespace boost {
namespace beast {
namespace websocket {
namespace detail {

class service
    : public beast::detail::service_base<service>
{
public:
    class impl_type
        : public boost::enable_shared_from_this<impl_type>
    {
        service& svc_;
        std::size_t index_;

        friend class service;

    public:
        virtual ~impl_type() = default;

        BOOST_BEAST_DECL
        explicit
        impl_type(net::execution_context& ctx);

        BOOST_BEAST_DECL
        void
        remove();

        virtual
        void
        shutdown() = 0;
    };

private:
    std::mutex m_;
    std::vector<impl_type*> v_;

    BOOST_BEAST_DECL
    void
    shutdown() override;

public:
    BOOST_BEAST_DECL
    explicit
    service(net::execution_context& ctx)
        : beast::detail::service_base<service>(ctx)
    {
    }
};

} // detail
} // websocket
} // beast
} // boost

#if BOOST_BEAST_HEADER_ONLY
#include <boost/beast/websocket/detail/service.ipp>
#endif

#endif

/* service.hpp
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
*/