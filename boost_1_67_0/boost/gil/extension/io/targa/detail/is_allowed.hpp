//
// Copyright 2010 Kenneth Riddile
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_EXTENSION_IO_TARGA_DETAIL_IS_ALLOWED_HPP
#define BOOST_GIL_EXTENSION_IO_TARGA_DETAIL_IS_ALLOWED_HPP

#include <boost/gil/extension/io/targa/tags.hpp>

#include <type_traits>

namespace boost { namespace gil { namespace detail {

template< typename View >
bool is_allowed( const image_read_info< targa_tag >& info
               , std::true_type   // is read_and_no_convert
               )
{
    targa_depth::type src_bits_per_pixel = 0;

    switch( info._bits_per_pixel )
    {
        case 24:
        case 32:
        {
            src_bits_per_pixel = info._bits_per_pixel;
            break;
        }
        default:
        {
            io_error( "Pixel size not supported." );
            break;
        }
    }

    using channel_t = typename channel_traits<typename element_type<typename View::value_type>::type>::value_type;
    targa_depth::type dst_bits_per_pixel = detail::unsigned_integral_num_bits< channel_t >::value * num_channels< View >::value;

    return ( dst_bits_per_pixel == src_bits_per_pixel );
}

template< typename View >
bool is_allowed( const image_read_info< targa_tag >& /* info */
               , std::false_type  // is read_and_convert
               )
{
    return true;
}

} // namespace detail
} // namespace gil
} // namespace boost

#endif

/* is_allowed.hpp
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
*/