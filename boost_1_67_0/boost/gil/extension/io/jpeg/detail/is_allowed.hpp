//
// Copyright 2009 Christian Henning
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_EXTENSION_IO_JPEG_DETAIL_IS_ALLOWED_HPP
#define BOOST_GIL_EXTENSION_IO_JPEG_DETAIL_IS_ALLOWED_HPP

#include <boost/gil/extension/io/jpeg/tags.hpp>

#include <type_traits>

namespace boost { namespace gil { namespace detail {

template< typename View >
bool is_allowed( const image_read_info< jpeg_tag >& info
               , std::true_type   // is read_and_no_convert
               )
{
    if( info._color_space == JCS_YCbCr )
    {
        // We read JCS_YCbCr files as rgb.
        return ( is_read_supported< typename View::value_type
                                  , jpeg_tag
                                  >::_color_space == JCS_RGB );
    }

    return ( is_read_supported< typename View::value_type
                              , jpeg_tag
                              >::_color_space == info._color_space );
}

template< typename View >
bool is_allowed( const image_read_info< jpeg_tag >& /* info */
               , std::false_type  // is read_and_convert
               )
{
    return true;
}

} // namespace detail
} // namespace gil
} // namespace boost

#endif

/* is_allowed.hpp
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
*/