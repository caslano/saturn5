//
// Copyright 2012 Christian Henning
//
// Distributed under the Boost Software License, Version 1.0
// See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt
//
#ifndef BOOST_GIL_IO_GET_WRITE_DEVICE_HPP
#define BOOST_GIL_IO_GET_WRITE_DEVICE_HPP

#include <boost/gil/detail/mp11.hpp>
#include <boost/gil/io/device.hpp>
#include <boost/gil/io/path_spec.hpp>

#include <type_traits>

namespace boost { namespace gil {

template <typename T, typename FormatTag, class Enable = void>
struct get_write_device {};

template <typename Device, typename FormatTag>
struct get_write_device
<
    Device,
    FormatTag,
    typename std::enable_if
    <
        mp11::mp_and
        <
            detail::is_adaptable_output_device<FormatTag, Device>,
            is_format_tag<FormatTag>
        >::value
    >::type
>
{
    using type =
        typename detail::is_adaptable_output_device<FormatTag, Device>::device_type;
};

template <typename String, typename FormatTag>
struct get_write_device
<
    String,
    FormatTag,
    typename std::enable_if
    <
        mp11::mp_and
        <
            detail::is_supported_path_spec<String>,
            is_format_tag<FormatTag>
        >::value
    >::type
>
{
    using type = detail::file_stream_device<FormatTag>;
};

}} // namespace boost::gil

#endif

/* get_write_device.hpp
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
*/