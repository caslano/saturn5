// Copyright (c) 2009-2016 Vladimir Batov.
// Use, modification and distribution are subject to the Boost Software License,
// Version 1.0. See http://www.boost.org/LICENSE_1_0.txt.

#ifndef BOOST_CONVERT_HAS_MEMBER_HPP
#define BOOST_CONVERT_HAS_MEMBER_HPP

#include <boost/type_traits/detail/yes_no_type.hpp>

// This macro allows to check if a type has a member named "__member_name__"...
// ... regardless of the signature. If takes advantage of the following behavior related to
// function resolution. Say, both, foo and base, declare a method with the same name "func":
//
//      struct   foo { int  func (int, int) { return 0; } };
//      struct  base { void func () {} };
//      struct mixin : public foo, public base {};
//
// Now, if we inherit from both -- foo and base -- classes, then the following calls will fail
//      mixin_ptr(0)->func();
//      mixin_ptr(0)->func(5, 5);
// with the error message (gcc): request for member func is ambiguous
// regardless if we provide any arguments or not even though one might expect that
// arg-based signature resolution might kick in. The only way to deploy those methods is:
//
//      mixin_ptr(0)->foo::func();
//      mixin_ptr(0)->base::func(5, 5);
//
// C2. The actual signature of __member_name__ is not taken into account. If
//     __T__::__member_name__(any-signature) exists, then the introduced base::__member_name__
//     will cause mixin->__member_name__() call to fail to compile (due to ambiguity).
// C3. &U::__member_name__ (a.k.a. &mixin::__member_name__)
//     has the type of func_type only if __T__::__member_name__ does not exist.
//     If __T__::member_name does exist, then mixin::__member_name__ is ambiguous
//     and "yes_type test (...)" kicks in instead.
// C4. Need to find some unique/ugly name so that it does not clash if this macro is
//     used inside some other template class;

#define BOOST_DECLARE_HAS_MEMBER(__trait_name__, __member_name__)                           \
                                                                                            \
    template <typename __boost_has_member_T__> /*C4*/                                       \
    class __trait_name__                                                                    \
    {                                                                                       \
        typedef typename boost::remove_const<__boost_has_member_T__>::type check_type;      \
        typedef ::boost::type_traits::yes_type                yes_type;                     \
        typedef ::boost::type_traits:: no_type                 no_type;                     \
                                                                                            \
        struct  base { void __member_name__(/*C2*/) {}};                                    \
        struct mixin : public base, public check_type {};                                   \
                                                                                            \
        template <void (base::*)()> struct aux {};                                          \
                                                                                            \
        template <typename U> static no_type  test(aux<&U::__member_name__>*); /*C3*/       \
        template <typename U> static yes_type test(...);                                    \
                                                                                            \
        public:                                                                             \
                                                                                            \
        BOOST_STATIC_CONSTANT(bool, value = (sizeof(yes_type) == sizeof(test<mixin>(0))));  \
    }

#endif // BOOST_CONVERT_HAS_MEMBER_HPP

/* has_member.hpp
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
*/