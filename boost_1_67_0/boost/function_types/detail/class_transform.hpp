
// (C) Copyright Tobias Schwinger
//
// Use modification and distribution are subject to the boost Software License,
// Version 1.0. (See http://www.boost.org/LICENSE_1_0.txt).

//------------------------------------------------------------------------------

#ifndef BOOST_FT_DETAIL_CLASS_TRANSFORM_HPP_INCLUDED
#define BOOST_FT_DETAIL_CLASS_TRANSFORM_HPP_INCLUDED

#include <boost/mpl/apply.hpp>
#include <boost/mpl/always.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/mpl/placeholders.hpp>

#include <boost/type_traits/remove_cv.hpp>
#include <boost/type_traits/add_pointer.hpp>
#include <boost/type_traits/add_reference.hpp>

namespace boost { namespace function_types { namespace detail {

using mpl::placeholders::_;

// Transformation metafunction for the class type of member function pointers.
template<typename T, typename L>
struct class_transform
{ typedef typename mpl::apply1<L,T>::type type; };


// We can short-circuit the mechanism implemented in the primary template for 
// the most common lambda expression and save both the "un-lambdaing" and the
// type traits invocation (we know that T can only be a class type).

template<typename T> struct class_transform< T, mpl::identity<_> >
{ typedef T type; };

template<typename T> struct class_transform< T, add_reference<_> > 
{ typedef T & type; };

template<typename T> struct class_transform< T, add_pointer<_> >
{ typedef T * type; };

template<typename T> struct class_transform< T, remove_cv<_> >
{ typedef typename boost::remove_cv<T>::type type; };

template<typename T> struct class_transform< T, add_reference< remove_cv<_> > >
{ typedef typename boost::remove_cv<T>::type & type; };

template<typename T> struct class_transform< T, add_pointer< remove_cv<_> > >
{ typedef typename boost::remove_cv<T>::type * type; };

template<typename T, typename U> struct class_transform< T, mpl::always<U> >
{ typedef U type; };


} } } // namespace ::boost::function_types::detail

#endif


/* class_transform.hpp
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
*/