/*
  Copyright 2008 Intel Corporation

  Use, modification and distribution are subject to the Boost Software License,
  Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
  http://www.boost.org/LICENSE_1_0.txt).
*/
#ifndef BOOST_POLYGON_ITERATOR_COMPACT_TO_POINTS_HPP
#define BOOST_POLYGON_ITERATOR_COMPACT_TO_POINTS_HPP
namespace boost { namespace polygon{
template <typename iterator_type, typename point_type>
class iterator_compact_to_points {
private:
  iterator_type iter_;
  iterator_type iter_end_;
  point_type pt_;
  typename point_traits<point_type>::coordinate_type firstX_;
  orientation_2d orient_;
public:
  typedef std::forward_iterator_tag iterator_category;
  typedef point_type value_type;
  typedef std::ptrdiff_t difference_type;
  typedef const point_type* pointer; //immutable
  typedef const point_type& reference; //immutable

  inline iterator_compact_to_points() : iter_(), iter_end_(), pt_(), firstX_(), orient_() {}
  inline iterator_compact_to_points(iterator_type iter, iterator_type iter_end) :
    iter_(iter), iter_end_(iter_end), pt_(), firstX_(), orient_(HORIZONTAL) {
    if(iter_ != iter_end_) {
      firstX_ = *iter_;
      x(pt_, firstX_);
      ++iter_;
      if(iter_ != iter_end_) {
        y(pt_, *iter_);
      }
    }
  }
  //use bitwise copy and assign provided by the compiler
  inline iterator_compact_to_points& operator++() {
    iterator_type prev_iter = iter_;
    ++iter_;
    if(iter_ == iter_end_) {
      if(x(pt_) != firstX_) {
        iter_ = prev_iter;
        x(pt_, firstX_);
      }
    } else {
      set(pt_, orient_, *iter_);
      orient_.turn_90();
    }
    return *this;
  }
  inline const iterator_compact_to_points operator++(int) {
    iterator_compact_to_points tmp(*this);
    ++(*this);
    return tmp;
  }
  inline bool operator==(const iterator_compact_to_points& that) const {
    if (iter_ == iter_end_) {
      return iter_ == that.iter_;
    }
    return (iter_ == that.iter_) && (x(pt_) == x(that.pt_));
  }
  inline bool operator!=(const iterator_compact_to_points& that) const {
    if (iter_ == iter_end_) {
      return iter_ != that.iter_;
    }
    return (iter_ != that.iter_) || (x(pt_) != x(that.pt_));
  }
  inline reference operator*() const { return pt_; }
};
}
}
#endif

/* iterator_compact_to_points.hpp
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
*/