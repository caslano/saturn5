/*=============================================================================
    Copyright (c) 2015 Paul Fultz II
    callable_base.h
    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/

#ifndef BOOST_HOF_GUARD_CALLABLE_BASE_H
#define BOOST_HOF_GUARD_CALLABLE_BASE_H

#include <boost/hof/detail/delegate.hpp>
#include <boost/hof/detail/result_of.hpp>
#include <boost/hof/apply.hpp>

#ifndef BOOST_HOF_CALLABLE_BASE_USE_TEMPLATE_ALIAS
#if (defined(__GNUC__) && !defined (__clang__) && __GNUC__ == 4 && __GNUC_MINOR__ < 7)
#define BOOST_HOF_CALLABLE_BASE_USE_TEMPLATE_ALIAS 0
#else
#define BOOST_HOF_CALLABLE_BASE_USE_TEMPLATE_ALIAS 1
#endif
#endif

namespace boost { namespace hof { namespace detail {

template<class F>
struct non_class_function
{
    F f;
    BOOST_HOF_DELEGATE_CONSTRUCTOR(non_class_function, F, f)

    template<class... Ts>
    constexpr BOOST_HOF_SFINAE_RESULT(apply_f, id_<F>, id_<Ts>...) 
    operator()(Ts&&... xs) const BOOST_HOF_SFINAE_RETURNS
    (
        boost::hof::apply(f, BOOST_HOF_FORWARD(Ts)(xs)...)
    );
};

template<class F>
struct callable_base_type
: std::conditional<(BOOST_HOF_IS_CLASS(F) && !BOOST_HOF_IS_FINAL(F) && !BOOST_HOF_IS_POLYMORPHIC(F)), F, non_class_function<F>>
{};

#if BOOST_HOF_CALLABLE_BASE_USE_TEMPLATE_ALIAS
template<class F>
using callable_base = typename callable_base_type<F>::type;
#else
template<class F>
struct callable_base
: callable_base_type<F>::type
{
    typedef typename callable_base_type<F>::type base;
    BOOST_HOF_INHERIT_CONSTRUCTOR(callable_base, base)
};

template<class F>
struct callable_base_type<callable_base<F>>
: callable_base_type<F>
{};

#endif

}}} // namespace boost::hof

#endif

/* callable_base.hpp
+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
*/