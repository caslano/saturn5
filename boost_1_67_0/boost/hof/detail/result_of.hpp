/*=============================================================================
    Copyright (c) 2015 Paul Fultz II
    result_of.h
    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/

#ifndef BOOST_HOF_GUARD_DETAIL_RESULT_OF_H
#define BOOST_HOF_GUARD_DETAIL_RESULT_OF_H

#include <boost/hof/returns.hpp>
#include <boost/hof/config.hpp>

#if BOOST_HOF_HAS_MANUAL_DEDUCTION || BOOST_HOF_NO_EXPRESSION_SFINAE

#include <boost/hof/detail/and.hpp>
#include <boost/hof/detail/holder.hpp>
#include <boost/hof/detail/can_be_called.hpp>

namespace boost { namespace hof { namespace detail {

template<class F, class Args, class=void>
struct result_of_impl {};

template<class F, class... Ts>
struct result_of_impl<
    F, 
    holder<Ts...>, 
    typename std::enable_if<can_be_called<F, typename Ts::type...>::value>::type
>
{
    typedef decltype(std::declval<F>()(std::declval<typename Ts::type>()...)) type;
};
}

template<class T>
struct id_
{
    typedef T type;
};

template<class F, class... Ts>
struct result_of
: detail::result_of_impl<F, detail::holder<Ts...>>
{};

// template<class F, class... Ts>
// using result_of = detail::result_of_impl<F, detail::holder<Ts...>>;
// using result_of = id_<decltype(std::declval<F>()(std::declval<typename Ts::type>()...))>;

}} // namespace boost::hof
#endif

#if BOOST_HOF_NO_EXPRESSION_SFINAE

#define BOOST_HOF_SFINAE_RESULT(...) typename boost::hof::result_of<__VA_ARGS__>::type
#define BOOST_HOF_SFINAE_RETURNS(...) BOOST_HOF_RETURNS_DEDUCE_NOEXCEPT(__VA_ARGS__) { return __VA_ARGS__; }

#else

#define BOOST_HOF_SFINAE_RESULT(...) auto
#define BOOST_HOF_SFINAE_RETURNS BOOST_HOF_RETURNS

#endif

#if BOOST_HOF_HAS_MANUAL_DEDUCTION

#define BOOST_HOF_SFINAE_MANUAL_RESULT(...) typename boost::hof::result_of<__VA_ARGS__>::type
#if BOOST_HOF_HAS_COMPLETE_DECLTYPE && BOOST_HOF_HAS_MANGLE_OVERLOAD
#define BOOST_HOF_SFINAE_MANUAL_RETURNS(...) BOOST_HOF_RETURNS_DEDUCE_NOEXCEPT(__VA_ARGS__) { return (__VA_ARGS__); }
#else
#define BOOST_HOF_SFINAE_MANUAL_RETURNS(...) BOOST_HOF_RETURNS_DEDUCE_NOEXCEPT(__VA_ARGS__) { BOOST_HOF_RETURNS_RETURN(__VA_ARGS__); }
#endif

#else

#define BOOST_HOF_SFINAE_MANUAL_RESULT BOOST_HOF_SFINAE_RESULT
#define BOOST_HOF_SFINAE_MANUAL_RETURNS BOOST_HOF_SFINAE_RETURNS

#endif

#endif

/* result_of.hpp
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
*/