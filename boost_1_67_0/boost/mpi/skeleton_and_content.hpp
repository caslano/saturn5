// (C) Copyright 2005 Matthias Troyer
// (C) Copyright 2006 Douglas Gregor <doug.gregor -at gmail.com>

// Use, modification and distribution is subject to the Boost Software
// License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

//  Authors: Matthias Troyer
//           Douglas Gregor

/** @file skeleton_and_content.hpp
 *
 *  This header provides facilities that allow the structure of data
 *  types (called the "skeleton") to be transmitted and received
 *  separately from the content stored in those data types. These
 *  facilities are useful when the data in a stable data structure
 *  (e.g., a mesh or a graph) will need to be transmitted
 *  repeatedly. In this case, transmitting the skeleton only once
 *  saves both communication effort (it need not be sent again) and
 *  local computation (serialization need only be performed once for
 *  the content).
 */
#ifndef BOOST_MPI_SKELETON_AND_CONTENT_HPP
#define BOOST_MPI_SKELETON_AND_CONTENT_HPP

#include <boost/mpi/config.hpp>
#include <boost/archive/detail/auto_link_archive.hpp>
#include <boost/mpi/skeleton_and_content_types.hpp>

namespace boost { namespace mpi {

namespace detail {
  typedef boost::mpi::detail::forward_skeleton_oarchive<boost::mpi::packed_skeleton_oarchive,boost::mpi::packed_oarchive> type1;
  typedef boost::mpi::detail::forward_skeleton_iarchive<boost::mpi::packed_skeleton_iarchive,boost::mpi::packed_iarchive> type2;
}


} } // end namespace boost::mpi

#include <boost/mpi/detail/content_oarchive.hpp>

// For any headers that have provided declarations based on forward
// declarations of the contents of this header, include definitions
// for those declarations. This means that the inclusion of
// skeleton_and_content.hpp enables the use of skeleton/content
// transmission throughout the library.
#ifdef BOOST_MPI_BROADCAST_HPP
#  include <boost/mpi/detail/broadcast_sc.hpp>
#endif

#ifdef BOOST_MPI_COMMUNICATOR_HPP
#  include <boost/mpi/detail/communicator_sc.hpp>
#endif

// required by export
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::packed_skeleton_oarchive)
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::packed_skeleton_iarchive)
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::detail::type1)
BOOST_SERIALIZATION_REGISTER_ARCHIVE(boost::mpi::detail::type2)

BOOST_SERIALIZATION_USE_ARRAY_OPTIMIZATION(boost::mpi::packed_skeleton_oarchive)
BOOST_SERIALIZATION_USE_ARRAY_OPTIMIZATION(boost::mpi::packed_skeleton_iarchive)

#endif // BOOST_MPI_SKELETON_AND_CONTENT_HPP

/* skeleton_and_content.hpp
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
*/