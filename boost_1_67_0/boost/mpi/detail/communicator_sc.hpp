// Copyright (C) 2006 Douglas Gregor <doug.gregor -at- gmail.com>.

// Use, modification and distribution is subject to the Boost Software
// License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

// Skeleton and content support for communicators

// This header should be included only after both communicator.hpp and
// skeleton_and_content.hpp have been included.
#ifndef BOOST_MPI_COMMUNICATOR_SC_HPP
#define BOOST_MPI_COMMUNICATOR_SC_HPP

namespace boost { namespace mpi {

template<typename T>
void
communicator::send(int dest, int tag, const skeleton_proxy<T>& proxy) const
{
  packed_skeleton_oarchive ar(*this);
  ar << proxy.object;
  send(dest, tag, ar);
}

template<typename T>
status
communicator::recv(int source, int tag, const skeleton_proxy<T>& proxy) const
{
  packed_skeleton_iarchive ar(*this);
  status result = recv(source, tag, ar);
  ar >> proxy.object;
  return result;
}

template<typename T>
status communicator::recv(int source, int tag, skeleton_proxy<T>& proxy) const
{
  packed_skeleton_iarchive ar(*this);
  status result = recv(source, tag, ar);
  ar >> proxy.object;
  return result;
}

template<typename T>
request
communicator::isend(int dest, int tag, const skeleton_proxy<T>& proxy) const
{
  shared_ptr<packed_skeleton_oarchive> 
    archive(new packed_skeleton_oarchive(*this));

  *archive << proxy.object;
  request result = isend(dest, tag, *archive);
  result.preserve(archive);
  return result;
}

} } // end namespace boost::mpi

#endif // BOOST_MPI_COMMUNICATOR_SC_HPP


/* communicator_sc.hpp
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
*/