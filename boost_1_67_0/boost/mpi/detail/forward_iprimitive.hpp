// (C) Copyright 2005 Matthias Troyer 

// Use, modification and distribution is subject to the Boost Software
// License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

//  Authors: Matthias Troyer

#include <boost/serialization/array.hpp>

#ifndef BOOST_MPI_DETAIL_FORWARD_IPRIMITIVE_HPP
#define BOOST_MPI_DETAIL_FORWARD_IPRIMITIVE_HPP

namespace boost { namespace mpi { namespace detail {

/// @brief a minimal input archive, which forwards reading to another archive
///
/// This class template is designed to use the loading facilities of another
/// input archive (the "implementation archive", whose type is specified by 
/// the template argument, to handle serialization of primitive types, 
/// while serialization for specific types can be overriden independently 
/// of that archive.

template <class ImplementationArchive>
class forward_iprimitive
{
public:

    /// the type of the archive to which the loading of primitive types will be forwarded
    typedef ImplementationArchive implementation_archive_type;

    /// the constructor takes a reference to the implementation archive used for loading primitve types
    forward_iprimitive(implementation_archive_type& ar)
     : implementation_archive(ar)
    {}

    /// binary loading is forwarded to the implementation archive
    void load_binary(void * address, std::size_t count )
    {
      implementation_archive.load_binary(address,count);
    }
    
    /// loading of arrays is forwarded to the implementation archive
    template<class T>
    void load_array(serialization::array_wrapper<T> & x, unsigned int file_version )
    {
      implementation_archive.load_array(x,file_version);
    }

    typedef typename ImplementationArchive::use_array_optimization use_array_optimization;    

#ifndef BOOST_NO_MEMBER_TEMPLATE_FRIENDS
    friend class archive::load_access;
protected:
#else
public:
#endif

    ///  loading of primitives is forwarded to the implementation archive
    template<class T>
    void load(T & t)
    {
      implementation_archive >> t;
    }

private:
    implementation_archive_type& implementation_archive;
};

} } } // end namespace boost::mpi::detail

#endif // BOOST_MPI_DETAIL_FORWARD_IPRIMITIVE_HPP

/* forward_iprimitive.hpp
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
*/