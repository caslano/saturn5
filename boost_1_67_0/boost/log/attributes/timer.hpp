/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   timer.hpp
 * \author Andrey Semashev
 * \date   02.12.2007
 *
 * The header contains implementation of a stop watch attribute.
 */

#ifndef BOOST_LOG_ATTRIBUTES_TIMER_HPP_INCLUDED_
#define BOOST_LOG_ATTRIBUTES_TIMER_HPP_INCLUDED_

#include <boost/log/detail/config.hpp>
#include <boost/log/attributes/attribute.hpp>
#include <boost/log/attributes/attribute_cast.hpp>
#include <boost/log/attributes/time_traits.hpp>
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace attributes {

/*!
 * \brief A class of an attribute that makes an attribute value of the time interval since construction
 *
 * The timer attribute calculates the time passed since its construction and returns it on value acquisition.
 * The attribute value type is <tt>boost::posix_time::time_duration</tt>.
 *
 * On Windows platform there are two implementations of the attribute. The default one is more precise but
 * a bit slower. This version uses <tt>QueryPerformanceFrequence</tt>/<tt>QueryPerformanceCounter</tt> API
 * to calculate elapsed time.
 *
 * There are known problems with these functions when used with some CPUs, notably AMD Athlon with
 * Cool'n'Quiet technology enabled. See the following links for more information and possible resolutions:
 *
 * http://support.microsoft.com/?scid=kb;en-us;895980
 * http://support.microsoft.com/?id=896256
 *
 * In case if none of these solutions apply, you are free to define <tt>BOOST_LOG_NO_QUERY_PERFORMANCE_COUNTER</tt> macro to
 * fall back to another implementation based on Boost.DateTime.
 */
class BOOST_LOG_API timer :
    public attribute
{
public:
    //! Attribute value type
    typedef utc_time_traits::time_type::time_duration_type value_type;

private:
    //! Factory implementation
    class BOOST_SYMBOL_VISIBLE impl;

public:
    /*!
     * Constructor. Starts time counting.
     */
    timer();
    /*!
     * Constructor for casting support
     */
    explicit timer(cast_source const& source);
};

} // namespace attributes

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_ATTRIBUTES_TIMER_HPP_INCLUDED_

/* timer.hpp
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
*/