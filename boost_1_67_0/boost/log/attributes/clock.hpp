/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   clock.hpp
 * \author Andrey Semashev
 * \date   01.12.2007
 *
 * The header contains wall clock attribute implementation and typedefs.
 */

#ifndef BOOST_LOG_ATTRIBUTES_CLOCK_HPP_INCLUDED_
#define BOOST_LOG_ATTRIBUTES_CLOCK_HPP_INCLUDED_

#include <boost/log/detail/config.hpp>
#include <boost/log/attributes/attribute.hpp>
#include <boost/log/attributes/attribute_value.hpp>
#include <boost/log/attributes/attribute_cast.hpp>
#include <boost/log/attributes/attribute_value_impl.hpp>
#include <boost/log/attributes/time_traits.hpp>
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace attributes {

/*!
 * \brief A class of an attribute that makes an attribute value of the current date and time
 *
 * The attribute generates current time stamp as a value. The type of the attribute value
 * is determined with time traits passed to the class template as a template parameter.
 * The time traits provided by the library use \c boost::posix_time::ptime as the time type.
 *
 * Time traits also determine the way time is acquired. There are two types of time traits
 * provided by the library: \c utc_time_traits and \c local_time_traits. The first returns UTC time,
 * the second returns local time.
 */
template< typename TimeTraitsT >
class basic_clock :
    public attribute
{
public:
    //! Generated value type
    typedef typename TimeTraitsT::time_type value_type;

protected:
    //! Attribute factory implementation
    struct BOOST_SYMBOL_VISIBLE impl :
        public attribute::impl
    {
        attribute_value get_value()
        {
            typedef attribute_value_impl< value_type > result_value;
            return attribute_value(new result_value(TimeTraitsT::get_clock()));
        }
    };

public:
    /*!
     * Default constructor
     */
    basic_clock() : attribute(new impl())
    {
    }
    /*!
     * Constructor for casting support
     */
    explicit basic_clock(cast_source const& source) : attribute(source.as< impl >())
    {
    }
};

//! Attribute that returns current UTC time
typedef basic_clock< utc_time_traits > utc_clock;
//! Attribute that returns current local time
typedef basic_clock< local_time_traits > local_clock;

} // namespace attributes

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_ATTRIBUTES_CLOCK_HPP_INCLUDED_

/* clock.hpp
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
*/