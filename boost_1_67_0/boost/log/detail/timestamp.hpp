/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   timestamp.hpp
 * \author Andrey Semashev
 * \date   31.07.2011
 *
 * \brief  This header is the Boost.Log library implementation, see the library documentation
 *         at http://www.boost.org/doc/libs/release/libs/log/doc/html/index.html.
 */

#ifndef BOOST_LOG_DETAIL_TIMESTAMP_HPP_INCLUDED_
#define BOOST_LOG_DETAIL_TIMESTAMP_HPP_INCLUDED_

#include <boost/cstdint.hpp>
#include <boost/log/detail/config.hpp>
#if defined(BOOST_WINDOWS) && !defined(__CYGWIN__)
#include <boost/winapi/basic_types.hpp>
#endif
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace aux {

/*!
 * Duration between two timestamps
 */
class duration
{
    int64_t m_ticks;

public:
    explicit duration(int64_t ticks = 0) : m_ticks(ticks) {}

#if defined(BOOST_WINDOWS) && !defined(__CYGWIN__)
    int64_t milliseconds() const { return m_ticks; }
#else
    BOOST_LOG_API int64_t milliseconds() const;
#endif
};

/*!
 * Opaque timestamp class
 */
class timestamp
{
    uint64_t m_ticks;

public:
    explicit timestamp(uint64_t ticks = 0) : m_ticks(ticks) {}

    duration operator- (timestamp that) const
    {
        return duration(m_ticks - that.m_ticks);
    }
};

/*!
 * \fn get_timestamp
 *
 * The function returns a timestamp, in opaque units since an unspecified
 * time point. This timer is guaranteed to be monotonic, it should not
 * be affected by clock changes, either manual or seasonal. Also, it
 * should be as fast as possible.
 */
#if defined(BOOST_WINDOWS) && !defined(__CYGWIN__)

typedef uint64_t (BOOST_WINAPI_WINAPI_CC* get_tick_count_t)();
extern BOOST_LOG_API get_tick_count_t get_tick_count;

inline timestamp get_timestamp()
{
    return timestamp(get_tick_count());
}

#else

typedef timestamp (*get_timestamp_t)();
extern BOOST_LOG_API get_timestamp_t get_timestamp;

#endif

} // namespace aux

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_DETAIL_TIMESTAMP_HPP_INCLUDED_

/* timestamp.hpp
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
*/