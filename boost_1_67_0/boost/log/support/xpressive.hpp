/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   support/xpressive.hpp
 * \author Andrey Semashev
 * \date   18.07.2009
 *
 * This header enables Boost.Xpressive support for Boost.Log.
 */

#ifndef BOOST_LOG_SUPPORT_XPRESSIVE_HPP_INCLUDED_
#define BOOST_LOG_SUPPORT_XPRESSIVE_HPP_INCLUDED_

#include <string>
#include <boost/xpressive/basic_regex.hpp>
#include <boost/xpressive/regex_constants.hpp>
#include <boost/xpressive/regex_algorithms.hpp>
#include <boost/log/detail/config.hpp>
#include <boost/log/utility/functional/matches.hpp>
#include <boost/log/detail/header.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace aux {

//! This tag type is used if an expression is recognized as a Boost.Xpressive expression
struct boost_xpressive_expression_tag;

//! The metafunction detects the matching expression kind and returns a tag that is used to specialize \c match_traits
template< typename T >
struct matching_expression_kind< xpressive::basic_regex< T > >
{
    typedef boost_xpressive_expression_tag type;
};

//! The matching function implementation
template< typename ExpressionT >
struct match_traits< ExpressionT, boost_xpressive_expression_tag >
{
    typedef ExpressionT compiled_type;
    static compiled_type compile(ExpressionT const& expr) { return expr; }

    template< typename StringT, typename T >
    static bool matches(StringT const& str, xpressive::basic_regex< T > const& expr, xpressive::regex_constants::match_flag_type flags = xpressive::regex_constants::match_default)
    {
        return xpressive::regex_match(str, expr, flags);
    }

    template< typename CharT, typename TraitsT, typename AllocatorT >
    static bool matches(std::basic_string< CharT, TraitsT, AllocatorT > const& str, xpressive::basic_regex< const CharT* > const& expr, xpressive::regex_constants::match_flag_type flags = xpressive::regex_constants::match_default)
    {
        const CharT* p = str.c_str();
        return xpressive::regex_match(p, p + str.size(), expr, flags);
    }
};

} // namespace aux

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_SUPPORT_XPRESSIVE_HPP_INCLUDED_

/* xpressive.hpp
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
*/