/*
 *          Copyright Andrey Semashev 2007 - 2015.
 * Distributed under the Boost Software License, Version 1.0.
 *    (See accompanying file LICENSE_1_0.txt or copy at
 *          http://www.boost.org/LICENSE_1_0.txt)
 */
/*!
 * \file   debug_output_backend.hpp
 * \author Andrey Semashev
 * \date   07.11.2008
 *
 * The header contains a logging sink backend that outputs log records to the debugger.
 */

#ifndef BOOST_LOG_SINKS_DEBUG_OUTPUT_BACKEND_HPP_INCLUDED_
#define BOOST_LOG_SINKS_DEBUG_OUTPUT_BACKEND_HPP_INCLUDED_

#include <string>
#include <boost/log/detail/config.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

#ifndef BOOST_LOG_WITHOUT_DEBUG_OUTPUT

#include <boost/log/sinks/basic_sink_backend.hpp>
#include <boost/log/sinks/frontend_requirements.hpp>
#include <boost/log/attributes/attribute_value_set.hpp>
#include <boost/log/core/record_view.hpp>
#include <boost/log/detail/header.hpp>

namespace boost {

BOOST_LOG_OPEN_NAMESPACE

namespace sinks {

/*!
 * \brief An implementation of a logging sink backend that outputs to the debugger
 *
 * The sink uses Windows API in order to write log records as debug messages, if the
 * application process is run under debugger. The sink backend also provides a specific
 * filter that allows to check whether the debugger is available and thus elide unnecessary
 * formatting.
 */
template< typename CharT >
class basic_debug_output_backend :
    public basic_formatted_sink_backend< CharT, concurrent_feeding >
{
    //! Base type
    typedef basic_formatted_sink_backend< CharT, concurrent_feeding > base_type;

public:
    //! Character type
    typedef typename base_type::char_type char_type;
    //! String type to be used as a message text holder
    typedef typename base_type::string_type string_type;

public:
    /*!
     * Constructor. Initializes the sink backend.
     */
    BOOST_LOG_API basic_debug_output_backend();
    /*!
     * Destructor
     */
    BOOST_LOG_API ~basic_debug_output_backend();

    /*!
     * The method passes the formatted message to debugger
     */
    BOOST_LOG_API void consume(record_view const& rec, string_type const& formatted_message);
};

#ifdef BOOST_LOG_USE_CHAR
typedef basic_debug_output_backend< char > debug_output_backend;      //!< Convenience typedef for narrow-character logging
#endif
#ifdef BOOST_LOG_USE_WCHAR_T
typedef basic_debug_output_backend< wchar_t > wdebug_output_backend;  //!< Convenience typedef for wide-character logging
#endif

} // namespace sinks

BOOST_LOG_CLOSE_NAMESPACE // namespace log

} // namespace boost

#include <boost/log/detail/footer.hpp>

#endif // BOOST_LOG_WITHOUT_DEBUG_OUTPUT

#endif // BOOST_LOG_SINKS_DEBUG_OUTPUT_BACKEND_HPP_INCLUDED_

/* debug_output_backend.hpp
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
*/