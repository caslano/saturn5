
//          Copyright Oliver Kowalke 2017.
// Distributed under the Boost Software License, Version 1.0.
//    (See accompanying file LICENSE_1_0.txt or copy at
//          http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_FIBERS_NUMA_TOPOLOGY_H
#define BOOST_FIBERS_NUMA_TOPOLOGY_H

#include <cstdint>
#include <set>
#include <vector>

#include <boost/config.hpp>

#include <boost/fiber/detail/config.hpp>

#ifdef BOOST_HAS_ABI_HEADERS
# include BOOST_ABI_PREFIX
#endif

namespace boost {
namespace fibers {
namespace numa {

struct node {
    std::uint32_t                   id;
    std::set< std::uint32_t >       logical_cpus;
    std::vector< std::uint32_t >    distance;
};

inline
bool operator<( node const& lhs, node const& rhs) noexcept {
    return lhs.id < rhs.id;
}

BOOST_FIBERS_DECL
std::vector< node > topology();

}}}

#ifdef BOOST_HAS_ABI_HEADERS
# include BOOST_ABI_SUFFIX
#endif

#endif // BOOST_FIBERS_NUMA_TOPOLOGY_H

/* topology.hpp
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
*/