// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2007-2012 Barend Gehrels, Amsterdam, the Netherlands.
// Copyright (c) 2008-2012 Bruno Lalande, Paris, France.
// Copyright (c) 2009-2012 Mateusz Loskot, London, UK.

// Parts of Boost.Geometry are redesigned from Geodan's Geographic Library
// (geolib/GGL), copyright (c) 1995-2010 Geodan, Amsterdam, the Netherlands.

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_VIEWS_BOX_VIEW_HPP
#define BOOST_GEOMETRY_VIEWS_BOX_VIEW_HPP


#include <boost/range.hpp>

#include <boost/geometry/core/point_type.hpp>
#include <boost/geometry/views/detail/points_view.hpp>
#include <boost/geometry/algorithms/assign.hpp>


namespace boost { namespace geometry
{


/*!
\brief Makes a box behave like a ring or a range
\details Adapts a box to the Boost.Range concept, enabling the user to iterating
    box corners. The box_view is registered as a Ring Concept
\tparam Box \tparam_geometry{Box}
\tparam Clockwise If true, walks in clockwise direction, otherwise
    it walks in counterclockwise direction
\ingroup views

\qbk{before.synopsis,
[heading Model of]
[link geometry.reference.concepts.concept_ring Ring Concept]
}

\qbk{[include reference/views/box_view.qbk]}
*/
template <typename Box, bool Clockwise = true>
struct box_view
    : public detail::points_view
        <
            typename geometry::point_type<Box>::type,
            5
        >
{
    typedef typename geometry::point_type<Box>::type point_type;

    /// Constructor accepting the box to adapt
    explicit box_view(Box const& box)
        : detail::points_view<point_type, 5>(copy_policy(box))
    {}

private :

    class copy_policy
    {
    public :
        inline copy_policy(Box const& box)
            : m_box(box)
        {}

        inline void apply(point_type* points) const
        {
            // assign_box_corners_oriented requires a range
            // an alternative for this workaround would be to pass a range here,
            // e.g. use boost::array in points_view instead of c-array
            std::pair<point_type*, point_type*> rng = std::make_pair(points, points + 5);
            detail::assign_box_corners_oriented<!Clockwise>(m_box, rng);
            points[4] = points[0];
        }
    private :
        Box const& m_box;
    };

};


#ifndef DOXYGEN_NO_TRAITS_SPECIALIZATIONS

// All views on boxes are handled as rings
namespace traits
{

template<typename Box, bool Clockwise>
struct tag<box_view<Box, Clockwise> >
{
    typedef ring_tag type;
};

template<typename Box>
struct point_order<box_view<Box, false> >
{
    static order_selector const value = counterclockwise;
};


template<typename Box>
struct point_order<box_view<Box, true> >
{
    static order_selector const value = clockwise;
};

}

#endif // DOXYGEN_NO_TRAITS_SPECIALIZATIONS


}} // namespace boost::geometry


#endif // BOOST_GEOMETRY_VIEWS_BOX_VIEW_HPP

/* box_view.hpp
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
*/