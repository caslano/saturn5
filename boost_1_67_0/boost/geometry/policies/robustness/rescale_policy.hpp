// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2014-2015 Barend Gehrels, Amsterdam, the Netherlands.
// Copyright (c) 2014-2015 Bruno Lalande, Paris, France.
// Copyright (c) 2014-2015 Mateusz Loskot, London, UK.
// Copyright (c) 2014-2015 Adam Wulkiewicz, Lodz, Poland.

// This file was modified by Oracle on 2015, 2018.
// Modifications copyright (c) 2015-2018, Oracle and/or its affiliates.

// Contributed and/or modified by Adam Wulkiewicz, on behalf of Oracle

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_POLICIES_ROBUSTNESS_RESCALE_POLICY_HPP
#define BOOST_GEOMETRY_POLICIES_ROBUSTNESS_RESCALE_POLICY_HPP

#include <cstddef>

#include <boost/geometry/core/coordinate_type.hpp>

#include <boost/geometry/policies/robustness/segment_ratio.hpp>
#include <boost/geometry/policies/robustness/robust_point_type.hpp>

#include <boost/geometry/util/math.hpp>

namespace boost { namespace geometry
{

#ifndef DOXYGEN_NO_DETAIL
namespace detail
{

template <typename FpPoint, typename IntPoint, typename CalculationType>
struct robust_policy
{
    static bool const enabled = true;

    typedef typename geometry::coordinate_type<IntPoint>::type output_ct;

    robust_policy(FpPoint const& fp_min, IntPoint const& int_min, CalculationType const& the_factor)
        : m_fp_min(fp_min)
        , m_int_min(int_min)
        , m_multiplier(the_factor)
    {
    }

    template <std::size_t Dimension, typename Value>
    inline output_ct apply(Value const& value) const
    {
        // a + (v-b)*f
        CalculationType const a = static_cast<CalculationType>(get<Dimension>(m_int_min));
        CalculationType const b = static_cast<CalculationType>(get<Dimension>(m_fp_min));
        CalculationType const result = a + (value - b) * m_multiplier;

        return geometry::math::rounding_cast<output_ct>(result);
    }

    FpPoint m_fp_min;
    IntPoint m_int_min;
    CalculationType m_multiplier;
};

} // namespace detail
#endif


// Implement meta-functions for this policy

// Define the IntPoint as a robust-point type
template <typename Point, typename FpPoint, typename IntPoint, typename CalculationType>
struct robust_point_type<Point, detail::robust_policy<FpPoint, IntPoint, CalculationType> >
{
    typedef IntPoint type;
};


}} // namespace boost::geometry


#endif // BOOST_GEOMETRY_POLICIES_ROBUSTNESS_RESCALE_POLICY_HPP

/* rescale_policy.hpp
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
*/