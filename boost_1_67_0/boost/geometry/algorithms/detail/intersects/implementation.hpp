// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2007-2014 Barend Gehrels, Amsterdam, the Netherlands.
// Copyright (c) 2008-2014 Bruno Lalande, Paris, France.
// Copyright (c) 2009-2014 Mateusz Loskot, London, UK.

// This file was modified by Oracle on 2013-2017.
// Modifications copyright (c) 2013-2017, Oracle and/or its affiliates.

// Contributed and/or modified by Menelaos Karavelas, on behalf of Oracle
// Contributed and/or modified by Adam Wulkiewicz, on behalf of Oracle

// Parts of Boost.Geometry are redesigned from Geodan's Geographic Library
// (geolib/GGL), copyright (c) 1995-2010 Geodan, Amsterdam, the Netherlands.

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_ALGORITHMS_DETAIL_INTERSECTS_IMPLEMENTATION_HPP
#define BOOST_GEOMETRY_ALGORITHMS_DETAIL_INTERSECTS_IMPLEMENTATION_HPP


#include <deque>

#include <boost/geometry/algorithms/detail/intersects/interface.hpp>
#include <boost/geometry/algorithms/detail/disjoint/implementation.hpp>

#include <boost/geometry/algorithms/detail/overlay/self_turn_points.hpp>
#include <boost/geometry/policies/disjoint_interrupt_policy.hpp>
#include <boost/geometry/policies/robustness/no_rescale_policy.hpp>

#include <boost/geometry/strategies/relate.hpp>


namespace boost { namespace geometry
{

#ifndef DOXYGEN_NO_DETAIL
namespace detail { namespace intersects
{

template <typename Geometry>
struct self_intersects
{
    static bool apply(Geometry const& geometry)
    {
        concepts::check<Geometry const>();

        typedef typename geometry::point_type<Geometry>::type point_type;
        typedef typename strategy::relate::services::default_strategy
                <
                    Geometry, Geometry
                >::type strategy_type;

        typedef detail::overlay::turn_info<point_type> turn_info;

        std::deque<turn_info> turns;

        typedef detail::overlay::get_turn_info
            <
                detail::overlay::assign_null_policy
            > turn_policy;

        strategy_type strategy;

        detail::disjoint::disjoint_interrupt_policy policy;
    // TODO: skip_adjacent should be set to false
        detail::self_get_turn_points::get_turns
            <
                false, turn_policy
            >::apply(geometry, strategy, detail::no_rescale_policy(), turns, policy, 0, true);
        return policy.has_intersections;
    }
};

}} // namespace detail::intersects
#endif // DOXYGEN_NO_DETAIL

}} // namespace boost::geometry

#endif // BOOST_GEOMETRY_ALGORITHMS_DETAIL_INTERSECTS_IMPLEMENTATION_HPP

/* implementation.hpp
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
*/