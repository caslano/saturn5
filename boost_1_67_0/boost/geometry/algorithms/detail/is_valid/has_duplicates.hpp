// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2014-2019, Oracle and/or its affiliates.

// Contributed and/or modified by Menelaos Karavelas, on behalf of Oracle

// Licensed under the Boost Software License version 1.0.
// http://www.boost.org/users/license.html

#ifndef BOOST_GEOMETRY_ALGORITHMS_DETAIL_IS_VALID_HAS_DUPLICATES_HPP
#define BOOST_GEOMETRY_ALGORITHMS_DETAIL_IS_VALID_HAS_DUPLICATES_HPP

#include <boost/core/ignore_unused.hpp>
#include <boost/range.hpp>

#include <boost/geometry/core/closure.hpp>

#include <boost/geometry/policies/compare.hpp>
#include <boost/geometry/policies/is_valid/default_policy.hpp>

#include <boost/geometry/views/closeable_view.hpp>
#include <boost/geometry/algorithms/validity_failure_type.hpp>


namespace boost { namespace geometry
{


#ifndef DOXYGEN_NO_DETAIL
namespace detail { namespace is_valid
{

template <typename Range, closure_selector Closure, typename CSTag>
struct has_duplicates
{
    template <typename VisitPolicy>
    static inline bool apply(Range const& range, VisitPolicy& visitor)
    {
        boost::ignore_unused(visitor);

        typedef typename closeable_view<Range const, Closure>::type view_type;
        typedef typename boost::range_const_iterator
            <
                view_type const
            >::type const_iterator;

        view_type view(range);

        if ( boost::size(view) < 2 )
        {
            return ! visitor.template apply<no_failure>();
        }

        geometry::equal_to
            <
                typename boost::range_value<Range>::type,
                -1,
                CSTag
            > equal;

        const_iterator it = boost::const_begin(view);
        const_iterator next = it;
        ++next;
        for (; next != boost::const_end(view); ++it, ++next)
        {
            if ( equal(*it, *next) )
            {
                return ! visitor.template apply<failure_duplicate_points>(*it);
            }
        }
        return ! visitor.template apply<no_failure>();
    }
};



}} // namespace detail::is_valid
#endif // DOXYGEN_NO_DETAIL


}} // namespace boost::geometry



#endif // BOOST_GEOMETRY_ALGORITHMS_DETAIL_IS_VALID_HAS_DUPLICATES_HPP

/* has_duplicates.hpp
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
*/