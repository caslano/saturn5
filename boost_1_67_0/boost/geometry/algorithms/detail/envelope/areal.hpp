// Boost.Geometry

// Copyright (c) 2018 Oracle and/or its affiliates.

// Contributed and/or modified by Vissarion Fysikopoulos, on behalf of Oracle
// Contributed and/or modified by Adam Wulkiewicz, on behalf of Oracle

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_ALGORITHMS_DETAIL_ENVELOPE_AREAL_HPP
#define BOOST_GEOMETRY_ALGORITHMS_DETAIL_ENVELOPE_AREAL_HPP

#include <boost/geometry/core/cs.hpp>
#include <boost/geometry/core/tags.hpp>

#include <boost/geometry/iterators/segment_iterator.hpp>

#include <boost/geometry/algorithms/detail/envelope/range.hpp>
#include <boost/geometry/algorithms/detail/envelope/linear.hpp>

#include <boost/geometry/algorithms/dispatch/envelope.hpp>

namespace boost { namespace geometry
{

#ifndef DOXYGEN_NO_DETAIL
namespace detail { namespace envelope
{

struct envelope_polygon
{
    template <typename Polygon, typename Box, typename Strategy>
    static inline void apply(Polygon const& polygon, Box& mbr, Strategy const& strategy)
    {
        typename ring_return_type<Polygon const>::type ext_ring
            = exterior_ring(polygon);

        if (geometry::is_empty(ext_ring))
        {
            // if the exterior ring is empty, consider the interior rings
            envelope_multi_range
                <
                    envelope_range
                >::apply(interior_rings(polygon), mbr, strategy);
        }
        else
        {
            // otherwise, consider only the exterior ring
            envelope_range::apply(ext_ring, mbr, strategy);
        }
    }
};


}} // namespace detail::envelope
#endif // DOXYGEN_NO_DETAIL

#ifndef DOXYGEN_NO_DISPATCH
namespace dispatch
{


template <typename Ring>
struct envelope<Ring, ring_tag>
    : detail::envelope::envelope_range
{};

template <typename Polygon>
struct envelope<Polygon, polygon_tag>
    : detail::envelope::envelope_polygon
{};

template <typename MultiPolygon>
struct envelope<MultiPolygon, multi_polygon_tag>
    : detail::envelope::envelope_multi_range
        <
            detail::envelope::envelope_polygon
        >
{};


} // namespace dispatch
#endif // DOXYGEN_NO_DISPATCH


}} // namespace boost::geometry

#endif // BOOST_GEOMETRY_ALGORITHMS_DETAIL_ENVELOPE_AREAL_HPP

/* areal.hpp
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
*/