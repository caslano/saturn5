// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2012-2019 Barend Gehrels, Amsterdam, the Netherlands.

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_ALGORITHMS_DETAIL_BUFFER_LINE_LINE_INTERSECTION_HPP
#define BOOST_GEOMETRY_ALGORITHMS_DETAIL_BUFFER_LINE_LINE_INTERSECTION_HPP


#include <boost/geometry/arithmetic/infinite_line_functions.hpp>
#include <boost/geometry/algorithms/detail/make/make.hpp>
#include <boost/geometry/strategies/buffer.hpp>

namespace boost { namespace geometry
{


#ifndef DOXYGEN_NO_DETAIL
namespace detail { namespace buffer
{

// TODO: it might once be changed this to proper strategy
struct line_line_intersection
{
    template <typename Point>
    static inline strategy::buffer::join_selector
    apply(Point const& pi, Point const& pj,
          Point const& qi, Point const& qj,
          Point& ip)
    {
        typedef typename coordinate_type<Point>::type ct;
        typedef model::infinite_line<ct> line_type;

        line_type const p = detail::make::make_infinite_line<ct>(pi, pj);
        line_type const q = detail::make::make_infinite_line<ct>(qi, qj);

        if (arithmetic::intersection_point(p, q, ip))
        {
            return strategy::buffer::join_convex;
        }

        // The lines do not intersect.
        // Distinguish between continuing lines (having a similar direction)
        // and spikes (having the opposite direction).
        return arithmetic::similar_direction(p, q)
            ? strategy::buffer::join_continue
            : strategy::buffer::join_spike
            ;
    }
};


}} // namespace detail::buffer
#endif // DOXYGEN_NO_DETAIL


}} // namespace boost::geometry


#endif // BOOST_GEOMETRY_ALGORITHMS_DETAIL_BUFFER_LINE_LINE_INTERSECTION_HPP

/* line_line_intersection.hpp
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
*/