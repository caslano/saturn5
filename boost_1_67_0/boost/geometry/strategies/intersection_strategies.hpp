// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2007-2012 Barend Gehrels, Amsterdam, the Netherlands.

// This file was modified by Oracle on 2016, 2017.
// Modifications copyright (c) 2016-2017, Oracle and/or its affiliates.
// Contributed and/or modified by Adam Wulkiewicz, on behalf of Oracle

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_STRATEGIES_INTERSECTION_HPP
#define BOOST_GEOMETRY_STRATEGIES_INTERSECTION_HPP


#include <boost/geometry/core/point_type.hpp>
#include <boost/geometry/geometries/segment.hpp>

#include <boost/geometry/policies/relate/intersection_points.hpp>
#include <boost/geometry/policies/relate/direction.hpp>
#include <boost/geometry/policies/relate/tupled.hpp>

#include <boost/geometry/strategies/intersection.hpp>
#include <boost/geometry/strategies/intersection_result.hpp>
#include <boost/geometry/strategies/side.hpp>

#include <boost/geometry/strategies/cartesian/intersection.hpp>
#include <boost/geometry/strategies/cartesian/side_by_triangle.hpp>
#include <boost/geometry/strategies/spherical/intersection.hpp>
#include <boost/geometry/strategies/spherical/ssf.hpp>

#include <boost/geometry/policies/robustness/segment_ratio_type.hpp>


namespace boost { namespace geometry
{


/*!
\brief "compound strategy", containing a segment-intersection-strategy
       and a side-strategy
 */
template
<
    typename Tag,
    typename Geometry1,
    typename Geometry2,
    typename IntersectionPoint,
    typename RobustPolicy,
    typename CalculationType = void
>
struct intersection_strategies
{
private :
    // for development BOOST_STATIC_ASSERT((! boost::is_same<RobustPolicy, void>::type::value));

    typedef typename geometry::point_type<Geometry1>::type point1_type;
    typedef typename geometry::point_type<Geometry2>::type point2_type;
    typedef typename model::referring_segment<point1_type const> segment1_type;
    typedef typename model::referring_segment<point2_type const> segment2_type;

    typedef segment_intersection_points
    <
        IntersectionPoint,
        typename detail::segment_ratio_type
        <
            IntersectionPoint, RobustPolicy
        >::type
    > ip_type;

public:
    typedef policies::relate::segments_tupled
        <
            policies::relate::segments_intersection_points
                <
                    ip_type
                > ,
            policies::relate::segments_direction
        > intersection_policy_type;

    typedef typename strategy::intersection::services::default_strategy
            <
                Tag,
                CalculationType
            >::type segment_intersection_strategy_type;

    typedef typename strategy::side::services::default_strategy
        <
            Tag,
            CalculationType
        >::type side_strategy_type;

    typedef RobustPolicy rescale_policy_type;
};


}} // namespace boost::geometry


#endif // BOOST_GEOMETRY_STRATEGIES_INTERSECTION_HPP

/* intersection_strategies.hpp
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
*/