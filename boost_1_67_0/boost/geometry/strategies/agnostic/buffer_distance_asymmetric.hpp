// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2012-2014 Barend Gehrels, Amsterdam, the Netherlands.

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_STRATEGIES_AGNOSTIC_BUFFER_DISTANCE_ASYMMETRIC_HPP
#define BOOST_GEOMETRY_STRATEGIES_AGNOSTIC_BUFFER_DISTANCE_ASYMMETRIC_HPP

#include <boost/core/ignore_unused.hpp>

#include <boost/geometry/strategies/buffer.hpp>
#include <boost/geometry/util/math.hpp>


namespace boost { namespace geometry
{

namespace strategy { namespace buffer
{


/*!
\brief Let the buffer for linestrings be asymmetric
\ingroup strategies
\tparam NumericType \tparam_numeric
\details This strategy can be used as DistanceStrategy for the buffer algorithm.
    It can be applied for (multi)linestrings. It uses a (potentially) different
    distances for left and for right. This means the (multi)linestrings are
    interpreted having a direction.

\qbk{
[heading Example]
[buffer_distance_asymmetric]
[heading Output]
[$img/strategies/buffer_distance_asymmetric.png]
[heading See also]
\* [link geometry.reference.algorithms.buffer.buffer_7_with_strategies buffer (with strategies)]
\* [link geometry.reference.strategies.strategy_buffer_distance_symmetric distance_symmetric]
}
 */
template<typename NumericType>
class distance_asymmetric
{
public :
    //! \brief Constructs the strategy, two distances must be specified
    //! \param left The distance (or radius) of the buffer on the left side
    //! \param right The distance on the right side
    distance_asymmetric(NumericType const& left,
                NumericType const& right)
        : m_left(left)
        , m_right(right)
    {}

#ifndef DOXYGEN_SHOULD_SKIP_THIS
    //! Returns the distance-value for the specified side
    template <typename Point>
    inline NumericType apply(Point const& , Point const& ,
                buffer_side_selector side)  const
    {
        NumericType result = side == buffer_side_left ? m_left : m_right;
        return negative() ? math::abs(result) : result;
    }

    //! Used internally, returns -1 for deflate, 1 for inflate
    inline int factor() const
    {
        return negative() ? -1 : 1;
    }

    //! Returns true if both distances are negative
    inline bool negative() const
    {
        return m_left < 0 && m_right < 0;
    }

    //! Returns the max distance distance up to the buffer will reach
    template <typename JoinStrategy, typename EndStrategy>
    inline NumericType max_distance(JoinStrategy const& join_strategy,
            EndStrategy const& end_strategy) const
    {
        boost::ignore_unused(join_strategy, end_strategy);

        NumericType const left = geometry::math::abs(m_left);
        NumericType const right = geometry::math::abs(m_right);
        NumericType const dist = (std::max)(left, right);
        return (std::max)(join_strategy.max_distance(dist),
                          end_strategy.max_distance(dist));
    }

    //! Returns the distance at which the input is simplified before the buffer process
    inline NumericType simplify_distance() const
    {
        NumericType const left = geometry::math::abs(m_left);
        NumericType const right = geometry::math::abs(m_right);
        return (std::min)(left, right) / 1000.0;
    }

#endif // DOXYGEN_SHOULD_SKIP_THIS

private :
    NumericType m_left;
    NumericType m_right;
};


}} // namespace strategy::buffer


}} // namespace boost::geometry

#endif // BOOST_GEOMETRY_STRATEGIES_AGNOSTIC_BUFFER_DISTANCE_ASYMMETRIC_HPP

/* buffer_distance_asymmetric.hpp
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
*/