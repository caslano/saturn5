// Boost.Geometry (aka GGL, Generic Geometry Library)

// Copyright (c) 2007-2012 Barend Gehrels, Amsterdam, the Netherlands.
// Copyright (c) 2008-2012 Bruno Lalande, Paris, France.
// Copyright (c) 2009-2012 Mateusz Loskot, London, UK.
// Copyright (c) 2017 Adam Wulkiewicz, Lodz, Poland.

// This file was modified by Oracle on 2015.
// Modifications copyright (c) 2015 Oracle and/or its affiliates.

// Contributed and/or modified by Adam Wulkiewicz, on behalf of Oracle

// Parts of Boost.Geometry are redesigned from Geodan's Geographic Library
// (geolib/GGL), copyright (c) 1995-2010 Geodan, Amsterdam, the Netherlands.

// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_STRATEGIES_CARTESIAN_CENTROID_AVERAGE_HPP
#define BOOST_GEOMETRY_STRATEGIES_CARTESIAN_CENTROID_AVERAGE_HPP


#include <cstddef>

#include <boost/geometry/algorithms/assign.hpp>
#include <boost/geometry/algorithms/detail/signed_size_type.hpp>
#include <boost/geometry/arithmetic/arithmetic.hpp>
#include <boost/geometry/core/coordinate_type.hpp>
#include <boost/geometry/core/point_type.hpp>
#include <boost/geometry/strategies/centroid.hpp>


namespace boost { namespace geometry
{

namespace strategy { namespace centroid
{


/*!
\brief Centroid calculation taking average of points
\ingroup strategies
*/
template
<
    typename PointCentroid,
    typename Point = PointCentroid
>
class average
{
private :

    /*! subclass to keep state */
    class sum
    {
        friend class average;
        signed_size_type count;
        PointCentroid centroid;

    public :
        inline sum()
            : count(0)
        {
            assign_zero(centroid);
        }
    };

public :
    typedef sum state_type;
    typedef PointCentroid centroid_point_type;
    typedef Point point_type;

    static inline void apply(Point const& p, sum& state)
    {
        add_point(state.centroid, p);
        state.count++;
    }

    static inline bool result(sum const& state, PointCentroid& centroid)
    {
        centroid = state.centroid;
        if ( state.count > 0 )
        {
            divide_value(centroid, state.count);
            return true;
        }
        return false;
    }

};


#ifndef DOXYGEN_NO_STRATEGY_SPECIALIZATIONS


namespace services
{

template <typename Point, std::size_t DimensionCount, typename Geometry>
struct default_strategy
<
    cartesian_tag,
    pointlike_tag,
    DimensionCount,
    Point,
    Geometry
>
{
    typedef average
        <
            Point,
            typename point_type<Geometry>::type
        > type;
};

} // namespace services

#endif


}} // namespace strategy::centroid


}} // namespace boost::geometry


#endif // BOOST_GEOMETRY_STRATEGIES_CARTESIAN_CENTROID_AVERAGE_HPP

/* centroid_average.hpp
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
*/