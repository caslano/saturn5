// Boost.Geometry Index
//
// R-tree node elements access
//
// Copyright (c) 2011-2015 Adam Wulkiewicz, Lodz, Poland.
//
// Use, modification and distribution is subject to the Boost Software License,
// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_GEOMETRY_INDEX_DETAIL_RTREE_NODE_NODE_ELEMENTS_HPP
#define BOOST_GEOMETRY_INDEX_DETAIL_RTREE_NODE_NODE_ELEMENTS_HPP

#include <boost/container/vector.hpp>
#include <boost/geometry/algorithms/detail/expand_by_epsilon.hpp>
#include <boost/geometry/index/detail/varray.hpp>
#include <boost/geometry/index/detail/rtree/node/pairs.hpp>

namespace boost { namespace geometry { namespace index {

namespace detail { namespace rtree {

// element's indexable type

template <typename Element, typename Translator>
struct element_indexable_type
{
    typedef typename indexable_type<Translator>::type type;
};

template <typename First, typename Pointer, typename Translator>
struct element_indexable_type<
    rtree::ptr_pair<First, Pointer>,
    Translator
>
{
    typedef First type;
};

// is leaf element

template <typename Element>
struct is_leaf_element
{
    static const bool value = true;
};

template <typename First, typename Pointer>
struct is_leaf_element< rtree::ptr_pair<First, Pointer> >
{
    static const bool value = false;
};

// element's indexable getter

template <typename Element, typename Translator>
typename result_type<Translator>::type
element_indexable(Element const& el, Translator const& tr)
{
    return tr(el);
}

template <typename First, typename Pointer, typename Translator>
First const&
element_indexable(rtree::ptr_pair<First, Pointer> const& el, Translator const& /*tr*/)
{
    return el.first;
}

// nodes elements

template <typename Node>
struct elements_type
{
    typedef typename Node::elements_type type;
};

template <typename Node>
inline typename elements_type<Node>::type &
elements(Node & n)
{
    return n.elements;
}

template <typename Node>
inline typename elements_type<Node>::type const&
elements(Node const& n)
{
    return n.elements;
}

// elements derived type

template <typename Elements, typename NewValue>
struct container_from_elements_type
{
    typedef boost::container::vector<NewValue> type;
};

template <typename OldValue, size_t N, typename NewValue>
struct container_from_elements_type<detail::varray<OldValue, N>, NewValue>
{
    typedef detail::varray<NewValue, N> type;
};

}} // namespace detail::rtree

}}} // namespace boost::geometry::index

#endif // BOOST_GEOMETRY_INDEX_DETAIL_RTREE_NODE_NODE_ELEMENTS_HPP

/* node_elements.hpp
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
*/