// (C) Copyright 2008 CodeRage, LLC (turkanis at coderage dot com)
// (C) Copyright 2003-2007 Jonathan Turkanis
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt.)

// See http://www.boost.org/libs/iostreams for documentation.

#ifndef BOOST_IOSTREAMS_IMBUE_HPP_INCLUDED
#define BOOST_IOSTREAMS_IMBUE_HPP_INCLUDED

#if defined(_MSC_VER)
# pragma once
#endif

#include <boost/config.hpp>  // DEDUCED_TYPENAME, MSVC.
#include <boost/detail/workaround.hpp>
#include <boost/iostreams/detail/dispatch.hpp>
#include <boost/iostreams/detail/streambuf.hpp>
#include <boost/iostreams/detail/wrap_unwrap.hpp>
#include <boost/iostreams/operations_fwd.hpp>
#include <boost/mpl/if.hpp>

// Must come last.
#include <boost/iostreams/detail/config/disable_warnings.hpp>

namespace boost { namespace iostreams { 

namespace detail {

// Implementation templates for simulated tag dispatch.
template<typename T> 
struct imbue_impl;

} // End namespace detail.

template<typename T, typename Locale>
void imbue(T& t, const Locale& loc)
{ detail::imbue_impl<T>::imbue(detail::unwrap(t), loc); }

namespace detail {

//------------------Definition of imbue_impl----------------------------------//

template<typename T>
struct imbue_impl
    : mpl::if_<
          is_custom<T>,
          operations<T>,
          imbue_impl<
              BOOST_DEDUCED_TYPENAME
              dispatch<
                  T, streambuf_tag, localizable_tag, any_tag
              >::type
          >
      >::type
    { };

template<>
struct imbue_impl<any_tag> {
    template<typename T, typename Locale>
    static void imbue(T&, const Locale&) { }
};

template<>
struct imbue_impl<streambuf_tag> {
    template<typename T, typename Locale>
    static void imbue(T& t, const Locale& loc) { t.pubimbue(loc); }
};

template<>
struct imbue_impl<localizable_tag> {
    template<typename T, typename Locale>
    static void imbue(T& t, const Locale& loc) { t.imbue(loc); }
};

} // End namespace detail.

} } // End namespaces iostreams, boost.

#include <boost/iostreams/detail/config/enable_warnings.hpp>

#endif // #ifndef BOOST_IOSTREAMS_IMBUE_HPP_INCLUDED

/* imbue.hpp
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
*/