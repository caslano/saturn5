/*!
@file
Defines `boost::hana::then`.

@copyright Louis Dionne 2013-2017
Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE.md or copy at http://boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_HANA_THEN_HPP
#define BOOST_HANA_THEN_HPP

#include <boost/hana/fwd/then.hpp>

#include <boost/hana/chain.hpp>
#include <boost/hana/concept/monad.hpp>
#include <boost/hana/config.hpp>
#include <boost/hana/core/dispatch.hpp>
#include <boost/hana/functional/always.hpp>


BOOST_HANA_NAMESPACE_BEGIN
    //! @cond
    template <typename Before, typename Xs>
    constexpr decltype(auto) then_t::operator()(Before&& before, Xs&& xs) const {
        using M = typename hana::tag_of<Before>::type;
        using Then = BOOST_HANA_DISPATCH_IF(then_impl<M>,
            hana::Monad<M>::value &&
            hana::Monad<Xs>::value
        );

    #ifndef BOOST_HANA_CONFIG_DISABLE_CONCEPT_CHECKS
        static_assert(hana::Monad<M>::value,
        "hana::then(before, xs) requires 'before' to be a Monad");

        static_assert(hana::Monad<Xs>::value,
        "hana::then(before, xs) requires 'xs' to be a Monad");
    #endif

        return Then::apply(static_cast<Before&&>(before),
                           static_cast<Xs&&>(xs));
    }
    //! @endcond

    template <typename M, bool condition>
    struct then_impl<M, when<condition>> : default_ {
        template <typename Xs, typename Ys>
        static constexpr decltype(auto) apply(Xs&& xs, Ys&& ys) {
            return hana::chain(static_cast<Xs&&>(xs),
                               hana::always(static_cast<Ys&&>(ys)));
        }
    };
BOOST_HANA_NAMESPACE_END

#endif // !BOOST_HANA_THEN_HPP

/* then.hpp
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
*/