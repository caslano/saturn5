/*!
@file
Defines a replacement for `std::decay`, which is sometimes too slow at
compile-time.

@copyright Louis Dionne 2013-2017
Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE.md or copy at http://boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_HANA_DETAIL_DECAY_HPP
#define BOOST_HANA_DETAIL_DECAY_HPP

#include <boost/hana/config.hpp>

#include <type_traits>


BOOST_HANA_NAMESPACE_BEGIN namespace detail {
    //! @ingroup group-details
    //! Equivalent to `std::decay`, except faster.
    //!
    //! `std::decay` in libc++ is implemented in a suboptimal way. Since
    //! this is used literally everywhere by the `make<...>` functions, it
    //! is very important to keep this as efficient as possible.
    //!
    //! @note
    //! `std::decay` is still being used in some places in the library.
    //! Indeed, this is a peephole optimization and it would not be wise
    //! to clutter the code with our own implementation of `std::decay`,
    //! except when this actually makes a difference in compile-times.
    template <typename T, typename U = typename std::remove_reference<T>::type>
    struct decay {
        using type = typename std::remove_cv<U>::type;
    };

    template <typename T, typename U>
    struct decay<T, U[]> { using type = U*; };
    template <typename T, typename U, std::size_t N>
    struct decay<T, U[N]> { using type = U*; };

    template <typename T, typename R, typename ...A>
    struct decay<T, R(A...)> { using type = R(*)(A...); };
    template <typename T, typename R, typename ...A>
    struct decay<T, R(A..., ...)> { using type = R(*)(A..., ...); };
} BOOST_HANA_NAMESPACE_END

#endif // !BOOST_HANA_DETAIL_DECAY_HPP

/* decay.hpp
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
*/