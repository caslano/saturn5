/*!
@file
Defines `boost::hana::eval`.

@copyright Louis Dionne 2013-2017
Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE.md or copy at http://boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_HANA_EVAL_HPP
#define BOOST_HANA_EVAL_HPP

#include <boost/hana/fwd/eval.hpp>

#include <boost/hana/config.hpp>
#include <boost/hana/core/dispatch.hpp>
#include <boost/hana/detail/wrong.hpp>
#include <boost/hana/functional/id.hpp>


BOOST_HANA_NAMESPACE_BEGIN
    //! @cond
    template <typename Expr>
    constexpr decltype(auto) eval_t::operator()(Expr&& expr) const {
        return eval_impl<typename hana::tag_of<Expr>::type>::apply(
            static_cast<Expr&&>(expr)
        );
    }
    //! @endcond

    template <typename T, bool condition>
    struct eval_impl<T, when<condition>> : default_ {
        template <typename Expr>
        static constexpr auto eval_helper(Expr&& expr, int)
            -> decltype(static_cast<Expr&&>(expr)())
        { return static_cast<Expr&&>(expr)(); }

        template <typename Expr>
        static constexpr auto eval_helper(Expr&& expr, long)
            -> decltype(static_cast<Expr&&>(expr)(hana::id))
        { return static_cast<Expr&&>(expr)(hana::id); }

        template <typename Expr>
        static constexpr auto eval_helper(Expr&&, ...) {
            static_assert(detail::wrong<Expr>{},
            "hana::eval(expr) requires the expression to be a hana::lazy, "
            "a nullary Callable or a unary Callable that may be "
            "called with hana::id");
        }

        template <typename Expr>
        static constexpr decltype(auto) apply(Expr&& expr)
        { return eval_helper(static_cast<Expr&&>(expr), int{}); }
    };
BOOST_HANA_NAMESPACE_END

#endif // !BOOST_HANA_EVAL_HPP

/* eval.hpp
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
*/