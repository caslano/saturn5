/*
@file
Defines `boost::hana::experimental::type_name`.

@copyright Louis Dionne 2013-2017
Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE.md or copy at http://boost.org/LICENSE_1_0.txt)
 */

#ifndef BOOST_HANA_EXPERIMENTAL_TYPE_NAME_HPP
#define BOOST_HANA_EXPERIMENTAL_TYPE_NAME_HPP

#include <boost/hana/config.hpp>
#include <boost/hana/string.hpp>

#include <cstddef>
#include <utility>


BOOST_HANA_NAMESPACE_BEGIN namespace experimental {
    namespace detail {
        struct cstring {
            char const* ptr;
            std::size_t length;
        };

        // Note: We substract the null terminator from the string sizes below.
        template <typename T>
        constexpr cstring type_name_impl2() {

        #if defined(__clang__)
            constexpr char const* pretty_function = __PRETTY_FUNCTION__;
            constexpr std::size_t total_size = sizeof(__PRETTY_FUNCTION__) - 1;
            constexpr std::size_t prefix_size = sizeof("boost::hana::experimental::detail::cstring boost::hana::experimental::detail::type_name_impl2() [T = ") - 1;
            constexpr std::size_t suffix_size = sizeof("]") - 1;
        #else
            #error "No support for this compiler."
        #endif

            return {pretty_function + prefix_size, total_size - prefix_size - suffix_size};
        }

        template <typename T, std::size_t ...i>
        auto type_name_impl1(std::index_sequence<i...>) {
            constexpr auto name = detail::type_name_impl2<T>();
            return hana::string<*(name.ptr + i)...>{};
        }
    } // end namespace detail

    //! @ingroup group-experimental
    //! Returns a `hana::string` representing the name of the given type, at
    //! compile-time.
    //!
    //! This only works on Clang (and apparently MSVC, but Hana does not work
    //! there as of writing this). Original idea taken from
    //! https://github.com/Manu343726/ctti.
    template <typename T>
    auto type_name() {
        constexpr auto name = detail::type_name_impl2<T>();
        return detail::type_name_impl1<T>(std::make_index_sequence<name.length>{});
    }
} BOOST_HANA_NAMESPACE_END

#endif // !BOOST_HANA_EXPERIMENTAL_TYPE_NAME_HPP

/* type_name.hpp
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
*/