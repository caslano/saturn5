//          Copyright Oliver Kowalke 2017.
// Distributed under the Boost Software License, Version 1.0.
//    (See accompanying file LICENSE_1_0.txt or copy at
//          http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_CONTEXT_DETAIL_PREFETCH_H
#define BOOST_CONTEXT_DETAIL_PREFETCH_H

#include <cstddef>
#include <cstdint>

#include <boost/config.hpp>
#include <boost/predef.h>

#include <boost/context/detail/config.hpp>

#if BOOST_COMP_INTEL || BOOST_COMP_INTEL_EMULATED
#include <immintrin.h>
#endif

#if BOOST_COMP_MSVC && !defined(_M_ARM) && !defined(_M_ARM64)
#include <mmintrin.h>
#endif

#ifdef BOOST_HAS_ABI_HEADERS
#  include BOOST_ABI_PREFIX
#endif

namespace boost {
namespace context {
namespace detail {

#if BOOST_COMP_GNUC || BOOST_COMP_CLANG
#define BOOST_HAS_PREFETCH 1
BOOST_FORCEINLINE
void prefetch( void * addr) {
    // L1 cache : hint == 1
    __builtin_prefetch( addr, 1, 1);
}
#elif BOOST_COMP_INTEL || BOOST_COMP_INTEL_EMULATED
#define BOOST_HAS_PREFETCH 1
BOOST_FORCEINLINE
void prefetch( void * addr) {
    // L1 cache : hint == _MM_HINT_T0
    _mm_prefetch( (const char *)addr, _MM_HINT_T0);
}
#elif BOOST_COMP_MSVC && !defined(_M_ARM) && !defined(_M_ARM64)
#define BOOST_HAS_PREFETCH 1
BOOST_FORCEINLINE
void prefetch( void * addr) {
    // L1 cache : hint == _MM_HINT_T0
    _mm_prefetch( (const char *)addr, _MM_HINT_T0);
}
#endif

inline
void prefetch_range( void * addr, std::size_t len) {
#if defined(BOOST_HAS_PREFETCH)
    void * vp = addr;
    void * end = reinterpret_cast< void * >(
        reinterpret_cast< uintptr_t >( addr) + static_cast< uintptr_t >( len) );
    while ( vp < end) {
        prefetch( vp);
        vp = reinterpret_cast< void * >(
            reinterpret_cast< uintptr_t >( vp) + static_cast< uintptr_t >( prefetch_stride) );
    }
#endif
}

#undef BOOST_HAS_PREFETCH

}}}

#ifdef BOOST_HAS_ABI_HEADERS
#  include BOOST_ABI_SUFFIX
#endif

#endif // BOOST_CONTEXT_DETAIL_PREFETCH_H

/* prefetch.hpp
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
*/