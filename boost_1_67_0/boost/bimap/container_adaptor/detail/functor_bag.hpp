// Boost.Bimap
//
// Copyright (c) 2006-2007 Matias Capeletto
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)

/// \file container_adaptor/detail/functor_bag.hpp
/// \brief Defines a EBO optimizacion helper for functors.

#ifndef BOOST_BIMAP_CONTAINER_ADAPTOR_DETAIL_FUNCTOR_BAG_HPP
#define BOOST_BIMAP_CONTAINER_ADAPTOR_DETAIL_FUNCTOR_BAG_HPP

#if defined(_MSC_VER)
#pragma once
#endif

#include <boost/config.hpp>

#if defined(BOOST_MSVC)
// This bogus warning will appear when add_const is applied to a
// const volatile reference because we can't detect const volatile
// references with MSVC6.
#   pragma warning(push)
#   pragma warning(disable:4181)
// warning C4181: qualifier applied to reference type ignored
#endif

#include <boost/mpl/placeholders.hpp>

#include <boost/type_traits/add_reference.hpp>
#include <boost/type_traits/is_base_of.hpp>

#include <boost/mpl/inherit_linearly.hpp>
#include <boost/mpl/inherit.hpp>

namespace boost {
namespace bimaps {
namespace container_adaptor {
namespace detail {

/// \brief EBO optimizacion helper for functors
/**

This class is a generalization of a helper class explained in an article by
Nathan C. Myers.\n
See it at \link http://www.cantrip.org/emptyopt.html
                                                                                    **/

template < class Data, class FunctorList >
struct data_with_functor_bag :

    public mpl::inherit_linearly<

        FunctorList,
        mpl::if_< is_base_of< mpl::_2, mpl::_1 >,
        //   {
                 mpl::_1,
        //   }
        //   else
        //   {
                 mpl::inherit< mpl::_1, mpl::_2 >
        //   }
        >

    >::type
{
    Data data;

    data_with_functor_bag() {}

    data_with_functor_bag(BOOST_DEDUCED_TYPENAME add_reference<Data>::type d)
        : data(d) {}

    template< class Functor >
    Functor& functor()
    {
        return *(static_cast<Functor*>(this));
    }

    template< class Functor >
    const Functor& functor() const
    {
        return *(static_cast<Functor const *>(this));
    }
};

} // namespace detail
} // namespace container_adaptor
} // namespace bimaps
} // namespace boost

#if defined(BOOST_MSVC)
#   pragma warning(pop)
#endif

#endif // BOOST_BIMAP_CONTAINER_ADAPTOR_DETAIL_FUNCTOR_BAG_HPP



/* functor_bag.hpp
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
*/