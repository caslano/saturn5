//  boost polymorphic_pointer_cast.hpp header file  ----------------------------------------------//
//  (C) Copyright Boris Rasin and Antony Polukhin 2014-2019.
//  Distributed under the Boost
//  Software License, Version 1.0. (See accompanying file
//  LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

//  See http://www.boost.org/libs/conversion for Documentation.

#ifndef BOOST_CONVERSION_POLYMORPHIC_POINTER_CAST_HPP
#define BOOST_CONVERSION_POLYMORPHIC_POINTER_CAST_HPP

# include <boost/config.hpp>
# include <boost/assert.hpp>
# include <boost/pointer_cast.hpp>
# include <boost/throw_exception.hpp>
# include <boost/utility/declval.hpp>
# ifdef BOOST_NO_CXX11_DECLTYPE
#   include <boost/typeof/typeof.hpp>
# endif

#ifdef BOOST_HAS_PRAGMA_ONCE
#   pragma once
#endif

namespace boost
{
//  See the documentation for descriptions of how to choose between
//  static_pointer_cast<>, dynamic_pointer_cast<>, polymorphic_pointer_cast<> and polymorphic_pointer_downcast<>

//  polymorphic_pointer_downcast  --------------------------------------------//

    //  BOOST_ASSERT() checked polymorphic downcast.  Crosscasts prohibited.
    //  Supports any type with static_pointer_cast/dynamic_pointer_cast functions:
    //  built-in pointers, std::shared_ptr, boost::shared_ptr, boost::intrusive_ptr, etc.

    //  WARNING: Because this cast uses BOOST_ASSERT(), it violates
    //  the One Definition Rule if used in multiple translation units
    //  where BOOST_DISABLE_ASSERTS, BOOST_ENABLE_ASSERT_HANDLER
    //  NDEBUG are defined inconsistently.

    //  Contributed by Boris Rasin

    namespace detail
    {
        template <typename Target, typename Source>
        struct dynamic_pointer_cast_result
        {
#ifdef BOOST_NO_CXX11_DECLTYPE
            BOOST_TYPEOF_NESTED_TYPEDEF_TPL(nested, dynamic_pointer_cast<Target>(boost::declval<Source>()))
            typedef typename nested::type type;
#else
            typedef decltype(dynamic_pointer_cast<Target>(boost::declval<Source>())) type;
#endif
        };
    }

    template <typename Target, typename Source>
    inline typename detail::dynamic_pointer_cast_result<Target, Source>::type
    polymorphic_pointer_downcast (const Source& x)
    {
        BOOST_ASSERT(dynamic_pointer_cast<Target> (x) == x);
        return static_pointer_cast<Target> (x);
    }

    template <typename Target, typename Source>
    inline typename detail::dynamic_pointer_cast_result<Target, Source>::type
    polymorphic_pointer_cast (const Source& x)
    {
        typename detail::dynamic_pointer_cast_result<Target, Source>::type tmp
            = dynamic_pointer_cast<Target> (x);
        if ( !tmp ) boost::throw_exception( std::bad_cast() );

        return tmp;
    }

} // namespace boost

#endif  // BOOST_CONVERSION_POLYMORPHIC_POINTER_CAST_HPP

/* polymorphic_pointer_cast.hpp
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
*/