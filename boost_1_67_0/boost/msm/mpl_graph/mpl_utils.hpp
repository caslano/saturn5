// Copyright 2008-2010 Gordon Woodhull
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_MSM_MPL_GRAPH_MPL_UTILS_HPP_INCLUDED
#define BOOST_MSM_MPL_GRAPH_MPL_UTILS_HPP_INCLUDED

#include <boost/mpl/fold.hpp>
#include <boost/mpl/map.hpp>
#include <boost/mpl/set.hpp>
#include <boost/mpl/insert.hpp>
#include <boost/mpl/if.hpp>
#include <boost/mpl/has_key.hpp>
#include <boost/mpl/at.hpp>
#include <boost/mpl/and.hpp>

namespace boost {
namespace msm {
namespace mpl_graph {
namespace mpl_utils {
    
// This is a grab bag of little metafunctions I expect already
// exist under some name I haven't looked for

// I figure there are probably better ways to do all of these things,
// but for now I'll just write some utilities to isolate my ignorance

template<typename Seq>
struct as_map :
    mpl::fold<Seq, 
              mpl::map<>, 
              mpl::insert<mpl::_1, mpl::_2> >
{};
template<typename Seq>
struct as_set :
    mpl::fold<Seq, 
              mpl::set<>, 
              mpl::insert<mpl::_1, mpl::_2> >
{};

template<typename AssocSeq, typename Key, typename Default>
struct at_or_default :
    mpl::if_<typename mpl::has_key<AssocSeq, Key>::type,
             typename mpl::at<AssocSeq, Key>::type,
             Default>
{};

template<typename Seq1, typename Seq2>
struct set_equal :
    mpl::fold<Seq2,
              mpl::true_,
              mpl::and_<mpl::_1, 
                        mpl::has_key<typename as_set<Seq1>::type, 
                                     mpl::_2 > > >
{};
                                       
}
}
}
}              

#endif // BOOST_MSM_MPL_GRAPH_MPL_UTILS_HPP_INCLUDED

/* mpl_utils.hpp
UoClcMEphajiSXLmSFbXT27w/BEwvvrk3UGZ70jtHOEJjLMB0zEaYD3WvI9Ch8SzbTzzXyuwDtyhMEDSuA+aP6TLJoxHdSeD0hrBFdoNlGpQzJo6DjGWdHV/JW2ojTXh5mQbDnVtiCZPsv5k7EYkPKgvyxKLL0FHLFUC4goCEnj4M/iM7ICaobnhMr+x611YG+vNf+4DnjxIvZG7/XkHqHu5VwVoeiL6RjVuMV8Y90BbytQGSYBHHhJf5GOV+RleViysKRtQO+d4y4AYxhy8ObnCpYvk584uhBzk4GHBNcq1VrwhJpF95S0Hng4l4aHoQvYSGOZD3kb2ArLEYyeYD7NOYanjsM3f0XAWSFQCwfVJGsp9bthnaUB3Cf0mNO2hPiI9Abn1xToU8BXozVAel2h11uB3T6UGMZPn8zJEzHGao10B8s+mSWvdV/JVpOazvqOgTpV9jP4nXg/Eb51f5nxK6bQ0CHAQgQfOjnUsgHOCY4oPgO2hTMCJ73jHkEeOwtfZK6BPOJDp+G/1+AKy1ffFImh319r/Ii1Kcr7vScItxonRdG7sHCw5+wphLTCTF7NuwC84Y3agvPQqYm5ht6PPocp9Kaumucii1qH5flkeExgNTN0AuMNyRkoasNdxr2hXQhr3qjgSsPtlDxPzrV8F/NmOyYGZFt5zfCjbOph6cJCkSO3hcBiVMOirwH5d9coCRFbFSIZvCX3FAcSL/zMPtIUlwR5X/FdMqkQtqm5V9j43OBYbi7ADERfYvSIN2RCzIMUJt9ZbYuoonNNhzQJEWoA8hmvsAFrnGAoB3FUJ2UTrCvRUTbid1z60fbLjjC6KL7lNWPHuuYQmisQogoMoTwLgPEuYSDhbjFAugnW0DkkiDBsukyyzXfD0RMWqrY1l2bEAxEwMvhCo02VRyWFxOmsd6w7AHYtq9FovcMCWIPojJVtUO/dfQQaAGQlzbgaEF1cWYmDzQUB1C3U4QSFWeamnazsF0Nej9RY40r7bmMnFTkbokpZBGrcKp6oobH5awGrF7FsA2ucgV7jTYRvG3Rtk3c74lhJdijb4ZQ9s24O4wUTSluYNUluW9kZzotMNrDqoBdPBZRC42mMa7+1Q5wNJ/lbM7YT343cTChoMHGliHoRPytjsPvoD5ZdVmX7MxtHD6BvPD4/+2O9U2h18fi59QSa+Z44BUTp0jEC4FqRtaCwQkoUgSg9yV8jO3yZSBCLAKhxaUQinqD1jgEehGNW/89GooE1uCmCHj1gPzNWoP/xd+rAIZC+mum/bnEQNDnCoNv51TPzYp12ITSFzoMNdBSJU9YRqMqV5QvO4I9XT+kIBf52Y/E4Br4zd67+dAkoNJo/NynTKHWD9sDxwUq8Y/wFspJb4Y5xl+ohHxgUeLs3LiSyv5RjULkM4xvxSy/xiT6F6BbozEWoFFcUnxOBhDkZMJRW4vRaRKoQYgPaZxKwj6lCp+wUjSuEJUDn6FCrCybUJiZf47yMHTkG5hMYjYifCOoMUm5o1yqKD4jfqhAkZUtX1gmyAa0rlWWVwjPMuQOzUAEU0z0IABxrnvlrzQh6V6IkEuMaBbAbEBmEGNPBH6XAYRzTqfioG4i0w97CMt4OCPUs04cyxYeg7pS6khRLaQAj4gTgI8K5SAG4cQPwXhLf+7CZg+BPRj6SEIxkm1K1JSAdDUxPWJwXtMfudvUGjMs74tYZynju94z3XagtyrSLfvvuR+fG+vziY1BnUxn/1htmY7A7MBTI8jenjBk4ZQCXJ5SYymtpo9XhV+NgzZHWUNmjeIbQm+EHc7KdXHImPQC7iTsyAs9wCt1FtTHOK0j20s0BSwG8YfaZYebASNGB885BqQcj50+A64jgmHS4CS5oFIBrDEk2IOaLs8+owqIfDw1Zt/7EscJaXjimCfZwaV+gYVW0XPtrqiye0FGwVnXDr+5lHsBDljAU0bwqaIHOK0FXtQzr4kP8ca8lgKs+o9FVVpluJjWKV9zWxzDfE8i/R4ET1H9RnKLSj0MBO9rkJfMcaeAYsEpUdCFfhVA5VFKTuznhebsk0fX+0FnUuAJ8zemgi28qtB/Tq3P/nITQFjIP2X6hRgoZ3XgJdnwg3eMGhbMGvrUB7jgdIo/thd9MjPaAPxZMvDkcZ596JUsFpowGvU39zdqgfPdgPHfBNTdAzGypNweK1wXJCX9DhU1Dza/APRKgM7uuya4kQbkO+ulNB62zQLiWaVChTmSTqU0y5BWRKffCNYLzUtggAAiz90/0ZIb9EcIERiYtSEAe4VQrUdzKp2WC0SwJZB06fP4DHhULfJf/90+7ywez7QRw1+8UyIK6lSGbiSRGpBxH2AprDrho3+yttcFsC3hz4ThH8ufSHID9IQG544v4c+m+TN1HwVJDfeFh0rjReYM94MIyyAJqfLGPxkfBZof0qXoUkrqlIhtJJMqmp6HoAf13wj9O/iXUotrCoYJ3MKVqwr8qaVgAmAUp1yCvbiSxg+01AqxxP+B30CrSJcGtVbZjniT3nfD3xpsgUKy7rouUJyAoSoOB3APRP4Cjc+RkvFYjloOo1NK6Q0GV4NHOg8GKLy1xgCioQvMbk+JZGEiQOGmwey1ATyKtjYnEhpTGwnYr4SsFAzWH5COCRCYARKoCRChVv0n6RTzooaRPo7ONAHwLz8s9oNwBr1H9QJuXXrA+A4QfwZ3HAR6VAF86A98MBL1R75ubZoCeRQ4cB7Up3KjzgbZcgJuFCXRD0gXx1IGDGgb0H+S/tCrtUA2AVJ+ApkqHL9GGoLYAtD8FF6VLHQPKqQV4bczQeWRxcKTPFy84SZFovLUHLSzll59dM6cbFKrTnJsrrOi2Jtk3WpzMM1s+R5V7dKt1aF/TgYwV9exd42K7kGR1xMtuiJTeEk6muxWSZ7A7Bq8tX2JUK7hkApekW3nbWd2JAFQdjOi1k80eBSugCFZRBIJUrH4QMepzqBctdZvABWp7SO1AfLSU/cgEAIBvTD0Qud/jq+d8E4KAAREYAyPdzk8wFWUmAuJRz85ZYYg0C443+4hOtvGKic/uk/g8Wqj6sTx2R+fbqBAf5jcoFlc6BupMCgNQhUmenVmcWzve3L8TF0qZK7S3/VDcysSwrP2zFg5JaanZrRLOoTvoax6WgTDJgFHpxjv9LBPegUpJKDpfizK/QOtzjwlrFJHQ2AV2zispGjBARSGd/EP2hwFiu6/v1XZ35/f7aneX/fStn/8DCOFMwYpZHboyV1JPEp3lyhVlAzpq/Q7DLXzV+js+IcCz9CAObjnGlWCqyI0fuTuBLYJzDLoYX9Puv7FkC+MiibLV409YmxQC6RexbH38bQreJTqiTU7JbVeZ7wAGzudxVhpg6auqHMnXkZjIV/9KPxnXni1Zulee1mFyLVTgijH7/N3gBFvYJDCxVOY33F8W/43XPnFd9FC1DBXrs4BXxMsbQZvHU2pgVx8BkYc1AAr0K0qrqx2hjzSfeq1N+iYP7tW8MYQqKVQm/ZrEtdzSkDDHwkCwsNDzcAHbP4s5ie4SspyCwnpFQQ3pJyDdfz7gyE/xqa5kfjPHhUpZOw3pJyXejznGxVr5yVxUXF5mDTembjPeVriylGTTMmCOW8Nr8v2bQWIZsAQ5BRxR2ENhK1jXA715fne0RtW/yGFgcdGSkIj9SGxOR6bz9kOC2FR+dz908Nf65mt9W+St8JFZGGgoSLL6NmeEa7Fik55dmdAn7KmaZJfYAoctLLJKL5w5e7hfX1+v2hRbFbaNRSekrcNdoinHbtFM83pMjR/U8wrwqOTmdsxp3l9n1u77Ghqu+ZGVG0Bd2JyUXMHyvbo5c577C6/SoQd5Qary0LWxRbfIZ+MlzF0PVSlxF2o1nrF0veLdT5V2B4J+s1u7LGxuc04x1z5ti8spcHzk/BokEOXrac0XWUA+O8pvSSEjnjiLfcfarTqvNmLvnyQGzcJd0xkuTANWddeeg5WrkRWot7aEtXave769wecb7a3z/s3mjjVTlSx23ae+W9/uWF1l/iK94rp79BHA+bC++j5/Dwg/t7FV76PpOta5/VzY+Zvb0cfTTeB5Lmlq3YmdTIbfio6DeejBnXMuvpSP370l6eZ+WXYAEqr2WH+Is38FqE6nPMZlYmrD633bZ/oKCUxf//h8AJoDZfzs/vFJul3snuN5BuIkpQNzYuI5eb9QOpMb+2+9In9T0621WEUHRka4xGhTUG6w0jLVsrNd/MTJFJvCPgV6HFPWx1kYsohGZjqejJNevbw6KCq/13s41iKoNKPcurvAaDc8tHY3MUd1vIzA0RfXVBxuon2QEfWKCnNTfGxq1Qa0zAFRYM2RdgxxL9YAaXlxwRLIu2F/6x3D6dJ2h2ZpFk15NG4y2vQrd//EXs5aH+ySafM8M39xvfdMFz2yXmnmMezf2uV88Kvs1bIFDdL1GEd227uIaVnXcsya7+amFzwev0O28ZN5rbyG22dS/4+TqB5NbDvLOCrF5OslthOOKcWfOMKNntDFd2OXZnZuDlJax3Wd3bGoybDM72r7Rpr7NZkz9ESUabYKOn/+14+tfrmTPfj5OjTMqHp3aornPXzv+/3cP1fQwwtg/9TDOfevhEf+jzycBSNrnd/pPn98/bNS4kCh1DOR/7OONQfU4j9zDDls8uh+u/2VDRWDd/suyU2/vdG7QI3/clySx/4AGTS4ZKZ1+27pixc1jgZPqDT3nnTTxUal7T/vlL092cv9pfXFozkK3Pi9nsQcb5ju8CfaraIJH9B60YdecDIMbHVtd7Hn/TtB167n40Oxhq4ZkrXXyqW/9csXtQMGzb8vLjQbWW9qtevuu9yOlbjsio54sfTL8ouXBvBnBKc2OOibcL7tqn1l4yGDyhthlQ0NOvbSOOdIlqWOJqXfy0uQlLutiPVqH/pwVE3u7/lB8/sD5xNGbQWe7r+Xz858R9a6+3tSicv6xm/sGzRfuGm2ZbL+37S7XM5H5x3rPaGf6qd7RrX1Wmd63dIradrGmjxP1g2BF+iPz39vOAOlQU61f1N/+TcvUSUDRtRp8FApBHWs1eKuvPRoT7aL1eGy0a/TX8mmNzvz+WoOkTn+8NjAs8K8vhYejXYICXUbhrkEhUUisYQMKEQhL75zuUvvdKiH8m3cDFfx3uxyvRW5dT4dtqt/DqtV171v9gqyVYfQRi8eotfq0g5ENaprw9+z3F5ZQMRcn5CzpqPOuWDQCMXGbZravE2Gz965jSXpRiuG2pN6O61e7GdreufTLpAttQk1u/YjnjD1e6dwuiHjYPXisxeNTo+p/MM6gwuPnNj39dO+9vU/v2J0e3+Di8piSH/3vHmVau8c9jtt/0cnIbtO21z3z5nRYUj/hSsPqO/4Tx/UZVt+za5dxFtnP2NV7+Ftm4y2rbSflJEzZEVb5W9qP5k07vZ421ExaM/RB0/ONp4/VubIWWR0WOd/fWzlkq353kzTnzt1b3LY/fOpzXErfU0l7Eud8XyHl9N0wiejkOuVgiZ1Z4/HPRzcberksEw1ynttdOXh52rnjsn1oUP/VR8NiduS3FKctLT11xLbYaAJKNB4HVDXwK021qtgxbY9huuNPZQ3nrMpftfJfjEnOn3nCGjWp4Yn6A0OiwtRmd7brPi7I9ZupqNe46bcn7HzVe5HteofExEZEjcEExNW8APcNiRobrf2h82jti+JV7EQDeGJjY10nwpuj4c0abKIiA+2cgjoAi7ki5xqMOP5+dPfwwOhoOwJoKjhEYx2VhoDj0DcHgyEGI35nP6AwDtHf2G/6nj9PqyFqUOO3THuFBYWGjQoc981V1Wls0mdMyNiIaKwVstWmbtXENyQotP9Y9VvEa3OkrLUFTJDyCBsVpn5dcXeP30fpYtfr203Mdv3hP9rt0wMDw8OCa27Qnoh/O77hPxz/P7Lp7uSnSQ1a/vBo7LGlSWiO/b6PbVtaxb6pc5C4vHDFu6ErOs94t3FvlVf+RnYiPzu/zqrS1Z+bWQxNyF7c+EqWX9Hg9c29TlmtmRWR19Nh01rTnUMXWJglDopyGLTeIXzH4ML297tmDsNubHJ8kFk1Whn1Yp3l0sWNiiy9S6JutLyZs37azarV/KinzxOnZE4fWtltufn+rd3d74V4V66btfHa3vyVhzcnHKkXZjG1slHHPvzkZ2M/KW/q3zG7u/Rz4xPpobcmRry3NItyR12Trxwa+cbXZM+5iFZD2o67UeAXusgm4S2fVOA4/UT/x6VBGUEDKHLGAmHMqlnDV5+J/rBn/odfP7Xa1vz7N+7ytrff2HQKrEisVtyWjTUq/StlutWwF4cYRKUT6VhS529eJjqIcFEhpJHYn6Do3t+95imNwTzUI9gZSUgFdb2AJC99UpWnvo61IeoI7PaVVA30TW3/HbT/zhIZovG1+DwEBaG2tfjcprZhq304JNRi8n+djUro/zQbYPPaNHp51dZnU9pV9jy3cNGNCuN2r365umUtamhiVjPH72BQsIZGliBPf0SnFjU+UQcr/HeMO8+rUVn2ptt5HQbJK6//eLh8YUKz3hP3TNm1Yn6+k33De7M6fL5c53rC3bd+XNb8E46WBT+wl9IOlLwctPmgfezQsNMxFrdK1jntvLCsQpeU47B6Tl3H09jcsuAma6+OV6xjv9zemN650j27U6cW8UsH2+VFRgfv9O06/OV9/UXLIONdQfzCDZ64dMnD2L+7f4PE0n6Luizb/XnAmV5k5+Fej9/rfuz+3Nr4pVGnXwvyLy9sJCoNLMvxXXan3+YX7bsQ+6HDmelL5oft2VYXv/HT+sznTHlkoz3DFz89PObyycc5XvfPX2hfWZRftb2inzi7TtgqalLbzPP729KBm9JOjvvAO+CDwt7X340vRYkmdYFx33xl3H66R9scB1Y3T3qx4lxRT+LMvzDu+f9XjMsjtuYFGJAoUCOi7f58CGClrhFRdoETYrTvWA8J1hhZ/TN3mCdyryFc8V8I12fCiPCwIDufqLCxgVGT/pwt7brUHCtmkuoAKY2HEcJRbRcKvzK/8/D/Tnn5T1T8zqHnsMwb8w7jT4sGfXj18Ey7qTubpX7OWvtDynt6jOWNCdPRNKPQaRc6TWh1saVp8r2wlC3MprQpCaWr7r9keg2/JFi9TCoqfNeeOuJYj92SHLTWepNp5vbsTxdHj0j0vt7mVoubr3+ZKczr2GfW0MX6Pue2TLSc1t4w/tiuqT/8dOdX4yMtvNLCnpzIEMUuOvneikf5D1PG/zxAf0bXroebuH9Du63mW8YmLFzsOOXyccX2eecVHx/Njj29f+DeyYIv6t/i3gjyS6srlUOWOc165G3de+rQ3zKWrZp27+KrjAmvXjV53+1JVbOoYley+eacLd5Tjx7uYy4Neo1+3kwv/Dlh4o1mrpkXp5Iuc79R8WdYkY9/mycjaxg0DIFn/TODDvxvMmhQZPQfZtfAALVq/u/Z9q9Zc+zvRGtuFIiGb/g+fSgajAahAU3NANijQjqPChuJwKOiOl9P9xhZLXp0rXnSjgULx5y6nDC6yMvGeUozV+TY1OEr4YZHjIr48+dOjNYeU49E1oiOC+qEOqS3T3dMcqgVoP/0psigQMJlFKUJDVlLDZxQu/+mGrSsEZamyOp3YTGoJTH/6L+/gb+XT8/uLrgLW8t//60u1BaOaddCtpy8U364Apm9dec+GuwmwHz9jRoMtH9MZuQFXvA6qN85MCu4wc3kJXmHC8wf7Zycbj/tXje2h0v4lWnjm8eXR27dU9HnYQPz/h+bDPsck9q97azp7WyXWHXL9g5KPryBLDrtWWYxq120YeHW5OCxJeOXPvY0DmgyuC9X7Wc15nNRxotJY0zNu0Q9YexNzI45PFU8Vrd6Gri2YM9i/2rp6oId30khdFGO5Oa0aI3lZYd2BT3tLixu/X2yN3leLH7E/ByRaXeUfN7u5i6LJ/mrP2zIabOEiEgq8zvsGB9T3+/zhBZByiUsfs2iFivW5fefOHNo2s4lH3e8WHbo+7Nt+p9M7B+0u5GFz+yGLSTffivmOadJS5ubrjZ2PbMs02vJNSzRaCWowTIDvR5NP/e/lAD/Jjf8cVI0fXoKavZ74c0MMfPaJ17B5P7xWz2sPqr9bBPk8McbjTDA3YBeuuwxdW9nC4Fv4xtPflvv/gz8InTFH28xx6Ar0u0T/v47tWp9b9VfCNsoUa/LmJB5scOBpGdHrerZrw3yp1Zdxn1bvvYvtR/aft6YD8ENj70qmPp5jUTUHbP9bPE4d8+s+/Vcj98hrq2y2+U7YkPH7OGpv9V92dXJ7MPq/wIfqstnl0EAgENL1b17fBPVEji+SZM2fbFRCBblESFAFdRoUdtb0YQmdAMpVHlVKIKvWhG1FxIEQaCkFeMhgqJX7r1e5fp+oKCohYLaUqDlXR4iCGoR1A0FLKBQnvudmbN5tRW9v8/3+8cPPt3snsecmTkzc+acM3v2ViXt6ademlztH3P2t49G9+v9WMr0wY/0fvU38+NvzBj7t8fKs/5+Mivx0+xVFxc1z390wMa/7bnmmjtHbtPmTJS/+tdZ72UTNkm7Hv62e+LQN/ePv+K1Z1ILpvWR7x5aVThs8KtX245vfKWz6WlHu0nPBPs/mDzp2ZTtf3s8f3Zpcan5ztTREzp0zJ72oDMt2H+V5tmD/3np1i/HOq27hIH7T8278Vj7MZ1+ueaJ6qrbRypnH5y5/Z6n59h/v12++T75yrpjYu/97/53jjbZOkebEOF5/I1zNM1gtH9D8Zz0/3qRqo1VsigxGmtNi5ai5MgavwaEKJyjv1Gk2R0eU5NhvcWaMbqVEHX9uf+5b8S8/inz3mhfdc3qD3eUGbq3IQ7tfy3buXH3kseTnuzy+q3N35TcndP7n7Ny+padGG5447/LLTXLv5gy9oHev5y6vnnmkyN/qZQGXf75rtSu4z7ppdy25TNh1qmz12UrnbV3BdqXDltWcOPaLwvXBDv8ev/im3afW3g848Y7Xn+09vF1S+cs+Gpsj0XvPBgX6Pf5Ns0d7/VPaupbEPcjW2Dpu/KpzKHdG00vVvVZlvDP2i8eG+j9euvig/GJG587ct+c5zVTpzww+JsNB3/u+uHiR5aMEv6+PGnvkLmb9W9e8dCBF9uvGje57n1hffF487P9Xh6u6bfb/cOstQ2+boeXPmw=
*/