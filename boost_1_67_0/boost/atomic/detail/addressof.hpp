/*
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * Copyright (c) 2018 Andrey Semashev
 */
/*!
 * \file   atomic/detail/addressof.hpp
 *
 * This header defines \c addressof helper function. It is similar to \c boost::addressof but it is more
 * lightweight and also contains a workaround for some compiler warnings.
 */

#ifndef BOOST_ATOMIC_DETAIL_ADDRESSOF_HPP_INCLUDED_
#define BOOST_ATOMIC_DETAIL_ADDRESSOF_HPP_INCLUDED_

#include <boost/atomic/detail/config.hpp>

#ifdef BOOST_HAS_PRAGMA_ONCE
#pragma once
#endif

// Detection logic is based on boost/core/addressof.hpp
#if defined(BOOST_MSVC_FULL_VER) && BOOST_MSVC_FULL_VER >= 190024215
#define BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF
#elif defined(BOOST_GCC) && BOOST_GCC >= 70000
#define BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF
#elif defined(__has_builtin)
#if __has_builtin(__builtin_addressof)
#define BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF
#endif
#endif

namespace boost {
namespace atomics {
namespace detail {

template< typename T >
BOOST_FORCEINLINE T* addressof(T& value) BOOST_NOEXCEPT
{
#if defined(BOOST_ATOMIC_DETAIL_HAS_BUILTIN_ADDRESSOF)
    return __builtin_addressof(value);
#else
    // Note: The point of using a local struct as the intermediate type instead of char is to avoid gcc warnings
    // if T is a const volatile char*:
    // warning: casting 'const volatile char* const' to 'const volatile char&' does not dereference pointer
    // The local struct makes sure T is not related to the cast target type.
    struct opaque_type;
    return reinterpret_cast< T* >(&const_cast< opaque_type& >(reinterpret_cast< const volatile opaque_type& >(value)));
#endif
}

} // namespace detail
} // namespace atomics
} // namespace boost

#endif // BOOST_ATOMIC_DETAIL_ADDRESSOF_HPP_INCLUDED_

/* addressof.hpp
A+5SLShXzUivEyZLxNbyMyPXy00G9QWhvhDpm1D/sB6JH+xXjpRlfhgIR0ksEb+fcoZ3J20rIf5GI5KpQZMhUyYIMjZHn6xuU8qXKwmMDNf0BycRulnGt0k+gB+tf0SbVBgRlIiP21OwOHCvUT+qiKfLxd/30x88GYx/lTIJS//pScurbxFPAY1+bTeki9mxMIg4eTsFAcZapIVJ0B1XcKoGVkHWSggR0aA96v1kAo39mthNrRPMt2Ow5gk8WZCm+/Hw4CA581nTdxP3I1Ydj42NlV+u720ivsFLlAYIQYSQiN22qX8q7s73JxLYjMJdRTGaVrPes7kaWK3m2bL9CzTEF0GlIEu6kQvnfm4s6ghxBaLczixMR0jebffz4us+oSE9x7cWEmu2UyULwUOoj7nbGyNTjnJouuM98Uk0NREutcFRpV+fDiA4VS/Jo1mC7kV7GA8T/JtIGXjc92kSMneiX7toUEkpi5IBeajmpVngVzQHB/EOp+P9um8cOhbHMOVxemMkSFJLE0FGI8tF6ttAu1YQc/UY6trWIBLjyDAmEupRfLykSFTrb7+GU+iXMqw8yMVHHRRjQUZsvklJXS14Be1y5MO7qxkl0wDIlOGpZIct3bwInRL0Itmd8geMdFtVaGoXLoJonCJpU+HzB1bxsu6JxNHPD7+yb44N07TrRUe3hWW9yfHGg++emAt56qO557fXECgSaJCojbrKooVv0YkMSGhc6I5bn4bpwYeeXAkOMNvINZbpair4RV5qm1Wl83agoI6DQIfQuzBDnNiH3g5MqyCUa4gS3Ixhxf07kW7cvBINAGmXlky6jVDBm7wK2DwVKZ0ImnGlC033JFzY0ASVl24UtL3HJFQVHN3zuFaobxvwidL4iDxtRfduAQnBoyHeJI4m2vCzG6lzqmnw01gi+cFtqxwc1oDQTn+yHjrzPGCI+nIibSoN6pf6d8MjybjhkdvxpwFXljBEyuI+xBAbD1n7xgAWLOnT2Bg/QQiV2EQwNjKqRQQkaUhWB/lBkar5cJvCrsBEkykBKUoy9a0fSS3cC37SsARHtA/GB5pEHzqTE+E5By/+s6sHkWYa2rMXs+hQSvct/hs/lAUPbY5n2EFkgD1h4g8Kwln2GCrEefGBSNA7kmAynnS6w0kX+0KDmDygYt9Axo518ASjq0fxdHmtLDUWF8iXyNU24LB2xlSzU4OyWgn6XIKMQuhwQ/Mvog8rMKanz8Nk/ae0LO07MYJYycInpaSOuiZ5n2eIy+sf3QnaYMaN87eJWOF6c4wJkAs9uzsNHujKUm1nwhLzAJMVZ8/QfrSYisvD0EAHFZxFMrxvP5pjMXPuuopbX6tY7BLsCEJYwyQsyUSpoVTAOriA6OTZiS5xRmoEta9a3UW1vPoPGy2s2jUQoJ12NtYzRxdjCvDi5V1OmcffLMEopbw/cFy+MlNAb4xwMbsmoyel8NAQYBNQfNnnmTCNHkl3MBS8Gy0924c3csdDKa5a6cwF/QRa5iCf7F377puy4GNZAtbzLbuqJY3Jvo/jiummOFeAsBEHMzNzd/wfIGClfpQL4TsvqMXDMGKBRL5B91wCF38f7BGPNYj6RK1/rXFkd1zpfGwxf5PiF61oqugGIMopqpdUkqNBI6qFrfiibb4VCtKpYVqMEFuvu+lgxoB5UbBxJD5IAZXnC3srJWn9XBdqFoIlmQ4MT31xjFxXy0mKZXrbKtahwIeGCFsiMcpgO5WTpzxhqjED5JUh9Y5H5BzyAJz7gLmoe22Y6W3o10puWYCFHOOIjnoqAawM/4UREPkvLpyCsbWO4P3Uyj2u870CMRbe7zfAIGHtVX1vuY2q8eEYUub+Fhv1plRHDa2b6aFdmhAZoIsydZ2Hyd0ZA/ZxX3vYOuvt3zmO495A72XggT4uMJmaOQoJEfPW++mPxw9GhzrNNeU7HYLSIicFXdVwtyKHiOznrTTGlfD7lxDlP+6gNE6HGpzRju29tjcWq9/JZG0ba9SQkZgT0WbTLodA0G/ytGKN058WnVVybBF+7XkTjwWEUbGZa1gDeeSURwSQxGA5+XA7SbICerkTaL8JExT/lJuZQ+BYc97+fYosX7WJo/5MV55qY9o8nfhmVQpihfR5PkEGwHwjx7UbMCZiTHnAqGPF+v4S99jjvoMorYXFk8wIkkJywwJo8WlvYIScQz9/oJjnt8GoiGNQQUfnakH2ExwLwyOENgRNAPxQswD+LvDXPktie2Vgl8Ghoy91zpebkKxkSpBvt6XAEDWeGHmGyl/7YbYaTcbmy2m3UziXLKEAZuP3OjI2StDqPYrj2kTfvJMpkpPyi5/hyfAMAdXkEV1d6FkvAMPDpVy2xyd4vG4h/wQcjAPAdym9l0UUzZyHDymHgXf2VUktvh4s9nfOLcU0f5S2S+Uk9E8W8Ii6VPKQW2cCALLEeWSDORbmC/26er9tXuAPOJFmPxKJya/zJxZI8yx7SqgCM59lpIQxZ779cQcAhNfoVQQsSvJ5BiY5ZAI0PKCcSycFkEAJT188OYF0DtjI9GL1N9xTDKdNEDRKsM9OyfkfLXSw2+bis+vyeJei7nTr/I+7jOkjk8wOUE/X6YcxBBCZkRu74VBE+sMuTl24sjb2hH1efRL+SJQcYiTIrnvhbkIcKU+LNYgVbS+V4ymVEMoIX81Y69kWngXcVdIMuQGn5RYbtTYtBEtUXKDgxhhX89u1+/6Up9cf10rUwPpSA2rBZpvLJX4PWyBAU1lnby9OZcEO72iYWXfKEoxoT36uNk57lN/Fgj5S/hFTyea/NjsRssBTKCrZaJCTLpkIhtwV1E+D98TbT/4cOW83xLTB+usOaU4kK7rOsOn608nTiApUp5zZc3J4IXwKEfQ3kz+qcTGZq092/FY2SpyQLTYqurMQ9z9/no3CKwUss4O7vHQ2+dtMte1/N80mmDpwgU/9TXRmpqMC+nbbsEyhCmCfVg7ZMy3kSD7BiIFaOUbiEZ4wQvMQAYZTTKMyWWWVyvhUqrRE8QFTbD0TCSDBqcTB8iB07+UtXnMoZ0L8klJqxouJ79dhCh8A2Y4m6oSDK0hw1oYSk7lbD1QtyeXexetBqa5v3Kiyg+Jfl+wCPtBBwAgyCK6S68/3MsXHP6ZbcfTR6fjotxoLwIm/3BNXlFkpxDaRHa0sXAoPyst0YnttQzrvTpfzCs+Bi/FDVx3dV02FA2vEO+t9vm6nHOKnPWz1QKD18MYZNurdI+w/PHlDLtXRbU4I5xVGcwtwm+WcA4S29SJdQuOlnGTOoaMRH46EYzcT18xE+IoyMpUsVKHCkhvRoLk9G+WVjGWWNnvazke7CQuVz3vdiYPnrPloPRAJVHVFfL6q74RSB7whfm1WANygsbLRnR4WHAYJccZsbzd9IJSIHdYPZLYNR4jSF15R9hGZz5GiAjBykrGaAKfA2jUdxgkkFn0Ji9Qo8bFc0Md6i7u4BJKxDZvFEl8wVJ0aRDyjWK0DfdqJuXqwvVEgHvqw9Kg9POvSFjVuhMIWD3DgbxkQDhxDuqF2xIRzwpmj+odxyQnMBzf87SN+ZYdolaQEPKxSXSupZJtS2d0jHtXkPxcKwQIe7WQXIp9palAOiwYFl/buGIoYu98OSdvJfjCSwmtQFtsE95SGO/YAZ7d2U8ChEIGxZEAEMgJrp04k/UGw0VSbAz1YqAo0xpruBGZ86Tw31DwB9iPfd7Ff/77tCG/AqqNlZQXGnaBHDoMLEyVhjOfKy5fV/ul7pg/i3YzULUnHQWx9K//rbN0sAHGINDQ8f8cUtW4eluOtGw5yi++jpUX0j2jfOpsqhVFOrQc/eZfAR7KFNQmv1dbVork/mxyUrlAXvALR9KcQMhLL52AubqhHR6UmkSRqIbvmywf824JDzPZ3lXRpg9qimOYVuAvXujiafKPJgRArDzfUR0vwPojCpNW1RSEZ+tJVeKIpkcaij5AzcyiSAwiAEsFIcOSLdeSnT7BEObEnx1yQvCZ/ZxRtiil9OgTDLoIuzhFZ6kMiPJ4OBE9HWFuvaKCywee3r6OOsQfQrM1ZzjF9tR7YTpzR2lAXIT4677B8DcEjwAr7EOf7wHFYMbduqQLNGUZviFs4USgAR6Z0FjEh8R3Mo4K3QKbe/Svo5tuGrYQjFHLMlG8KlIn91xDy2vNv1HtnWnnBCHUJo5btousnzG1rVKrEKuMeYsAVfgGMsMOlb0uCZSMWJkT4LD7UUyQwy2Lz05WROcLXxKzlEf57ILQ0DlzL/j1XqBdlD7MDskIX/mofrCPUE/5ppaxHbdMbxPiHCTEPOyzrwWtKSIwFyPLxPCE8f+V+DW/Z+Js6TUBZr0MKTZBmEJ34UcX4oIskIuO0p6q3fabzafaUzMXeyfHITxLPIADEH2XWulpyeeigeqNtY5HGEEXwX1rCmT9o7OMbbdILtf3o7mA6H1vPYwBLv6RthLZw1obrA5St6VnwEbZKQljqSng/YVBH8SCSF8e5gO162j/95SfVyH/yRFoPZ5v3mUcF2bD2TeHg+BiRKefzoFAtsECAd5PB7De/T6l69mzxqamlEGbWgjd6wZnR+lSKJ0WukMvYXD8vHT4tqLH/RWtmPEKVIs1IEkkDzchCBMrNzkv/1c22cjWkownGr6b1wbY+OUIL2DgHgVtGaBz9Vf6HUG3OSeqh4bWOVE1SjoUjES27CeKK42fiBctADnJs9z2Qhb8o3h7NWC1UDQhNb6k/sIRgJ651NmlSXBAULXtGD6IrCh0OrykWzRxVPgFayMtUgfIX2OLmlYBpsXtK1BnsiZ0fUkSPRA2lljCJ2ay13IRWJ2gk2tkEmryx9MRmjc4EzBdSjGwjNoEJe5VfmumPQ7sB+L1jBOZl4gw0Nrqnbh59sTePGalPn/ssruKYuNAn7Rcv/7TDvRvL6iP3d4Sh/4cuPe99buf7ncIunI1qWbYazISw2XqWaXy3lUkDi2R/fv7+4+jfqXrMbWuL4Y5zNVfoOoNsDYW4bEE7K67ZUxtvp8E4y0iQbuSgzNpiu707FaC21CGaXx1/E8KAeDp3XNUEzhLkwpcaZ41/0D64bM/0o+QBC30NX6efPNkA99nTzJDy9GqC391+L5isdNhTgPp+ZqK4IITkWcj5Us/vz9f9uD1wclQDfRtZx+AEVkt/XB5hMKxlqdP8kE+UoMyOFX2FurIOhVW5e3MRGlyoENe5ra3J+FAiluEbN+ybvTX3YzCg6IgkpyZY56JM6qwR7s9DDlVSWsnRKGy15M4nWgFs3Z4aAyNjwflX5TNEApqbzxymK0JYWcYY5iUQQeD2Vd0wBYJRfp5Rvi99Pcfb5ns4AloakCyCIXYFW4SUI/fExRa8sP1xc9m1wyXwTsoOpvOrqi1mTMFsBtoORZJerPfAwQIzpVX+fNcAnWJg0q1d7PgM55vnQ3E2aahMGEMMSNBdXJTePP9PQ4alx9SsI4y8iRDUMwl/Gn81+xho8nEsecz0qxiYbfXD6Lby9p/OHor3INnsrOuyG0J/Yyw9MP3pFlGu++ZWRrjsK3l/hhUqnINjIMBXvZGpj9ajr8xfvG8ex6bmFUUSbXZWRkLE68TeG7lHYnh8xLEEioA/cpwKFRp1Eq4gOcqPEdmquEvGfsgLERSHOkEyel9yMjoiICep8iBehBvZ4xeHkC0r+AE9pivR98RoR5KT2z1xy+726ZWv4UARgz7YzkPZLFsSEOGKKRQG2VxmzFD5EZXHuOFxwuIvXVbNxem8w0QMStqkGbkhgMCDBzPsF1DS4PGTYu06bursFZEB0h2a4D++VxE3jYHZPTqEQbDbpThdKzltmMdLxm6pIPAmYsFfYqPJf9X64rsQq2NNgKd4qT8WFi51SH2a5MR0Gu2eCLDDWD8869YF7RJ2goscvLJiy9BigyoOdhsxTKeZZBNWtIYG9JHzh5RLTRBl86sQ+ymNF2i2ufjPjKkz6qlIoVmcGde4V/fsGd4x7+qTv8+uhJAq76ieD7YMjuCwf7qSvIRU12XkeNwKt8Sd05SuHla9e70vb+FyA6DCxea6QyCFdGnYCJrMEvdHXTxGsSu/r/AzUb6F3RHp1hvhFPwNJSgSu2hhG093kUhi/2avKIJEoNi0udnsX3IxnJKCMM6xbLgtkuT7HlZ9zaDUh6ahVM7mezhiB3fkYwbHpb3IYv6wQox8YwzgkeF3O8cGtwP+2dAN9e76zR+ralvZhLBM8ZJ9B9yeiiJUZ6yyU3+834cKgwQaWnDef39m6mJaoAzdksom1tpte3RaDmuYFsucbGeuxOU17WC0EOeoX02t3pXhWwsaynnNr9QHOypSkpSZ+EfSE0uqiKVyyhR1pm3R4aEJAbc2cke3tHvQc3F/OYS48CZPDt2wTL97TVlHTw6C01FcIlE+4ek6YR4IWihJ9X37wkOENIrwsF99ene0ct6A2WSg1TD2PHLkVGmH4sSMsd+JtM/Of8R33TLXVXzSxximmkSyw8ZhY7H2VLSbrKYFj1hZs228ZtlEjErk9K6TveglkouKo/KD1aUkVrR7qJOyrhBQoatzwo0NdzE+dW7nIn7Kvs/r+cH0ML+whMefnoBqcuX2CNcLgk2dme9bYPLJKK5ElUS09OxaLwGgZWKMdwMMDmOms2/jp6Gj4z5rkWRg66sP9DTsqrHOO3KGZwmiiWTsqjweT6m5Rs0FE/57YM6lOKZeYmQxxTxteCYymwevcD+Vdu9gIOLttZHe3QtKoZFYtqWhRVSweVorAXZMO6BZSr9x34que09j46DhFU4woAMLIEB5RlUMW4T1E8TUDL90Zc+wyDmpJ+qfA20bLDvvssgK/ON6AooGoCk85vSECUkSXvqeXho9uA8QnT/d7i8G+QDySodMFIlcrZMzVTIl09FjzqxaUzPrd9dY5U8dYqM4FtkLw+cYsDKpUqyAqUXIURwDznQJhFQ4OCCmOhmnMqtJQz/450BqrOOp1w1fBG3PcWXBvSuXL8R26Nz+2ZH9smjV8TbQbJoJLHRjYnJAJ6AxViQHOOJPmGOhTNFGzJeXlsq/LktTE5HMP9y7u0YapjLH1et9n7hKn8UE+xrkOyeRayLVeSgZ5CJBnikiUs8wOsoajRwhdzWQVRH4kVYoRhvOcvavF9ZWVUFpqCDPT9e5q5sANllHgilJuYyJL79XfjCNnSsoLMNK1ABc6wn42iHpiROCgqM/5QdLYluLwBVcPo/nte/2VekiNONnVctm8eUk1JPWM22ABnHmjabol+uzmfv6Vl1L25rUyZWziZ8Kw760nIBok9g27Oz1kq/dgazQyFuO5wdadVSKPlgWRv7uly8F7aKyiUlbpGXta92xZG730veTm1N1Kxd77mBMp+/FvoS6jVB7l3O6PTRjn7O6w2v0M09FkG9N/CDUYVYe8h2+itBofgjxXEVbmkVUXPLuL9O6VD0guIXouRatxvvhIJx0qtBALQK8xecuy8A7NvKhIeME+ZkDmGDLMY4uerG+Og/2Cun5Ihn2F/WBgGGs2hBNajkB5hWU70KyLy4R8WMrmzd2kKAfZYGueVh9vHGQU6l+nfn29ZFLZ5Muh1Y3BKyLDAq1djhTIe+i6p2h8OrkWYx4QH+9FlpQJjmUKKEVgFiu8Q5EO3kF470P3y9eUdFkTRBhECuSXNCHEabPGm7JcEP64FUes0auP9hJ7uWx0fVc+44OlWTWlxbTABhhKaUUPbd4x83ztJPJG414bodpy6b5WUuzBo+vVutVp2v3b+fNUbY49StQiDhavPlcAUTBpMuU0Y7QVyJUOfAcVa57wkA8AeOlWgwReCdZKKfV8AJTBYb0d4B9dlvvgCouAqeOXf8tkTk6WOffOgP6JcfKpSwWFRiBGxbj1ThW25adFzQTv5F+XDfvrIEQKFk78pF6ekeH5Z6mpJCK66VDJ1oC68yCM2XMExw2E0nV/HyH0lUBuglDGI7AF+SKydLTZ8ehKhbBLdGDiNhgqEOGxscfctLylinNNkUUO1YOvqlLL1wPgP302yzjYyGdGezauaYOeEoeXmSZmn6FTIePby9+6RWAbOzo4bm+YTdamFVyvBDyqEzceNiZyDqeIfOEIcyfz/lU2PXxn0abqdPtvglpivOxXobPIC2WP0THIfRsM55nGiLlVaEJ++S3CLb1Ol6ChqXkJqCx1mLS2uV70tY068RvMDx029Q6yfSUfpEMLqIiqeiq1zaFsOp9D6nt+tIgn9rE9OG+IvmQMBK/zMAZ89XFuUyNQ9uFB26ZGGCEJUBJPsA+45K6trGaS2+zKOAXXs5O3cAMkuHlTPbSqgrcJUKUm4kYAdRivvc13RkaZnzBWENBzOcZjkt0lvzVWHpW4ofrWm0RXOrFdq4nEGAJP3f32mSe0YuSlaFCz6u7vf4k1MU7ER2r3THEv68ivFnxkNluXCGIlWwho8gShBMz0LjvviUph9bEnM+LaVdka6TDTb7AphELvBK9ZPthnKv4++D3E8ChA3uEQr6nCmGzfWuvnSZ3wtj2ZQRwvje3g8SumY7NQswJ3j/DJJVehPuWTbJUlCsMzTUh/JY5GazfKbC17lqZqgflBVPcMWCjSd+qRfHcHlVjiLBDo9MEICiudDX5486TQJGUqo0zPV0zf/pxK09Oxw1stB3RjOiIjSJIMai8OLQ2z7rntW04FW07iYIrQaQXKb47EyoodVbWZi84KJO3xUP/uStXhsF3aAN9PwMCQyFBJ+2n3Vn/Pfx3LGn2CWSzgHQfHa/cqSIfEi4DtplbV58A2nSgRKHBXvEi+5h7oWImolY3qN35jtCYI4ADNyicCslVLuoZlq7MCMzsBg8Z5efLqkB2QmIvb5/rGu5VeUFFcZxpxXT1k0qRZjmzuUG3JsJpndYLvx7RB6tdTYwOZx4t7s9bH7v7XTwLHfgtimpnMfhUtvuk5y484ceIx4IXXHz0lY85C/FP/f7C+ZhpX/UMehewH58M/6/4+a/9KvnQ6cByx/ufTN3s5Ri5Bu8v6JPg+c/yrWjA6YVZWvTqCLCpBWjFankyZtO8kZ9XXKPGTlaWP0azGs+hqWbeUL+xBQ4Uiu8oVw46Zfl1D9w63zXC1OMeZCL0UHC+MFk6cd/vOrOgo4IsQjjcJo3PEvIm1HlKIaaDOUohcbwtHVtmStUrYGqWEJzw4NmJAho=
*/