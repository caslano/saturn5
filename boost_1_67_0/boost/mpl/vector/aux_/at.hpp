
#ifndef BOOST_MPL_VECTOR_AUX_AT_HPP_INCLUDED
#define BOOST_MPL_VECTOR_AUX_AT_HPP_INCLUDED

// Copyright Aleksey Gurtovoy 2000-2004
//
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at 
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/mpl for documentation.

// $Id$
// $Date$
// $Revision$

#include <boost/mpl/at_fwd.hpp>
#include <boost/mpl/vector/aux_/tag.hpp>
#include <boost/mpl/long.hpp>
#include <boost/mpl/void.hpp>
#include <boost/mpl/aux_/nttp_decl.hpp>
#include <boost/mpl/aux_/type_wrapper.hpp>
#include <boost/mpl/aux_/value_wknd.hpp>
#include <boost/mpl/aux_/config/typeof.hpp>
#include <boost/mpl/aux_/config/ctps.hpp>

namespace boost { namespace mpl {

#if defined(BOOST_MPL_CFG_TYPEOF_BASED_SEQUENCES)

template< typename Vector, long n_ >
struct v_at_impl
{
    typedef long_< (Vector::lower_bound_::value + n_) > index_;
    typedef __typeof__( Vector::item_(index_()) ) type;
};


template< typename Vector, long n_ >
struct v_at
    : aux::wrapped_type< typename v_at_impl<Vector,n_>::type >
{
};

template<>
struct at_impl< aux::vector_tag >
{
    template< typename Vector, typename N > struct apply
        : v_at<
              Vector
            , BOOST_MPL_AUX_VALUE_WKND(N)::value
            >
    {
    };
};

#else

#   if !defined(BOOST_NO_TEMPLATE_PARTIAL_SPECIALIZATION) \
    && !defined(BOOST_MPL_CFG_NO_NONTYPE_TEMPLATE_PARTIAL_SPEC)

template< typename Vector, BOOST_MPL_AUX_NTTP_DECL(long, n_) > struct v_at;

template< BOOST_MPL_AUX_NTTP_DECL(long, n_) >
struct at_impl< aux::vector_tag<n_> >
{
    template< typename Vector, typename N > struct apply
#if !defined(__BORLANDC__)
        : v_at<
              Vector
            , BOOST_MPL_AUX_VALUE_WKND(N)::value
            >
    {
#else
    {
        typedef typename v_at<
              Vector
            , BOOST_MPL_AUX_VALUE_WKND(N)::value
            >::type type;
#endif
    };
};

#   else

namespace aux {

template< BOOST_MPL_AUX_NTTP_DECL(long, n_) > struct v_at_impl
{
    template< typename V > struct result_;
};

// to work around ETI, etc.
template<> struct v_at_impl<-1>
{
    template< typename V > struct result_
    {
        typedef void_ type;
    };
};

} // namespace aux

template< typename T, BOOST_MPL_AUX_NTTP_DECL(long, n_) >
struct v_at
    : aux::v_at_impl<n_>::template result_<T>
{
};

#   endif // BOOST_NO_TEMPLATE_PARTIAL_SPECIALIZATION

#endif // BOOST_MPL_CFG_TYPEOF_BASED_SEQUENCES

}}

#endif // BOOST_MPL_VECTOR_AUX_AT_HPP_INCLUDED

/* at.hpp
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
*/