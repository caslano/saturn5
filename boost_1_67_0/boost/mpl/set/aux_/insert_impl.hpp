
#ifndef BOOST_MPL_SET_AUX_INSERT_IMPL_HPP_INCLUDED
#define BOOST_MPL_SET_AUX_INSERT_IMPL_HPP_INCLUDED

// Copyright Aleksey Gurtovoy 2003-2007
// Copyright David Abrahams 2003-2004
//
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at 
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/mpl for documentation.

// $Id$
// $Date$
// $Revision$

#include <boost/mpl/insert_fwd.hpp>
#include <boost/mpl/set/aux_/has_key_impl.hpp>
#include <boost/mpl/set/aux_/item.hpp>
#include <boost/mpl/set/aux_/tag.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/mpl/base.hpp>
#include <boost/mpl/eval_if.hpp>
#include <boost/mpl/aux_/na.hpp>

#include <boost/type_traits/is_same.hpp>

namespace boost { namespace mpl {

namespace aux {
template<  typename Set, typename T > struct set_insert_impl
    : eval_if< 
          has_key_impl<aux::set_tag>::apply<Set,T>
        , identity<Set>
        , eval_if< 
              is_same< T,typename Set::last_masked_ > 
            , base<Set>
            , identity< s_item<T,typename Set::item_> >
            >
        >
{
};
}

template<>
struct insert_impl< aux::set_tag >
{
    template< 
          typename Set
        , typename PosOrKey
        , typename KeyOrNA
        > 
    struct apply
        : aux::set_insert_impl<
              Set
            , typename if_na<KeyOrNA,PosOrKey>::type
            >
    {
    };
};

}}

#endif // BOOST_MPL_SET_AUX_INSERT_IMPL_HPP_INCLUDED

/* insert_impl.hpp
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
*/