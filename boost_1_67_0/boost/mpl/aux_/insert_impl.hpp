
#ifndef BOOST_MPL_INSERT_IMPL_HPP_INCLUDED
#define BOOST_MPL_INSERT_IMPL_HPP_INCLUDED

// Copyright Aleksey Gurtovoy 2000-2004
//
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at 
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/mpl for documentation.

// $Id$
// $Date$
// $Revision$

#include <boost/mpl/reverse_fold.hpp>
#include <boost/mpl/iterator_range.hpp>
#include <boost/mpl/clear.hpp>
#include <boost/mpl/push_front.hpp>
#include <boost/mpl/aux_/na_spec.hpp>
#include <boost/mpl/aux_/traits_lambda_spec.hpp>
#include <boost/type_traits/is_same.hpp>

namespace boost { namespace mpl {

// default implementation; conrete sequences might override it by 
// specializing either the 'insert_impl' or the primary 'insert' template

template< typename Tag >
struct insert_impl
{
    template<
          typename Sequence
        , typename Pos
        , typename T
        >
    struct apply
    {
        typedef iterator_range<
              typename begin<Sequence>::type
            , Pos
            > first_half_;

        typedef iterator_range<
              Pos
            , typename end<Sequence>::type
            > second_half_;

        typedef typename reverse_fold<
              second_half_
            , typename clear<Sequence>::type
            , push_front<_,_>
            >::type half_sequence_;

        typedef typename reverse_fold<
              first_half_
            , typename push_front<half_sequence_,T>::type
            , push_front<_,_>
            >::type type;
    };
};

BOOST_MPL_ALGORITM_TRAITS_LAMBDA_SPEC(3,insert_impl)

}}

#endif // BOOST_MPL_INSERT_IMPL_HPP_INCLUDED

/* insert_impl.hpp
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
*/