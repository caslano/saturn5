
#ifndef BOOST_MPL_AUX_ERASE_IMPL_HPP_INCLUDED
#define BOOST_MPL_AUX_ERASE_IMPL_HPP_INCLUDED

// Copyright Aleksey Gurtovoy 2000-2004
//
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at 
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/mpl for documentation.

// $Id$
// $Date$
// $Revision$

#include <boost/mpl/clear.hpp>
#include <boost/mpl/push_front.hpp>
#include <boost/mpl/reverse_fold.hpp>
#include <boost/mpl/iterator_range.hpp>
#include <boost/mpl/next.hpp>
#include <boost/mpl/aux_/na.hpp>

namespace boost { namespace mpl {

// default implementation; conrete sequences might override it by 
// specializing either the 'erase_impl' or the primary 'erase' template

template< typename Tag >
struct erase_impl
{
    template<
          typename Sequence
        , typename First
        , typename Last
        >
    struct apply
    {
        typedef typename if_na< Last,typename next<First>::type >::type last_;
        
        // 1st half: [begin, first)
        typedef iterator_range<
              typename begin<Sequence>::type
            , First
            > first_half_;

        // 2nd half: [last, end) ... that is, [last + 1, end)
        typedef iterator_range<
              last_
            , typename end<Sequence>::type
            > second_half_;

        typedef typename reverse_fold<
              second_half_
            , typename clear<Sequence>::type
            , push_front<_,_>
            >::type half_sequence_;

        typedef typename reverse_fold<
              first_half_
            , half_sequence_
            , push_front<_,_>
            >::type type;
    };
};

}}

#endif // BOOST_MPL_AUX_ERASE_IMPL_HPP_INCLUDED

/* erase_impl.hpp
/wXATPUFr7za1LSfXTwLXgqoqdA+X9B2hW7U7wvZQjlo9EsADD6f7m1sERv3jcBHXTe+PWkEnEPTQXjLqYNxjmkp6Eyx3sXO1PgpOJgzQDEnjXg94B/HryGi15EdDv7aGLwUvYuLYusvpOW1QiVbE1zhSXwVyYolEnmtT+KRby5GvFKWdEIFu9IksDToTsewWDts4ZzYku6K+MJT0Hl5v17oZD4xYOqSTu/nx0MSxGNwB2/ivVirRE4rC/crC/vjCwfQHeNY83qnxIbC17BKtx/PzINporvvdvtDaXgHPd6nO6quKu22nFeSPfoHf7Ys8UU+q03/bAE9e6KsA1TTvNb8NOFFTV5GyAb1nhLtX05dTLBb0Cm30cR5LrEt+DJ8A8tk+eDEEOt2Cuck8MM1qfmy7jiMWHdQnPSniwkCUcT84GWMYf7yWj/B6HIIULBhCM6kKoo29MAFFy2FtYkBeGua2lGApyMHruPLlYQ1kUxwZfH4D/szMXbVhh644I0tlDFEdold1p4a78ENhfp7C5Pf65C1wLhvrEgXb4QLyxvTZe3qlA+WnvgQhBIEuZaDA1HsDzcEAxduk2Vz0ZGiJGN+o6cgfC+1W93uQX0QKqb1ebDcpBI8XnJe0J/OFO5d6B4NpZmg4FBu5F9LT8ComNWCSAAWtxW/YFmQMLUPxNveQgAPLPDTSFmw0DdEDUkAi0ggOYAioTZxTO1AtfB8gKuFbTCxeJq6Fy762rpx/tac/fzdWQdCUuyPDRt6AHKA7xoF5gB7Fno3wN7WlP8mlO4U0qS/3xdge4dJO9h7StLZjT0BNLX9CSL9GL5UPQskdlx54dkzQGzDPWjCeCw4FwBmhhFqY18kO47pGJ/nvtH2Tb05E8Xn4eogHBEszGX/VBLHcs5V5laE89hMCDVyKDEQO2VTKos50ZbX8rYkgh9bv2jMZFOTfN4xwyhfd/AmcqIz0RBc5uLkG06L3N96LnoP5tIRTv28tODRqPEJCDxJAHEQcCC15RLgDhcSKqblRWnG15Hkt0bOqAud2mNfJRJKZdGosNPjWKGjPF5t4nv52DeAyfyBkBTKYOe5shbMdANnvaMHcmDL3IhoZzjFvoMIFaHsYCaIz8Q7nNtsoW+G8tXXQTUPATDA9O182W09ZzpcIohSMAt59h3eAbuvB9gn+O4V/C109kHt019XSrycDCiJl/VkMcqu7Wa+b/8DAF4BWYtDXqJeb1J/aVLnmNTnTWqxSW01qXNN6g9M6g0m9R6T+h2TWmlSS0zqXJN6o0mdOaJtVUbbdCiQG73YLeCqAhBHy7fVhur5fTOgfy/ZxnWiRtRlnyQ7QtBmIU984S6+9Enq6xg1jfJA76Ob6rmwnatdGBHPHyqBAcV3TQ3OolEMIWpUSNoQBykRCHY/XMfLKAdBtMgBJh7xitk4EQIOdkcxr0zDNIRuW7Wy9Hel3fdpf/e9VB7e4AWdmF4DDoBNYe0XpRcTq1buS+X/9pfnt5r7laEkfy1tlL+WZO5XAOoktwZdrdGrcLGnPq/lp3ytmQu+6eEra8I5cZSUH96TBRsuOCP+cCm/ZI95uOgMhOzBbBN1gm93+HrM19NC8AQUacLvG3zBBh3gUR+y8Y0BmJDVBhDG6TTtWjT6O0N/Q/R3lP6O099J+iMRt5j3io+3BnbSMiKzACWAwYngTp6FYZ+cvPpwnsx1ZwyWRK/mKiuUwrsHEdU2Yyk8DevS7gHGiHV/zMsq42lHzZzkYN1HxTq5Vu9mNfmwVJWT5zNf0BpqcbdR71lDnm3kP9gAbkCzo+gvGOTyv4EgtbCmdbNQpZixIB7JPcc3G/nhdL7EzbBho1bMQtDgltepDaKe+6kNUE+fQoGVeEW7KBFjQQ2pRJZ5c/opmdgdfRMp7FKsJz/k5um9uDbxl9Xzl+1wh2eU8dqEnQytIweLGNpLDhboVChuMIOhxSQTb+U9ELLzxZXPSJlXcwD3fbzJ+VHcybnZXcVwmpEL2FYk078BXpMYiCFxZMG+x9IBEjFLxeDk8mCm+sQARs3Cnt1FkUxLwDnKDT3F1dL88B0Qb4JvoqaF0mS98oc1j+27+yLXgq8kTypISuKL1IJ9kQwoYJB6OJQWsD65qcozExv5reDAQC3shvpFJfi29sxVL0nB6upqierUORudYctRhZFJ1cFt62KMglQMoF6CT7JYl3XAmOC2FmSsOYf4frUdh0qFoEFdODJiMBWKDaYVNFVC6hoth1+UdfTCTugfO3e83ClBdSPpndvAD14loCutr7USSt9F79pJb95NW2TwLAXYvRWdO82nt4un4eBA2wRPbyY0MgI7EwcQg2s7O81ndolnwAZIq6M3bqc3bqNndox8Y5f59G7xNOxetRn0xk30xnZ6GnTKd9Ml1z9L3neLICrUWt7TayEkWS1glencrSO5ARSZ9rsbJH1uZr+r8dGR+TPuWh+UAENUkpje24iiyCOy5QgEupDda2zcMxXCquNVnRkpwQp/G/RAX/AaXKLJE1KXPCZzsEbP7MHHGE0n3p5uag9OD54Em/Iu9FSlpsoj0dqK9UepaTBr7vTWyELyMGIFWUgnkRfLKLKUoTcfRBMsgU17JIMLqale2Njz/6STBhRnAjQtZCMOP3l9KoZfzdXckEeX4F446Klh8lo8GDrC2pNYuyem5QPi3TCjNhxO2M/jxgCWGj46Qp2j17vEDK91ADodopHyrQfEz/sZeakXzV9xNpIJsHfewVU47VS45jszmWIAzcPd/eybJOiNdL7yDzpARIBg8fHeLEKQzfyQrdZHXwt4rqmINafuBR1Cu/pkIjF4HYOIaGpbFe7OFnASYrXCa0W2RSe4Bs9b4Cs9AMgPKwJeeUMfpAxewZ+VfaXdcqDWt6EP9Dc/b4as/dccnNxlnE+ux06sj4OvvdHx5l5GUDIpN0A9iCVMuHOvFlGP3obzlhPiTGRaGZ6RRPhSXQLr8y/oJOe4sV7xNRPKYMv4UtXuIettWK0sXB2LFwjGhhNMWmGBqdW2ATHN6DEQxZADlmkvL7ebluRe+ttPf/T9ZS0sNJtxXefjf4aYdoikWhfJuE6aKWdxuXUKMcjpvWYualt4OZ08WvjFFjxH6KSLBTQokQE9sEas8qFvqlSIHEoANkcZb98m6gsobtBHT1sKdQQ/o0LlpEIBcnTxpApdTANkdH/ygFsHU88BgyzO65LP1DTy8L5zhQl8QPaBG6K5Uj4f7yyutcVtoJ5Z8YZRH9zwgOWTb2EyCMJs/ZsImBpGIQDmTEn70aGLCXbzZmsQLAifRaBleS3P48FRZAmcE4lorJGr2QxZZneA/8FA8xuI2xLOfhOaqfUevgggBCU4IY8NXEze8eq7KEJCgyMG3BbCWYysf2zQ9/nWEwoBk7YgTqdfYMGZ90yV5xrEqaB3Pcjf1dzIGxS+EjaQHgxdfEQOzoTgV7//Wwx+pde1sDShzTqs5xc1z+YEVmnuyGQDVWB2il2g0d9XKpPob0DigT6vqWBr65v/6G4+787b3BOL5qbltX4MXmcH8lr/DDl9gOZR/gh+c8qn2khwMEpVoWh2gBRDgeu5dvi/1T1/eBTVtbtkkgzJwC6ygagBYqEVK/rUBTRvkSbAJkFcmN2YBKokfE/sy0t/oexAqAaDSegOl+HFFtFXFbS/Hra2xU+stFgIYrNQLaZAa/pBMdX0dfg27+uifhAksO+cc2dmZ5PND32vX7/3TzI7c3+dc+8959xzz49tmFBMW4zfMCZHyCMbqkHAQQEP6cGjedzC75wwexiyRuCk+RpDhUwoyLr0m66XMGU2C2LUnvwiEROchVxPvO76+esyi+obYwlrVpMkCyPG0pjKQJqH50Snr8+19SHKq1sYtMFRgXCQLmU4lKbJvwn4/fzTu0bEL3p1sKX3oYFQAQDnCSU6LYhLJRQ58ygxnLYLAdYx2G6Hwxmbhfl8r2fr5sFB3KagNEap/buHZ9j06I9OhFr1b8H6mEJKxPvsSsTWU64W4vQZzM39zN/EgH5GehX2TcQ4u8UXd7XsIOlZe5r7nUik8JIpiLX+1fv7E7BAST/IJspsDGZxpUYKeOzjW5zJ7dC0Mc+hFLNSsakhD2NsxlkWPd1kPoXPx65jpQL/zPvzrRGVXPheTG/DcRb3vZpPSlOcL9pv+szfXrbPshHjOP1s8fnZ1IvyRJW3HU6r5rKkWDU8ISiGIAFMug4eOaS7XQc7650qBnwKiIhVEOzy2QQ5hGm7VvNV4cE1DBMohXiSWTweYdq8cDEcjqTScBEcPCneoe3kCUenz1TT+gMOuYqiYJMSEV5xYU7/88dGesYB/m7NjWI2xpNcaVoQCzxf4iOJTnp4LOzkmyycV7cn/wXKx9XAY1wJe5yxMbe137HZ7aSoZ9u+gql/zLjNwQi9t6I3Y7dkr/YijHkRD9XzCG/oHrbtHtTUYyDNWUy27f48KF7vqPuIrA6NNLU1hzs2L0MGWHOYjetZsZ96M15B5aCxcmsO2/bPosnP2VPYpOyfQlviLtwl/4R3I5vxWiXHAsYIiIWBrQcZQsD+cbWewBZ4+B8Kx7mDNKQLPuIaUtSKP4nrnetQX1kw3sG2GbfcE61b7ujm1wwtJdlxJC04YJ1gZLCk2/vsE4YLDbzFdapSTfhmmXJso3usrTBUtuM1Q/U6votUr4Mh0Lf/dYgvzX0ZrlZU5TYd4DreKQhdeCymDpYTJ2ITKRBUHQZ+pSMEzk89nNecVg1XC4ZUbD5Al53sTsRi+DoQvOrHhABew6omcQJjSyWRbcWXykQFiqFftkLXTDJvp2Q51EGabGfinVg2f4R+8RrEoZR1bD5EhkSvRoFkjdvO811jKLh8pxlnzUS/QFFrRa1B0Mf+hrY/oVUvOHo5PV5s9piVoi84Q8nt2ITKOSeFLiyZ6etUxlfJ2ku4I/QsK/attR7/6zs2ev6VZLym1SlXOw3GyrxzNe7oyfBmnry/wMGjNdJN8TvwFkRwip8DL1aRxt7YPpT+dxbQjc/SZNn3HCsv5JpazlmDMJNZ/AXOjBlLFZDLo9Gd4A9OaOs6kJyT7fg6lCyQ4GjSrUDxpfwOAT1EuIaWUZhZ3N2sUXQ9cThy34xp0NR0fuUCc3A1KjZwC3SqB/ZR3A5zI7ScCs9gm/GdFkFDUrRlzew0jK4p9ewZ/a/vw+KletqTaH3Yejwsboru5fbcCX6HRYz5uHHyI5wajVIFbHS3mNLot97HXdXPZdYmI6o2qvsFSoFs1O7htUVtX2Ss0d1k4Fq8u06jptPWXY/Z3SNjU7qbTt1h0bTdEaK04CIATdI27TP4S0zE6FcEzeN0ksBrq338Lgom3AQXNxg7YIg8bm2bJe7Mnyo5iu6oR0te18+PoMooCEN56r1EwjYIHiKMWOBOavvbaHSJA9lE+eJQqItJ1kBQxAMRgL0J72dbQ8iw3QjuQcIo5286tIefWgtJijuOUlxsYDFUnBV7eFEQZzCr1Z/2Oeryz+xzsK56RwUGb9QvLqWUp4D45jc8hPuZic4O3rGAKaoLKFg7CiTG20y2zUAHxp6/JcRxgii5cYpEmrYiEdHCBT9Ucp7RN/2ZwrtTo8l7NeNNxoCpopTajxMICwxIyyhSJ8mGV+PcAqLsUz0R64O0A8L4NEe43FwvaFxM6+W5jJT18mE31OFl2tCmGOYjO3ONkFLm7WSZCNoS84X6UdaAhTrDWqhZtoVqVJC0Nry4BSnFttq0CN3qGnIm3azyBrItvGKCcrcNryeuJby6DbxG7iEpxyNTKMoz+oxuXP54NDRaykrKecPtP7R65mB1Zg8JlmitKu1xqkCbCC+UB26itLfNvJGxQ4LWd82woC1+F0GTkqCJowMNjbM5aAVDz1iODTSqQKDhlfdA0Og+PGTeh6eAljskaFOGB+1rZxA0IQlazuhAQ3tyDtqizCFBk2yL0agAixEv5QcuRrqxH7wYxw0JVunVw4L15J8QLHcSLGkEsBrF1oQyE0SW6mousJiSSngiBSotIjknnKXSf20HnvBD3P+Sm/8MPG0Dcyxkd66aaYjx84IUnfmdegRmOdVMvNMMvN0RLkXjoSmcs59gdyJPRump3DhqGiMhmeAEfiguxATK0I2EzF+0ePbdIGskL+TvnrHa+5beWTroSs6IB/+dEe1NL7KVYusp5RpWVlhhXAobx5UTLH72HUqDXFhRL9hvyCrY2xjEcBUlOcLz5I+wGNFvfy+Rb/MyPSCxsUE8iPDQ9q7t/g8HBs8nr42vdHyTBBh9768sETCgd/h7nYaBMSyqHJQ9xAo4f3Wa9lGfOwilAyKch4OmJMRHyJtz7nGmuxPnUGIKe4pXwt7Wj11JJFralU4AtareaYB6AlN4K6dva0/XRtOBw6SaKR8kscFi8iblqHqHchUKwfxcZNhYGKchOALVO8xDUNr8B/v3DR8P4SKFOCD3x/Oq0q/PnZS0Ii0To2XkC+nrCGe3MZQAP2bL8tX1bnW9R10vqevhtP7iTd91qOvz0/rvQ/8PJ+0tgsNYK6M/JQ2gaK07/GAsA/U7C0XvUV+H64lDvmOull1YVmQNorpE9B0LZ6oPCrEMda3ElnhUMbHErS70KDdCFRiqxM//xniX5Ktr3epaD5RV15rjXZvvuxLO1I8CN4UOle0mxAvF6ELy6IRmsoZvYLBtLfflsPAP0LIudlFfjb5+ZZK2XpD1yEtA0paLbKkIq1FQnQBCqYCJIpeI2loBJHu99PbLCbUBSgi4XmvVEgHjKN57uBZK8afU+V2SO5r5XWOiV6/yDJhf9Fj5X8xv4bdtwWildCNYKLA1AipwWJ/yGVQJOnjyVb6fN2SydWJMYFfYXCwTPuN7WAhPAHzBppStQjXkd4yJVW2mhLC3LQexSj0Eh94NLvQ0UjB/w/xc09w/JSerVupO40WglblHCLZg4Tu/eOfI/gyOVH+G95yf0p+BU1x2TtYCHwWr9I/RP3RlH/N/ZPZR2R+qkLXGfv0LLnIobH5DqoAu+/Svozjq77dbfRv+G3+5NEr/daP8nP5PVv6B0frHc3wuTNqTpov+wxN9DrZOSjND0F4QlnQVW+/2Hm89v3Fl0XIRrUQd4ZwFvj88co5WLexwoK63a6tnOLRy3ITXFBWFCxhqGv4G+IJNqt/zYwcP3M/3MyphYG/qd/6YMIolbjNLDO4fJh2YSaXkE5W5vk7lNoqIfkyPZzhsPlIOw1FqqRAtFWkeJ6iTWZSzBd9vwl8i+te0AbbM75RSVsK1nlPZEeakJxenj8bP8Hk1IMamsRKu/ZzoKxeV8ewIvDRVn/+t+tFYrF+u0icTSxV9AUnZpbrMPm3z8e19I9nHMb+bWs2t+/5OND3uykMervndQMj1yd/KdrBcHHo4kz0sxiYDwqm0wC7GcjAIcIPoO6w80vQoALdWUDLU9QKrxOixRcsFJVNtEGK5RVMVQZ0PpHEjvc9XZmBpaOFYLI9lY2vsbSW3LQk/lFJFdpegBnqLVoi88XA261BLxNjXWVT/4DpU9aP2Bt+sBJrKclXRt1BUBBaPXUNjWcPHos4HUqyWi6xCVBfQXC4WilbgyEqE2Hi2RCi6WuF0uwTKCKosbKnwbCn3RGQPNB9Z4mH++MvOO5Z7XK2YFh0G5dsguFrwJvCOWo+RDnu876Lyb8ADmjZ4HEpeZIUnxI51lHoc+mJ0IV8K60dEDCoNDFsCclYiwv/wA/y/kseckeWeUEcJ1Hi1UDJqbCn1REo8kRoPWyzyJvWP8Z62gXrx2HppxjrjzU4mGq1O5Z1NxmZh2ECQ19HYWxdhCJ/b+Nc8KGz1/TTSmPEpXY81ei6ELiK1HgzkcEjCtKRmvHojM3eIkwbEb4kIBAIVzOWI0oAbBCqYzEHyEuUDDCL7KBYqqgyOgtu7S1lYzfcD1HUOZi1Tmx7Ow8SDG4GjuKutb2PYGWCHBtN5o5YK5fKVCI3HxjAv3TkUUopsd5ITZbEzbG4sA1qmmt1oJxror1GXwxK8Nxmc2tpP03OHz3f/RzhR0AK8AMSiVATRVz+MNG+utgwQJ6YgrtoiqMROr4SPDeeQj/pKwKhbDcKfpm8AMBkqzGsQFy0CGhJ8dwmKpOLmgdVNysyg4MtRctUx1ht1gWg9p4kPc8h7VC0XyNUVfV5hPqMO9MGKFovklFmen+KfG8R4HjCHGvAtWf/yBEoZl2WI1OUwKknN4eke0lyQAdGs9iaiWSSQRkk8i4K8spTH6HBTmA7BkFc2emoPG/leeIqz/Aud7NxuZ/hWtlTC+8E8Ge1T1wkgwk8y7bNLxWr9X5eMd7C5ILSfMzkyFr4bCsNag1V6tiKWY5SHdhOB/mrN36ffirVAsmjsYzXAX5QiVpVfL4W0Ug/m68CeluZrnsWLtUVtfQ15Zv0qt+pWS93NurR4wwdQHZqfzUR1qRsWEzc8TpRKJAvapcXmxn5MLa403WuO0JA7vUejPKYfToibux/bORT/CtuHrhUSeT1QaYWtANankGJD1sevQ9c354fE51HMj1meBNDRzSddKY16FaAUAjXtgkitTRKx2otmIWIAqhwDKig4CgnGVh8R8+nrjxZro4VntFgduT2UADAL4qMipiIuE7QlkuKpkDFGag2wKiht0By8GHErN7CQFLIO6ire2gBFqAhi+ZtTyoNodCsby4pBqC+XkjVOmEbDInTiqNIvOlM6sbW+oQzvVP39aqBfX7gtGyVhbaEkN78uhTC/rXgJDuPh6SCvsXJicxXKT2GMIRzJ91MbXUgnDWBTVtNIoTAJvL9fL1ezUejzlQnhSc3tkox9QPsP8vavx/bRhEBE8lrhannvSiIRxIEXp/RRUa2t7NML6Exaq2ZZ79PJwye+tXOE/HvQ4QaBrScesMcZ8fcqNxOTkhAIdsXC5lPt8A1GKdj51e+x+gVVicOHm0Fk9N2hFKAKo7reifGW4LjaSsNUMzoWCs7Yas0f19/fCkhQ4sjpiqUkg4UeAVkFrLI3iDQ2hC4Pehkd09Vcqv05Yv7iAOYvhazlpnqhnGOAy7nN3gTwcf8+G/9MJ4uyZeKmi4D3aQ/dyBQPjE4NSCk9Jld3XTsJrH0osFZ6StRlJOMtE3yHlHFqUIAFrkJzAogMmAxoHP3wOZWr1Amx8aos4q8SEbhoEKWEpgaQkz542bgORvk=
*/