
#ifndef BOOST_MPL_UNIQUE_HPP_INCLUDED
#define BOOST_MPL_UNIQUE_HPP_INCLUDED

// Copyright Aleksey Gurtovoy 2000-2004
// Copyright John R. Bandela 2000-2002
//
// Distributed under the Boost Software License, Version 1.0. 
// (See accompanying file LICENSE_1_0.txt or copy at 
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/mpl for documentation.

// $Id$
// $Date$
// $Revision$

#include <boost/mpl/fold.hpp>
#include <boost/mpl/reverse_fold.hpp>
#include <boost/mpl/eval_if.hpp>
#include <boost/mpl/and.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/mpl/pair.hpp>
#include <boost/mpl/apply.hpp>
#include <boost/mpl/aux_/inserter_algorithm.hpp>
#include <boost/mpl/aux_/na.hpp>
#include <boost/mpl/aux_/na_spec.hpp>
#include <boost/mpl/aux_/lambda_spec.hpp>

namespace boost { namespace mpl {

namespace aux {

template< typename Predicate, typename Operation >
struct unique_op
{
    template< typename Pair, typename T > struct apply
    {
        typedef typename Pair::first seq_;
        typedef typename Pair::second prior_;
        typedef typename eval_if<
              and_< is_not_na<prior_>, apply2<Predicate,prior_,T> >
            , identity<seq_>
            , apply2<Operation,seq_,T>
            >::type new_seq_;

        typedef pair<new_seq_,T> type;
    };
};

template<
      typename Sequence
    , typename Predicate
    , typename Inserter
    >
struct unique_impl
    : first< typename fold<
          Sequence
        , pair< typename Inserter::state,na >
        , protect< aux::unique_op<Predicate,typename Inserter::operation> >
        >::type >
{
};

template<
      typename Sequence
    , typename Predicate
    , typename Inserter
    >
struct reverse_unique_impl
    : first< typename reverse_fold<
          Sequence
        , pair< typename Inserter::state,na >
        , protect< aux::unique_op<Predicate,typename Inserter::operation> >
        >::type >
{
};

} // namespace aux

BOOST_MPL_AUX_INSERTER_ALGORITHM_DEF(3, unique)

}}

#endif // BOOST_MPL_UNIQUE_HPP_INCLUDED

/* unique.hpp
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
*/