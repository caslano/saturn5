// (C) Copyright Thorsten Ottosen 2005
// (C) Copyright Howard Hinnant 2004
// (C) Copyright Jonathan Turkanis 2004
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt.)

//
// Contains type traits machinery for incomplete arrays. MPL compatibility
// is included for completeness, but is not necessary for the current 
// application.
// 

#ifndef BOOST_MOVE_PTR_ARRAYS_HPP_INCLUDED
#define BOOST_MOVE_PTR_ARRAYS_HPP_INCLUDED

#include <boost/config.hpp> // BOOST_STATIC_CONSTANT.
#include <boost/mpl/aux_/lambda_support.hpp>
#include <boost/mpl/and.hpp>
#include <boost/mpl/bool.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/mpl/if.hpp>
#include <boost/type_traits/is_array.hpp>
#include <boost/type_traits/is_convertible.hpp>
#include <boost/type_traits/is_same.hpp>
#include <boost/type_traits/remove_bounds.hpp>
#include <boost/type_traits/remove_cv.hpp>
#include <boost/utility/enable_if.hpp>

namespace boost { namespace ptr_container_detail { namespace move_ptrs {

// From Howard Hinnant.
template<typename T, typename U>
struct is_array_convertible {
    typedef typename remove_bounds<T>::type      t_element; 
    typedef typename remove_bounds<U>::type      u_element; 
    typedef typename remove_cv<t_element>::type  t_base; 
    typedef typename remove_cv<u_element>::type  u_base; 
    typedef typename 
            mpl::and_<
                is_array<T>,
                is_array<U>,
                is_same<t_base, u_base>,
                is_convertible<t_element*, u_element*>
            >::type                                     type;
    BOOST_STATIC_CONSTANT(bool, value = type::value);
    BOOST_MPL_AUX_LAMBDA_SUPPORT(2, is_array_convertible, (T, U))
};

template<typename T, typename U>
struct is_smart_ptr_convertible 
    : mpl::if_<
          is_array<T>,
          is_array_convertible<T, U>,
          is_convertible<T*, U*> 
      >::type
    { };

#ifndef BOOST_NO_SFINAE
    template<typename Src, typename Tgt, typename T = void>
    struct enable_if_convertible 
        : enable_if< 
              is_smart_ptr_convertible<Src, Tgt>,
              T
          >
        { };
#else
    template<typename Src, typename Tgt, class T >
    struct enable_if_convertible : mpl::identity<T> { };
#endif

} } }         // End namespaces ptr_container_detail, move_ptrs, boost.

#endif      // #ifndef BOOST_MOVE_PTR_ARRAYS_HPP_INCLUDED

/* is_convertible.hpp
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
*/