// Copyright (C) 2000 Stephen Cleary
//
// Distributed under the Boost Software License, Version 1.0. (See
// accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org for updates, documentation, and revision history.

#ifndef BOOST_POOL_GUARD_HPP
#define BOOST_POOL_GUARD_HPP

/*!
  \file
  \brief Extremely Light-Weight guard class.
  \details Auto-lock/unlock-er
  detail/guard.hpp provides a type guard<Mutex>
  that allows scoped access to the Mutex's locking and unlocking operations.
  It is used to ensure that a Mutex is unlocked, even if an exception is thrown.
*/

namespace boost {

namespace details {
namespace pool {

template <typename Mutex> //!< \tparam Mutex (platform-specific) mutex class.
class guard
{ //! Locks the mutex, binding guard<Mutex> to Mutex.
	/*! Example:
	Given a (platform-specific) mutex class, we can wrap code as follows:

	extern mutex global_lock;

	static void f()
	{
		boost::details::pool::guard<mutex> g(global_lock);
		// g's constructor locks "global_lock"

		... // do anything:
				//   throw exceptions
				//   return
				//   or just fall through
	} // g's destructor unlocks "global_lock"
	*/
  private:
    Mutex & mtx;

    guard(const guard &); //!< Guards the mutex, ensuring unlocked on destruction, even if exception is thrown.
    void operator=(const guard &);

  public:
    explicit guard(Mutex & nmtx)
    :mtx(nmtx)
    { //! Locks the mutex of the guard class.
			mtx.lock();
		}

    ~guard()
    { //! destructor unlocks the mutex of the guard class.
			mtx.unlock();
		}
}; // class guard

} // namespace pool
} // namespace details

} // namespace boost

#endif

/* guard.hpp
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
*/