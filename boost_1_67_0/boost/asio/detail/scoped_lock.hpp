//
// detail/scoped_lock.hpp
// ~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_SCOPED_LOCK_HPP
#define BOOST_ASIO_DETAIL_SCOPED_LOCK_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Helper class to lock and unlock a mutex automatically.
template <typename Mutex>
class scoped_lock
  : private noncopyable
{
public:
  // Tag type used to distinguish constructors.
  enum adopt_lock_t { adopt_lock };

  // Constructor adopts a lock that is already held.
  scoped_lock(Mutex& m, adopt_lock_t)
    : mutex_(m),
      locked_(true)
  {
  }

  // Constructor acquires the lock.
  explicit scoped_lock(Mutex& m)
    : mutex_(m)
  {
    mutex_.lock();
    locked_ = true;
  }

  // Destructor releases the lock.
  ~scoped_lock()
  {
    if (locked_)
      mutex_.unlock();
  }

  // Explicitly acquire the lock.
  void lock()
  {
    if (!locked_)
    {
      mutex_.lock();
      locked_ = true;
    }
  }

  // Explicitly release the lock.
  void unlock()
  {
    if (locked_)
    {
      mutex_.unlock();
      locked_ = false;
    }
  }

  // Test whether the lock is held.
  bool locked() const
  {
    return locked_;
  }

  // Get the underlying mutex.
  Mutex& mutex()
  {
    return mutex_;
  }

private:
  // The underlying mutex.
  Mutex& mutex_;

  // Whether the mutex is currently locked or unlocked.
  bool locked_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_SCOPED_LOCK_HPP

/* scoped_lock.hpp
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
*/