//
// detail/conditionally_enabled_event.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_CONDITIONALLY_ENABLED_EVENT_HPP
#define BOOST_ASIO_DETAIL_CONDITIONALLY_ENABLED_EVENT_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/conditionally_enabled_mutex.hpp>
#include <boost/asio/detail/event.hpp>
#include <boost/asio/detail/noncopyable.hpp>
#include <boost/asio/detail/null_event.hpp>
#include <boost/asio/detail/scoped_lock.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Mutex adapter used to conditionally enable or disable locking.
class conditionally_enabled_event
  : private noncopyable
{
public:
  // Constructor.
  conditionally_enabled_event()
  {
  }

  // Destructor.
  ~conditionally_enabled_event()
  {
  }

  // Signal the event. (Retained for backward compatibility.)
  void signal(conditionally_enabled_mutex::scoped_lock& lock)
  {
    if (lock.mutex_.enabled_)
      event_.signal(lock);
  }

  // Signal all waiters.
  void signal_all(conditionally_enabled_mutex::scoped_lock& lock)
  {
    if (lock.mutex_.enabled_)
      event_.signal_all(lock);
  }

  // Unlock the mutex and signal one waiter.
  void unlock_and_signal_one(
      conditionally_enabled_mutex::scoped_lock& lock)
  {
    if (lock.mutex_.enabled_)
      event_.unlock_and_signal_one(lock);
  }

  // If there's a waiter, unlock the mutex and signal it.
  bool maybe_unlock_and_signal_one(
      conditionally_enabled_mutex::scoped_lock& lock)
  {
    if (lock.mutex_.enabled_)
      return event_.maybe_unlock_and_signal_one(lock);
    else
      return false;
  }

  // Reset the event.
  void clear(conditionally_enabled_mutex::scoped_lock& lock)
  {
    if (lock.mutex_.enabled_)
      event_.clear(lock);
  }

  // Wait for the event to become signalled.
  void wait(conditionally_enabled_mutex::scoped_lock& lock)
  {
    if (lock.mutex_.enabled_)
      event_.wait(lock);
    else
      null_event().wait(lock);
  }

  // Timed wait for the event to become signalled.
  bool wait_for_usec(
      conditionally_enabled_mutex::scoped_lock& lock, long usec)
  {
    if (lock.mutex_.enabled_)
      return event_.wait_for_usec(lock, usec);
    else
      return null_event().wait_for_usec(lock, usec);
  }

private:
  boost::asio::detail::event event_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_CONDITIONALLY_ENABLED_EVENT_HPP

/* conditionally_enabled_event.hpp
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
*/