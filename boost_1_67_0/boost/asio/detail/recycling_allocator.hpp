//
// detail/recycling_allocator.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_RECYCLING_ALLOCATOR_HPP
#define BOOST_ASIO_DETAIL_RECYCLING_ALLOCATOR_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/memory.hpp>
#include <boost/asio/detail/thread_context.hpp>
#include <boost/asio/detail/thread_info_base.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

template <typename T, typename Purpose = thread_info_base::default_tag>
class recycling_allocator
{
public:
  typedef T value_type;

  template <typename U>
  struct rebind
  {
    typedef recycling_allocator<U, Purpose> other;
  };

  recycling_allocator()
  {
  }

  template <typename U>
  recycling_allocator(const recycling_allocator<U, Purpose>&)
  {
  }

  T* allocate(std::size_t n)
  {
    typedef thread_context::thread_call_stack call_stack;
    void* p = thread_info_base::allocate(Purpose(),
        call_stack::top(), sizeof(T) * n);
    return static_cast<T*>(p);
  }

  void deallocate(T* p, std::size_t n)
  {
    typedef thread_context::thread_call_stack call_stack;
    thread_info_base::deallocate(Purpose(),
        call_stack::top(), p, sizeof(T) * n);
  }
};

template <typename Purpose>
class recycling_allocator<void, Purpose>
{
public:
  typedef void value_type;

  template <typename U>
  struct rebind
  {
    typedef recycling_allocator<U, Purpose> other;
  };

  recycling_allocator()
  {
  }

  template <typename U>
  recycling_allocator(const recycling_allocator<U, Purpose>&)
  {
  }
};

template <typename Allocator, typename Purpose>
struct get_recycling_allocator
{
  typedef Allocator type;
  static type get(const Allocator& a) { return a; }
};

template <typename T, typename Purpose>
struct get_recycling_allocator<std::allocator<T>, Purpose>
{
  typedef recycling_allocator<T, Purpose> type;
  static type get(const std::allocator<T>&) { return type(); }
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_RECYCLING_ALLOCATOR_HPP

/* recycling_allocator.hpp
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
*/