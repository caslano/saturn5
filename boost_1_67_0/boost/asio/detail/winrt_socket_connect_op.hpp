//
// detail/winrt_socket_connect_op.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WINRT_SOCKET_CONNECT_OP_HPP
#define BOOST_ASIO_DETAIL_WINRT_SOCKET_CONNECT_OP_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_WINDOWS_RUNTIME)

#include <boost/asio/detail/bind_handler.hpp>
#include <boost/asio/detail/buffer_sequence_adapter.hpp>
#include <boost/asio/detail/fenced_block.hpp>
#include <boost/asio/detail/handler_alloc_helpers.hpp>
#include <boost/asio/detail/handler_invoke_helpers.hpp>
#include <boost/asio/detail/memory.hpp>
#include <boost/asio/detail/winrt_async_op.hpp>
#include <boost/asio/error.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

template <typename Handler, typename IoExecutor>
class winrt_socket_connect_op :
  public winrt_async_op<void>
{
public:
  BOOST_ASIO_DEFINE_HANDLER_PTR(winrt_socket_connect_op);

  winrt_socket_connect_op(Handler& handler, const IoExecutor& io_ex)
    : winrt_async_op<void>(&winrt_socket_connect_op::do_complete),
      handler_(BOOST_ASIO_MOVE_CAST(Handler)(handler)),
      io_executor_(io_ex)
  {
    handler_work<Handler, IoExecutor>::start(handler_, io_executor_);
  }

  static void do_complete(void* owner, operation* base,
      const boost::system::error_code&, std::size_t)
  {
    // Take ownership of the operation object.
    winrt_socket_connect_op* o(static_cast<winrt_socket_connect_op*>(base));
    ptr p = { boost::asio::detail::addressof(o->handler_), o, o };
    handler_work<Handler, IoExecutor> w(o->handler_, o->io_executor_);

    BOOST_ASIO_HANDLER_COMPLETION((*o));

    // Make a copy of the handler so that the memory can be deallocated before
    // the upcall is made. Even if we're not about to make an upcall, a
    // sub-object of the handler may be the true owner of the memory associated
    // with the handler. Consequently, a local copy of the handler is required
    // to ensure that any owning sub-object remains valid until after we have
    // deallocated the memory here.
    detail::binder1<Handler, boost::system::error_code>
      handler(o->handler_, o->ec_);
    p.h = boost::asio::detail::addressof(handler.handler_);
    p.reset();

    // Make the upcall if required.
    if (owner)
    {
      fenced_block b(fenced_block::half);
      BOOST_ASIO_HANDLER_INVOCATION_BEGIN((handler.arg1_));
      w.complete(handler, handler.handler_);
      BOOST_ASIO_HANDLER_INVOCATION_END;
    }
  }

private:
  Handler handler_;
  IoExecutor io_executor_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_WINDOWS_RUNTIME)

#endif // BOOST_ASIO_DETAIL_WINRT_SOCKET_CONNECT_OP_HPP

/* winrt_socket_connect_op.hpp
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
*/