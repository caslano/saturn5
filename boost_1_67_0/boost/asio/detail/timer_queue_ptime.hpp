//
// detail/timer_queue_ptime.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_TIMER_QUEUE_PTIME_HPP
#define BOOST_ASIO_DETAIL_TIMER_QUEUE_PTIME_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_BOOST_DATE_TIME)

#include <boost/asio/time_traits.hpp>
#include <boost/asio/detail/timer_queue.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

struct forwarding_posix_time_traits : time_traits<boost::posix_time::ptime> {};

// Template specialisation for the commonly used instantation.
template <>
class timer_queue<time_traits<boost::posix_time::ptime> >
  : public timer_queue_base
{
public:
  // The time type.
  typedef boost::posix_time::ptime time_type;

  // The duration type.
  typedef boost::posix_time::time_duration duration_type;

  // Per-timer data.
  typedef timer_queue<forwarding_posix_time_traits>::per_timer_data
    per_timer_data;

  // Constructor.
  BOOST_ASIO_DECL timer_queue();

  // Destructor.
  BOOST_ASIO_DECL virtual ~timer_queue();

  // Add a new timer to the queue. Returns true if this is the timer that is
  // earliest in the queue, in which case the reactor's event demultiplexing
  // function call may need to be interrupted and restarted.
  BOOST_ASIO_DECL bool enqueue_timer(const time_type& time,
      per_timer_data& timer, wait_op* op);

  // Whether there are no timers in the queue.
  BOOST_ASIO_DECL virtual bool empty() const;

  // Get the time for the timer that is earliest in the queue.
  BOOST_ASIO_DECL virtual long wait_duration_msec(long max_duration) const;

  // Get the time for the timer that is earliest in the queue.
  BOOST_ASIO_DECL virtual long wait_duration_usec(long max_duration) const;

  // Dequeue all timers not later than the current time.
  BOOST_ASIO_DECL virtual void get_ready_timers(op_queue<operation>& ops);

  // Dequeue all timers.
  BOOST_ASIO_DECL virtual void get_all_timers(op_queue<operation>& ops);

  // Cancel and dequeue operations for the given timer.
  BOOST_ASIO_DECL std::size_t cancel_timer(
      per_timer_data& timer, op_queue<operation>& ops,
      std::size_t max_cancelled = (std::numeric_limits<std::size_t>::max)());

  // Move operations from one timer to another, empty timer.
  BOOST_ASIO_DECL void move_timer(per_timer_data& target,
      per_timer_data& source);

private:
  timer_queue<forwarding_posix_time_traits> impl_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/timer_queue_ptime.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_HAS_BOOST_DATE_TIME)

#endif // BOOST_ASIO_DETAIL_TIMER_QUEUE_PTIME_HPP

/* timer_queue_ptime.hpp
qzoXlBpSC/mr+imYNnpEJth8KUxlCW8pXbAsPwrGeztYJyKf98JrUwOTaCUSa65TeS4Iu20awVbGqQ7NF1k2aom0fGvyRLZeTBax0mOmhZ6ltm8pC6CDOTZLryfZLq9iFkxZ20EshJXsK44qtojBAt3QJVbErjjV+BpYFzx115xkzjbqFLaQsAy6rGrOpl1fXA7kTd5aNmidc8aJBGgwpZTFlS/lwpWNVLwXej/NvoyfXX20R3WP6lUsIm2FzPfbHisnHXr83KORZSlzRJaK4paQEx+T868JBKAxI89ipRTcIETeG3GwdOYJ4JDeVg+C85VM0Mh4Xg+P/BSEwWibiJ9kthoSaKK9HRh3AXgDdhrbbUb4RZSnjqkRvkR9kQR1cQ9aRbOxMgqQKGOcOr7vPXLw4Xgf3zNSaMonJORhrmpkdUnsoG2U8SvBSvXxbamTnS3N1Ug2cziHHbGic1V+u8QV1jWylqklVp18Wc+wZs9+3+hpXenT8fKMTG1/G8XnhoFXk1nH6jLx09hCVs9P1SE6NHnf3MIXtvyDPTXXBhV9SCBvRlrPQ5qRW+5E3IITx9Zi9wQ+wBVKQS820Wj4drylRCtxuQxdBrGUc4An5og5djjQPi5t183FgEgtvCXnDRsehvTLbNSHf6iv2/HtM8MylWz+HaRIIlikr1KnH3qE7lOgdnt8LKuGPkzJHW+pgZ9+MyqNkJ9agC5XzUtJBd4ltFarCNJlJgGHwRpYjfbK51NdWU0XdTRizYKxp639Tz0LXtoxwWgyfjczk4kG3gQjdqnkgnnp2PEgv3RRm4748nEIo6lkxw/1IjFdpsHKrVPOc+3KpRs5aAjIWTB+zFA+TfmilFWSClf3o5Vcdw5NFCblqAtaflVoxel53Dm2lZgYhx0mr4g8EmMVF4rbkJcX+OzEJu7Q+6Trmc7FeEwZQG5C12zetcZpHG7m9j9r1wwIi380z8aMcQ5z6cjHxtBWoJlxDyaOMjakuVrvmgdEs4sRuMl8GyE3Y0jmOVt497Bu0kjKETdHwsp8ltA1XxYvDnsVmNYpqUUkkaPYpVx72keED0+JU4e35pbpOIz/0Q7xMDxiYO8Xl1u6N+MRP0qBoWVYvlyTAetsYb7WjwkPMYp5ShlbRM/XxffRn2pt7dWz7sUkHluVJfpzY8AFhJBMjENoL2pLVWOz7vJoTKeK4YguwI0KhgaF/mL+hx52qhgzpttluL0B9+MROYOYCHjZVde4TMH5dTztXT+ENXuYljQza2J/NJF4id7OsfgPY3khGDVdepHq3zHMJQ3jSxrhy6aiX6wLaGi9/ZGV01H2I2cONDHoRRQhmyZEQmOuVrOLM7K2CNoTuBHtKpIe7HUUydV1RVO1IjsX7NVRjUXR6ooIuu0OKaHLl2KjfNQCGOTJtLFDp7Q0zta91Q3JtITltrxhTU3NzkS80Sh9pGRt+OmOQls0TOTNK3MNTMnQnjjiOmyLdYyS/pJbGCUUE9NLbiM006qGem+QGCpFA5icUVpWsa0Nxj9DwaJ0Fy1hWdno844+sZaLfy0XA0yhRlWe2WOL9N8zcJYvKlR3njTFq5JIThYyS/h12bp5/wljVbSyF9TLB4+8jCwAZNwE6055faUNNa75EY8MPTyNIEISC7NlUga8JK6Gj1woxDFql4nG9MicVDRNt1FDELcPhW1w2ks7Qx87wwTo+/najbIPK6YkT5itFZVxjjf2hL3sjG5Q6zs+XgcLP9LberoiS5fTPV5l6tsLBzvw5dbTlVw3aipthfpY7o1jiqaEPsofeZ2q8dURpLjO1sh/eD5qV0WfrCFZWP93ll7bC/bhvHubSLOImHjBIii3cnvMy5IcRAcK8BnJnEjTKVmyVquJfoXeBL9/V/EqzrBICtxpqgVUiKNb745zeqnV1TVHR8V7A9rnZh/mSY5hBVFbtpUC7juQh2/noWbDvdVng87k0k4JtRLzNKIkHf5yNLksaSVvCeMbeOi+1NWFRe9AP57c6BFVfu/9LmNxDHOKwiXN+MGjFay88OKTZS9bN2RB2oIzLapnH7u0D8flENIeIa07cUubsALuR4jvEPQOJ/toTMSzEJYsh+Cp8jnkayA/ys74RaHm53h2Y3TIcT+ZGa5F3U0vWn21jrM1bIIvz8dKmuZ/1PhGFUCneIZCVhLbOxfb9FOE/Py5aMPtPfP5ZS+cXv38814fmcN8ZaXTtM4+Y7LtOmGC0yQlVqVNihb5WhKvuKk9edCSAv9OFnKm36uDMdDg/oRmTDRfsPhunGolVvshQCYPgpTcIS9Rh+jtFuf7X1svk1BgMfdC1YLIJWuyr7/OCmBVS/+at41xxPn4F/ByhYbbRPbsLywODj2amT5Dkamu3bb9Ay+eNloScpjrlWNGOhKkumCMoy0e35FwRP6bXaePWranmLiqOGqeMNRYOqzdcXDxSObWXrAxcE3W/c+QsDLcN2Yo7OsSqvZA5uuC2YIjSYamyJbapvy7va5WvbAErNomfanuCRownh9jeGX4sqtQFb/cio+KjF86mu7MC16uTx1yGu2yVHIQJe+oEjnwYtKI0mBxwg2ov9XyCoFx6OrL6acatVfd2/sSZ3VNAooTWqIqsszRpLdtln3pC4ZaI0AJynBuetYwor5cCo2smQvjZHAF0h2wLHTvHIjr2H7CtR4eWhH4TaMffZ+Dc1XODpf0a+YzExF3PyCkBaojM1pixbmXIB/q5QrGIym1ZQOkz4uDfjpCE+FdXAa6N7s6Cz8ppXai3URufDHY9R5yXjWwj5QLkFWOI1RdL14NH+Z22VZBYg78jaF8ZHMwRzkQdOs8r779SSPSVFQYTzI673ZJSU0XL01H1LCRaB5LY3N0ZMkpTSi+A564u2kNwoyoKI1s1nPDGh4X4ER8s2s+rWDgvv4tGqdhivAqs+AIe9vNjY6Lrtdu+8WwTdt1DI33Oi15l22V+Lo/37gazpZ8FN6+d2rm5QxxZ60JjRvPRAO2I+m8yHkzf87a91N1ynCdmK5MeRBNFR1Dj58KK70mB9Y+IgfzdLfL0ucNcxV+aN4/gsifx1Du7G1wKqyOc1Yw0jTmm3Mz/d1plLw6lv5wdYjS79/fXyAcAADgPyB/QP+A/QH/A/EH8g/UH+g/MH9g/8D9gf+D8AfxD9If5D8of1D/oP1B/4PxB/MP1h/sPzh/cP/g/cH/Q/CH8A/RH+I/JH9I/5D9If9D8YfyD9Uf6j80f2j/0P2h/8Pwh/EP0x/mPyx/WP+w/WH/w/GH8w/XH+4/PH94//D94f8j8Efwj9Af4T8if0T/iP0R/yPxR/KP1B/pPzJ/ZP/I/ZH/o/BH8Y/SH+U/Kn9U/6j9Uf+j8Ufzj9Yf7T86f3T/6P3R/2Pwx/CP0R/jPyZ/TP+Y/TH/Y/HH8o/VH+s/Nn9s/9j9sf/j8Mfxj9Mf5z8uf1z/uP1x/+Pxx/OP1x/vPz5/fP/4/Qn48z9nX4oCrYNxsMAe60P2gp6+e1PjyHaqnqFzDnj4kcxi7aDtqfFLABnioRsCvD+7rNR0Rc6+q1pvzuBUv1m7KlsAACz/08/DUMS0+rZC7+MwSwwbrvriMlEyyoj2Mqgdc7opcs1Ueiu1yz9uy8Xlkp+ki+jlfMdmgZSoRerDqpxEgRkT8VKgOQHiXgaY9to3ipz82+mOWdTKTWMJCU6I2BPnsA7StwNwmnR227es7CCHn8YqBpIKglZy1gVLlkhbtE0JRdbDbyNzPGMq3wBEKvz7I9q5PIVuLS1h2L02Cx7j/nOIsvffRTgp0R1jve9ZJEivPL8Uf+fQ5kZnz+hIDmE2M7l224rOhCxATelaJNpno20/0xFhjHWvjaQ7WpoG/jqmwdAvkJpxzuXbavAxTSmWOUMYtcjclB3pu3WwZzpsJjAXaSi/3/QqBNAUI53ttEbDJDC8jprEcbHuP6WuAAJfd3a0utVzzN+WFexqYrPrdWcpzwiLW+p69stjKB1ZDl/ffUHBavgv1bnXDu4KPMVXXdLarcivPQMaoRsPBAT4QlRFZ2yeYIA4xPeBEEkGezR/Y1/OVsuX6QruMKaf9/8SZFDXS16Q1jNmBG9k32BvZYLywrdyC6cr+J0T82ZxMcg0olpbhteYmC26mBsHgdh2X5HfNANmSRjW3IkTPhFizjRZTo9yJKfg67fFwN9NQTQ5tIdCiPSVpqzAdFmnb6dxxNR6uay9HKUJR1gED1Mc03Qx8OZXM8fRtjQmLZzGXNeAxy7t9PLj3s4WcTGG3mEw+PwqLgdfpxZLG6P23pWGwupWPbdj/PgyV+DnD1qrjSHyrRct2HD9dl/9oDVuuDbn4b815YK+7wgDqGjZ+udoakm9p30mKxIrTQIYuJH8pHlv8rmjmutIxeYS/MsuFR3uhX2V2o14G/ufa0OGvXzybWv2Mrf16l/A8Ae83bGjwuqYHgI+sDrs0C8USB7cYDDsVevOXKYs8/LAg2CLzTOhb2829Tb09A2pbr0KOmXe+3anakwkXPguMET725ljhHJOmW9UBKz65c/gThwUuPF8HE5xY8JPgJTzheNP2EHC388NbrkDvaex4TgF+gGSjfqw8KYve68R3Y0WcSrik3beU7D1wVI/Clz3HcUxap8AfbafDRIjuSt0MqlsrXYmrBasSyNakVm7i2C08u7OhzhnfooHh/e2tydPRZnlCTDggnKKE/ky4deAIzohL7ZDLjTNvDonvgZ4XsdDuvzgmx6qx/Feiv89n5AudK1SzYSExI3ZMGqCHrlcAX6Vx+4ZtrRPMFrEcOfF4VBEEN81QU2AXu47niY5UIxYbuOMnOfSXOSwvIMMdO0ljMW2OnbpMxMSkmRn0C0WeQbr8UP5UcpN/k6eWGvWniJEcHO5uX+0TtZdIOaJBd7Chwy+L+5FIVKiyCpeas5GGMCYLIjwZMkYvnkBwgIpl8rq3aEl5jcsV309Q46z16cjickDtg9vGcxj+CewPNiMISVDV9/Wr19KNTHk/zuV1SvgIpwyH27jGlBh6pFsH1B/pLFV54dBZBd3YTzqCBBEkvl5npgrGL4g9noqUtU2FePCIRoNcAhLuB8mihLSv8c8MH7oqnjteoF1cYi/OS1s9nge3ZtVKgrWmMqAXmQL+GnnAH5TJQJzWpudt8+JjQUJj1XA5Gh1TcBMFTt8fHSczOs5I0izXqhBqLLzwWmF8E1Ye9mjju/vTgd7CS0tdtnLWKLh5jElSUUbP7lhlyaZepQoteMDX3i38VSZgklIkD3ncLg+W/SX9t/NJWkmm4ToZuJYDcZln9IjvfVRwbIY7/+EMZKL+cABtHgwle3XAQtSpfUHU3Q1+5DIs4uAoZC1gb71Evm9mikpf/Dse9qzaSP9ps3BN9iL+zhWwuWRA7BmHaVZbVi+RB/BxFDxaubXToD9wAAVe/UWBg+6W+ndDnJ+udMMFOTS48eE4U0Es8gGBMfiUmPSdY9YVY937mwktz58C7lvqVtDHF1BlsD8UBr5Ee2IRN2rylXU7zR9of3vSGtX97TxrrdxOgQSSmE4cMfYkjyQN8sWMaU4FsvTHnPoHfoYjadsAHftFDk1VkuxdZboltq/AoE0ffVTiYm3NAiZdeZ3XP2kYUIVyQ7cHeC4HgQZd42YTo2Z5wxcrXE+7xM3ksjml1Mk1WEHFnungCAgAZ6cGjJDBY8GdgKywhknhl109BYmKRk8hq+eE7nRVQY6fwGTinEe97+ATsIT7jqftof3IOk63LIyPpFW/rT+uvNg+t4QVVZD7FuAtU/yfbsJBE0Zfa9hKsEbilUOgWZL6u24qtud5eQCtlQflWkNLMq7lsDvjEF1AJG50I32WRbpvapvkPJsOIuhK+uPj2RN7xco4rdMQFN1mTY5AseUaAxit+9t4rXI1l8JLPbb8De5+gwidlZ/8vcEo3xjO5kfCQOgIYeENPkAet+aA9aFJwuBUOLXTmemcaVB8Fl8HcC8hLpq1QvBrHrYD7nbCeWqe5lf5seBdNvvRe+b0P+YnZ0XgYXviD2srYn5IIiH5SS1IXDu5iBdM9wX9BlZY052Vw7nNINieZGVVF0TZ8STKoBx6QNH+KTmGqyBkK9vYSz4Bp2BrubnWLlEk9HeZMo+a3ifwpAcqU1S0cD0oNv113aZO88E2323x71bej7udyCDEWQdIME4ANzkFvdODwG2UHC/H5tYDmbCxfrvQczJAwl+xjM9mNuz6mC7vWHXO9cF0n7WHurkyRORYjZcMgEFkKcA5bdlViZfKgd4i932AX0pGHw0/fC5W+W2afLce/PLYKF2ZSToE9/Uh2PQzpzHBsbygQzh7+SOz1jbgSl3EQR9x8VqYX0YNO+SZ6mxNifL0uOY/q1FXV9DBaLbevwYvtGbRWKo33br4NW3cX1E6eUCWF47I7HX4YJdEIdAoHQZpL4f5pinuqHu0C+towBuACnGCmlkZN99eYLlT4iASc97fFvfBemNESW8ZNOoI6t19Zi1CV+ye679MD8Y10eb5738U4+mK7MtYoXNy9/kPnRvKewOKCgbMFv8KFGHSK9jx0bDujSArsOVELFoWIDGx1nhj+Eoc8vp7d+ZkmIR4NXUGpekn3WloXsjke9bR+ueddbt7Z3RG2Zq9OMTfhC6haUihMeh1zPU39DVB2UK04cl0h0t04eGM/Ng3l2BZFgQHSooXZTaluz7CfJK9NPw1/I0leZ39cXiN7gmkE2AvtBIybOPRk+Hq24hb9bzrH3TETvdxX+/UxrOxTY1WbUKsK1ufC5AElrDa4C9xnj4YT1Cs7lRHcI0JO8BSeP4TfwXeYYJbUOi+oWW3XuC0s2rO1faBkgbMY7Nk0YacFiMBWt6Jsrm/GF247T9gbqx7tJRVfzEZgc7jc0DWo3y5b1YUEIKJFMVQHj4b/VfXOBQaidgrAHUoi9oWQhOMvbq8tgZI8M1Kia0RxraLmrTjq2DtH7rZFN2ea/3cj5PKrLZv0NQ8O74W93NEjQbry1FTLT0TQkJ0fX4nsN9GATxEi94CHV1IUSwZ4snI3Qf+szpslHMf0x7dY20Yvdcun0tivWV6nasvbhGWMcwDSI2SMITzfTlNFvGvJ0ayw7+B5F9xf99Kv/zMwDpor5Y6gXoPmqpWHsKadUpuFKoqdaWKR8hxYHDPqWMtIXt2AUqMwxkkR1PY4NEDYFVummjF7ZXP0ArIvwmnMtUJb5yYrK41KlCSZnCAbxj1ZZhuxb1vs8m9gSaegkdbVf/0OPYbUvqP5y4sVDgvgNZTfyPoJXZ6or4mV1MAPwFXmW0GiiA87bwdsy29xIFlEHSQHN/aapBOwFOR/7hGkoYZw9+lMdZktpcNQyqsTPe7WXT+FJ6zgY6nCYJQSybH17fe1iNyVJhzId+yJrRnlAitrD4enXqkuHLynfqK6OZIJYgBwXrdNWvVSAY/l/eqmnqeHapFFagP4INo28aJ3dbKQT3PLWcC2J/uqD2EqqmkJsVT1QUMJ8+p//gGngfkLmoODbINMP1nPLLl9qJ/k3jos5gBMSLwB0maZr5O40ToSJqNjvkV8QnRJ2NYPi+ooHmhiw/z6gCMkhwJgh5+W0MVHo8pvWIn1Thp08zSXPcHSqHFEQ7TloAERIb7+0Urmc4rX3KKeSNugHwT4QH5d1sNG1btS2uZX/3eNfsOjVom1vSNQ7wdJzhTxbwdtAI0iQuDOgCVV9xhB5PXayE49FVHJ5AfcUYDIzVQkcTKUcvVMESRBHaw48O2NQYjo2OmA//8iUwzYg8Dd70vOVdDFcXM7k+fXuPToQ+bKICMKxb1HZQv+RnCfT7f2lE3Wtv0yrDZ9PieTbd6qjaaW3F2nn0l8hyvfIbdUQ89InG50t7aTx1gnT7SArAIIzWESkPKf980spLGkFucyNGb1Z39/37K3mxA5C/3gWmQ9hkDdZDgF/eOVsQwWzsKELefEu4Y0iFLj8fuesnnToc/DQcecdRvdxFEvWgvLkE1fUxJHs6sO5hMqa8HNx9Zkjq0h7zoL0u4JEcelEb5NWsI8mrbjkd2WQsi7gsrpwj0ewlT+7PbdSxV8kCj7OSi7NzNGIzEuzGorLTsMrLDxH6X3MKDK/vTuuVPaDenHmAwJpmmZ8WcMdsh1NbFfpotjci7Ja6Gfkz6eo0XuPL4R5wY+H51tpWANqwIdPHE24isYwiwm2pa7BYbRK5TCy+M4V8fNO7VkeVLeMi/bKRs5YASR8NVSU/IfK5tiHQm9lhZsNA1ZHVL3sQAlXwEfnzKug8oeZqYP1Y4Cr0u1bMZ1MNN5q/nMisp5U608ufLVLH044onwSuU4eZ7xylncVHQfz/vWBueqnONm9RB8qkytwf4DKb6voO0qOorsqBDSiZmiFaU8xvF/qHhsTccO9VtjJ+ANhurk4EILxT7F9mNqzRNQ9TPj07s9XVBUpbuW2JIciY9sgSsYMbgtEwq84wSb9mFoXTu5RgjKDdeUOr6Hiy2nR12rZEtZRnmoinlYmQz7Q36Z0qBfZWD9WawYPyKior6k6xHgVw3xQvDiolu9CLlFlHj7tfjjFsGNt3OlDIya3kdz5/3DbDGit1xNuoAAmjq8QYYfO2S5kjQFMCnbsfjKXhNMgAumBnXKHcOH9helgkfkMf5YK0OnyWw7OmlU7n+b3n/ms4koS3WHeGO1L0LUZMkMcMSCjGRItg1qyVYMXO2Z7chogmsZ70ujrWAe5eYmAij+new/MA3Rrfcay6lpaqj03E3bs3emeFm41MEr3q3ckeniCQrE/V7Ny5uVD6NglABTGORNkwGV9Feu0QKl4RAzDWkXxNHJo6t7Gleuw1vkzhnGcZ3JMwW/158fsonF2rNrAyviVJmAAOfIVg0oI8G/7PXbSlbeWHatVZfJ2PZ4SNh/4///qyH6d+7itnO5Q2WWyEEXf0LV0BlhOe1k+Q00TMMdQoMOKhewPro6hjC8y1/+aOkXH5Ita4W/jI7Y1dwZs6duueHyKuMjpmc7xE5yeelzB9+pqiGi7/Q7RfC91rO8p1l03DCgKqAxGaKcdEgFpRFkE3TEDuqz0oxCaExehcYryOW44f+JIu3b2C+Ab6CODAjnBjqHBcDIR6qN1aU4fQfzPwQIJ1Fi4aQGlXR9olCa6rAclaOSsuT+/gxmwQU3o6ZfvQzT2kk7bUVmSnz2jbqjvBlb/EM68=
*/