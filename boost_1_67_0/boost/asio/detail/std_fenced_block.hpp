//
// detail/std_fenced_block.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_STD_FENCED_BLOCK_HPP
#define BOOST_ASIO_DETAIL_STD_FENCED_BLOCK_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_STD_ATOMIC)

#include <atomic>
#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class std_fenced_block
  : private noncopyable
{
public:
  enum half_t { half };
  enum full_t { full };

  // Constructor for a half fenced block.
  explicit std_fenced_block(half_t)
  {
  }

  // Constructor for a full fenced block.
  explicit std_fenced_block(full_t)
  {
    std::atomic_thread_fence(std::memory_order_acquire);
  }

  // Destructor.
  ~std_fenced_block()
  {
    std::atomic_thread_fence(std::memory_order_release);
  }
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_HAS_STD_ATOMIC)

#endif // BOOST_ASIO_DETAIL_STD_FENCED_BLOCK_HPP

/* std_fenced_block.hpp
ZNNW/2xA33Ia4eoTRdCE/sZxO4kLVS+vAiAuPHVQ+wOEA0q+75AoRlZfKB2RsxS7gEHV1JskmSALmSVvVVcDbssPUtQuvdryijbRNE5gV/Y8r/o5X1Li5kXKfmRiNqdam9SN5W3bk2VYyCMtjqmq5DDbmivgW6XJzRpzmG8OqN2pIi1q6iYeHWmT1pyI+Ipf5cA3eRgIhOfaGoLpirQZ8O0u19NKxGFFen0sWxIuaC1XPixMxg+YmHYPbDArnUI4KY0iar9pD8Wpf0LYyNGKnT30R5AjLR7Y2weeds0qdNxuTI7fjwKTfmS1jVgpi2ErTQriKAZfsA+DdrIKVlLmaZGWd/3bhCKLzdi8Yg3FJUeL60Bqw1osXBXUCWBl1K31Wkm5VmrILAP22Ckzt7d52zUs7xnfk2a3xcuTRRas5JpHhH8FjxkzQEsTx0EpRX8sy9Pp1gmQ/j2jPgzDeUgYp+DmKhEUqCMB06g/YNKyBQqQvgQ/Gd77dAqkB+8zxNwaSdSlQV3+j6D7wA4VdUZ3Uc2UrGdbcPnEtP8wsw+ckEnB53FDhfLq81biYr8Ej3cP6UR49zlOdh6A70Seokmqo7srz1DWRxbkBrZ5h3O57Z39p0jcqqCVAQ23LLWjS77qt9j9pWSZE7QNfe4NWUNknTEqGZjx0eMYi9dBSxvXB1Tl1A6iZB5KATvxpWjlpLYBeKTW+Fp24AoavJYat5iPoEtyWw8uP6pV4GfDfm+kl0IHhaxVXVDoF6sRmpa3I6bMNFrNNik4QHDo7aXGjd6Ni51CYC3ji5GAwC+RvO3KJ6JNnlRBodgRZ1KHpg/RCBeZ9oXTIsSYC5AphibUztGr8Kqsc4STyJG/+Jab9N0ZyCMcg/kkH0elnuR8uPMWYxAqOQci3MXHkV4Z3scHRJt0EVZhpwK/e31MwRzoAZA/2PbH0XktVqsCPHcd23rAB2EmieKsSOSzzOVV4NGaB0eQhxXZjXxC7j6+42UZ5sF36QAQwHAq8uEG6H44/BJu9vSUkB54eppYuYVW8f2qA/XETJ7+y5lzH2fxhKjX1IbWxhupYULLQ+espqY9SUSWFsRs8f3L6SfKfF2n8T6VckUufqIT/IAIpHvIU4vWOhVz0MylP6X6Pkw0byowXYFRenV+BhRFDwyYmQb1g0YUTEr9oc2a6shXFNndNkIk01/XoFxRd4WW6Ceb6Ke4Zs9lP/HASDZc7NuW0Xs2MFSwJ7p9NeSrSLpo/d92dE/VAHchlyR8jupP6AwTGkig1uZfHxWPMvhhDly768HW2LRKq9z86nAZfoTmmdTu35e4HZYKgw5iWKjfP3yDzFiWc+ZCrj9wcF0tIrFmNAFbwqTwInNEMyE1bx8OxGbDlHV5ZHVl5Lwff/oac5PJQd5XvxuqLe7/RGq2RyQdafR6jdj9aqrlSknesrFdV9RwikYBrdUlGdGIMh7nxR+gAP4I7EsM+d4V7ouHBOxb1HSbC31SliMdpBa1PKhdPr9/Hm0xTVIT+NmjF3kVkeD6oyJNi3A+nN40aT/5dMLwkW+OEhra9pwbNWmjfGj1K61bL7xSbuK5U9S5srBqUqwW0POqngeBsPATUf/4PXxU1L1twrptoA2bmrp85B/CEHAG9+B/z46YQJ5hkW9xbDsGZvRhram6c2P9EMvgSnlvRvJuRmI3VVL6MTIzMYC7ormTkBP4K59wNiZ4H2bvPfBkx/v4u/yYF3gzG2qdiWe3lffgR2CcVOfiptQIJMnF3cHBzVtv54tR6WYPZtGRrqVeL6nhsaGpbjEm9YWtlpq49JFE/os9WfLfXmCEpY6WtHpmXJjszMTKSTU3zTP6rG+2hzZg17/4hLSAiClyBShovFPARH+zsTGKMYnZf39DIS/fYI9vVEB8lGBopH+AlJSInJiUiDD/P4Pi0v8MS8gIDfaMjE1P/cfdHD3/Y+AvRaBGZz9FRuJQVlaGcYYJPJ2F5KCUpOD8Tds2It87ZvYnEkAEjIUC+EWC2yfdMkLfW8YX/gYPAwI+7HmL+9eHjHKjJ6T3w+wM5x8AAH4Juk8qgDKHCPNmx1E1uu5XQLn329r4m8T9eeXnaebE/cvNHfVA75oa9M2vtMmZi0N/BT82/ruruOnxc7vsmn54pB9Wfn2F8xt74adjc7r3Bm/JDX7KX3l95Vd+jXS1tZCdvaCY+LWwpXjVJaCrC+cq918wC/0/KbHAnG9JmzS0tL0UAKk7YA/3dtI3gw+eOI7WZI5/mWlhuBSDk695FddbX7+wzbh1MP7CF0B9hFEAe7mIfcquFABwtL/8SuOc7xycv/ALY+2cFG3+v0UJk4HZvNq5RQP4RCGy97MSSbLQxjdHJw9FmVpvX+vj+KwGSKf4zm+9hN+/OmGnJyff9Mruo0f4riQ4GPiO3HGqNCytJkgWqJv8KLGa6cfFtN6SIy8sOL0oyxOE0U7WtoKt6BHULNdrbb5ieAP3dBJOLwYTc58zzE8XNa0OxzlLn7KDLDFx2ZbVAnh47YLBbIBoJ+b4fjxsrPNHq2hQMF04mW1JJItXWCxLbegaSxIXTKLMXj+EgL75E4f+Fveje0zV6LDjqlQXMmVWmibNelLV8Bc82g27N8uHtyc02R38t28enA0XKvKqrropHjlbYvyPti9J1HmUM5d8nF5qaCQzqIyHVQM0192KkQOv2ksen/slQ53jLGwyvonr7wmNSmAql/g986IoR68y4+Aod3ODGnD1bkqbXbMzLwh1v2t1dMaVmMndzFZKrA5+zTxMJ9vWi5mTcT5LQYMRWMzlnc6iEcAS9s10HNKKmOhLpsLM2Uv0vgqJA+UUXMQIr0pdCjnfx/I3tgdq366Z64SMoHSHLW1AA62feNNHvRgSOBsvLTOXwR4nTkqP2rUR41w7IGNuNiiTOzSp5kxziffdDzzq6BKz1/9RdpqSHOmvUkrBHNZzzEM9+dkzwXjXXsi4dnh4SI97NlmqBJ5Udy4w+kQvUzvwP/5q9yYEJFDDkAzel848/KofAv50jjzaRQ8jjgD9jNjhtOvjnNlJ2kLB1fyKkCcyuDV6YiFnpcYGZHYAJnGMrWwJakCTYWzT6DdP52zlSW3DcP64+klx95+trYyHyu4guYatdXzWjdWXp3Nr9ps+3Qa+noMZmC06rrg2+BB5QsHt9N5kkVv7wR75pUH8ZdRX1l98Y0ecATVeVGZzayzd2/tx8vmRy8UHYvjd+waY5D/e+A1n+RVGWATGQASgB7SnN1B8kIxE4oM0DPaLLwq3hxiTt0Qbhgb4ShJ+q4TAgwO8J0UCh2KDK37DH3iJaB8E1h94eXD2IAlXFU01VzdFKF85VcknsHI68kvx+/54RlYNHto5WVgZ09btHlOtPtcs76tS3t/dQCi+zKQ7bqa3wVwyi78YXKCiyspXpjpV4/k0Ohr2TEnZ/RADD05RVn3R/c4lIiFqoozQJvBZ3PqK0kx8zxZmSJaDLFnrN1I+GIVxsQ7wS5nxUvYYae6uc7RwcfQGCS+Lv5hSe1sGtQ5jCqnu5NQT1nHFRrtGh44t2l52cU9vwlSAnakg14uRvJRVNUdd2Ih7rTiX6m2YK1sNly9XJEH9ZTu8k98Y9auR+PpN63P3/w3s+9EroCzgt7i4DYdCBACPC74r2p/vC4dKFfviLggMCkNEZaMr5SQNa+OCS7nkR1p53l7UA5nqXi2T151mHIHvr647aJVM0lUwTcQfAbFpDbSWb1MmZv5K+U/IYU1ZORlWaX34IkAx9nm4JakE8uiFzUl0Y5XeytQTjEZCoyBv/0gf4Z8CbuSUbN2Bt00PE2Qee93HeYBdJB+bqh43QgmCS92FdJ8t9rm5rNYvpQsUosuRRiKzYTNny6EUlXSZt3CBbhC3dEgLQrfE9ftLS75geauU//TOmrtPzor7CsqqAzYWnZNIUwEvuLSH2iA7FGpeZOCrcctU6oudmgITyut1tRuZN9Sm332Xv/pp0pCMFNlPkjyThNe6n7d5bT0YCyFuA/OHaLUEUY+F60RN3k9tePShXxrhwLcfQgIvYw35KzouYR8F5H2EQ8LveNtPbmV/f+/QicB/KOxuol/iDx1Y3OUhBForT4GLGZX5K5FTM80TW0mohzwyN4xQUclYokiiUPh8rpV+4wD/Gc9fHacPVLLY4BzG7jqx1WDYYYu3RquOMk3z6BTWyzQaGRnVEdoC6hTwjFot5rJyMf0tG3v9zjX8Xusx+dGun3cmAqM6aihNV6ExBIHr/KGXAG2K+N9PRnORZimgivXhBokgM4BxpADOMXOIUz8Gx38qbU6/doe1/Hl+ye/R1vh+g7oCHeDTSQMe2HceSPJ/Yp/7XnABE6Rxs4S3UMMSlYIu8Nl/k2/EFt9HTQ0Bwg5T5iS9Hr7qFX2G/7W6GoZ0Z1W+bKJ4DfakLJzHM9kkoPdKN/CSuvS4Tw3kWdX8XFveOrVm+A5TUSPuVQA6lOaJGar4/gbOORlhF4oewqy3jaNj2FmpHX0ZESgrZFEiKEWMAViXuacNbFS7+6t9pSIEBIoxL72kXIsGytUsOxHZRqMhVKlE0ANdCm1C+6UViW2tJ1SqeJKPbFQhQ6bAbmVcD6BocrrBhgwJIYph3qBASUfHg6SchmwMOy2AAY5v2YkLynSz7CqUaQpG9vuRUBbnhrgjNulj+JVdXREHF1KZ0aid8ZdUmhpeTJ1RsX/eB/R18b28+7ALPsfF3oISfXnLwfDUH33P0g4ALV9Jpv/HKEQHfzHMALHguRaExRwrw/LZSyRS8ysbPDbe/+wHR3gAuPdzaAR59NsZpvQr4FyI2esMAPClCN9uxsL/DACQlLiLgiJZZgrAsWtYvecm1dQPULRtHcOvGflTeXzyY0fb2tDe2YkKOsV06t4w9csdRQ/N9PqOznaodzk7+pNH1/uaHYIpaF3Xk+utiiGornoBV+mHDnxkeErMltCCo6iuWD6/RzAChtAsPj4xvTV+brQZhb9b6t5e5tWxtD5vvMezB3BquYb8y6OX+7uhGZ+ctvDk4NTq6O25BFhZCtXQBNRfBQJFaEtAz04PX8uCz04fH5cFPzZDB8RcZmNt4PPWJ8WpX8zUld3FI28vC4+ODk49WnpsEIYpxlCkOdPwoDhxQvdra/NlwM+zTkaglVY6yovjl3n02/JURyaPmtsS8qi3jo3za13m5Oj4rdbbPBy1+W3oR1g9cfM8XnGCKUEpKzYNsROcNTwI/588ydsMwOaAmcsONX6CLEGt18f8O9V8TXHCM5Une/mev4MP99KAfjX/Mil89AB/9zZXkWZw26IEdz3CCCEjoneQDaCtjs73Ni5SFjnT40Oqj0vzm8DHgm5+kFajPL2x5bFNwxNizn38ghrL7HYVNaKZpxO6it/pmF0Vu5veNBSUOSQqrq9UjKUDkomYKHEh7gkfmi+G1sC/rx08bfUWreChhkXsOsucowHTYqvuQgvDB4eAc6kr18q7pI3VTYR5PesX7t+ubT+ziUj+df8bBuiknDTZrcUT+YPD/WP9JBa391bwfJwuv0bUbUr1Ng6PXLT5kZjAz7iQNHfPqoGByclHcURQcm7uT/yx6F+KkOoO1CnT78f1b+Q9eO4H/n+pXZ3tQdUhbUkxQaig3FclDz9OCNkMRdaZDIGL+Xunv1alvwUwbN29sPFhwG9un7O/8p+zw4OD/d+tMOCg0XwG7Kt+cvDgrxR59p3y64C6eY5fOgRB4JDaMc2+Q/7L0ORmDHcaQ7P4RXR00JUS9GUmum3f0T9PlgfFqmoMDBekM43yELXsxaYVVdg8OU9yLbF4+KlxNU503wCuxdPDwybD0/IzoUzvw+4gzD4rBAn+1OYqbDbxENBt0by+6QoxTlYc3C4Djz1yKKCWvEW1Kk4qNRvueL6mj3iKGbpaHMfHrl4eAdMewzSACW6D+Iw8WofpN129lh74Dk3F09kWY90+luFS7gM0SwbYZfS9h6No7v0CktUfM9/V4aSvj1y+QzlaE6KVYV/tRQKCE2QPDqdpaz/D765UZUbsghU+/wQjP8O+hkh4+BQ15XHOJmI3Emt8p1e/s6uJDCNb4O+dhd86eslVvraZhz/lIvJYu7s1N6vP2XTJbKQxY5Sp+QSrdFdKWnfR/lOkUGka0Zhp+PiecOxyaSWDefjZqGiB+boxOsgGguDm5I/oof4vPhNJprAHKJqQQqQ5pXx9NCS5zKSCIsbvoAQXye+Vi5Cek+CLm+5aH9Eg0D1uY17tXe9nVKrz+pYesd+ZJivowyUvvZuq1X/xbN3LVWuaV1Z6A+yCyAEuD0b2idQdtPT8MwPsqr958BR7LlqR5Qy8FcC7aentat8p21266PKnpC+29thFw81KLK4Y/yTp3QWS2fXiXwUaHzIGrkzAIHvbsn0a2sa144RqlpTTlVKr1Htpc3BW69XKhYIbie0BJUTxCo3DYnHVISvL0HUfKQISgonSQWA6MqvZt0Cxog9XbcN7s5eD5vjWpIM2+hfddl6gf/kO5vbMVBV0DMBBs/VIlWhsnczoHq1AoVD+5I5LRG0AhaXVzmBy4zpsmt8SugDbuGI0B3logP0IdKX+jJxHLkonEXDzWVEByRLKSpMUFCka7Qf6w3oxVRNNkmQv6zHqLONMyohJMGwI86WzS68tqcEN2jXfLRXfEkwBVPh4goPuYZAYtIFT62PToq7dim3HvHpLVnOUwjn1KgZJz/I6dV6D98u7rESIJy4c1xOvmxQubyAOaT6HzlcsaW2POiUGjEGsHkUgwnIRncRtIClh2b98jQzSjVQ+7JcsAqnkWsUJ7GR+pS9F26RByW9uS1M/fcahez/2jJBepHHiRw64s9Y+a/ZnDf8Albw+KBDqp2S8gvGAb346TBXQWiB2CAWRx+AXVW92fxhA3H/5Qg17Dmw/1AmwFsnHFapjUFKOWOUKKtTeiO2Zkump9o57CFX7PBF+4E2cydo248PFsFJp2pxIu6d6wnNO4D7K/zmCcYGrCnqgskkmgfMmgWthLNAHiW982GE61i+pjz/G8DxG8zwWi5AQvRrokjnq8Sz46cEFJm2pTcUzFIilaBEs06Gd9xKDG0jdZJlK2KsWPiiVas6kWfYOx9GUNt4Sh/CAkL7qMJGAMJDEVypEnEiDSons9P/bI39V8Tk+e7PGpIDugZbsysX4XMonc6ykCywYiSyYwaoRA5VLvcA5HlVtVfnPs5qCvnmeoHhY4lOxM56sN4/xoTIQSMVCzFDknBcNNnmdvFhl4TFHmbvYXAhcWNDJglGWD7EqthkoJQfuikoiNfPKIj5zK2zYmaGtgazF0xRRlq+2oiu5sL0g2cjTcGjLaiPtGQ8KLakreq82NjPi4rFRBBS2Qn89SP9MDgSFZudIt7fK5Wcdomgms3oks3rGsgqwg0wtGONCkbZCgbZCCbJSAbJSqblcoTlBLDdCPFfyb4rljosJ8UlvD0sxkk8CmtcXExGCKiLBQO6WIedSznkPkcGMkEUTHHiKXaLp9CFWzFCWj0QMxdeU9lmwaTWcGQdtyRjC5hU9I7Pflg6ax3I3w4ui8ucfpcGczhGxxegON00RQ8XVlQzPOhtK0zqOnFxTaC5nhgGGpFwV0MHQQu87jtj/OPEzmh4WPYiYIGHQ3j/NwAoAfbSE0fUBu+kDgLC0AmZyA0xXB9mass0cMSdm3vX6tnhBQoZnejefh5TH7DfK+ORa2asy5fE3+KPbr9XF7FDYbEw5Lt5ysF2jLN9YqrMfcIQeo6Ce2bqnssiL2muJ+/oHlhtzpFSwpdzst7+fuOef6ND0YHVgWepLGBmdXleQVIiG7ZF4Yc3ngzUn6OSTVLwepwnlVsaNaDwJ/pedpZHH+nXQSIV61xBU2H4Gnx0KRvzezm2EG95X/03oQ7YWz3tHyNFvyOOiuGIXHahM6S2Tpea2/XKZK9hmJ68Q23DCJ69bfKkmvvJoOtyiAmsWcBSUHO2TKnO5lYf3bCseG5MUWPUclfd+XKG7AUfvceTNDNJdxeosO7+Foiorj+ucWddJoKECfP9Gq3ZFULQdjebhm6cs2XlO/WCd6SyVpaUm3IlVET70UE0kLosweid+V8T3Alz7ofjZT0nz4mKZua60tUrS7G3utWLMv3hpnJ01Gn05Ph/oZTq8EPhf3ZKPBPVcYmeZlPLlZryRBvahv9Gm/MtInZMP9YppQNGNMJH37byAsJb/a8izm1oVWvI26BDsf3qpDKbcy1oNaNbhS1PvPbU0qe8oW4bNdDEZ01WjPX3uY4alyKDnp2tQmTsK0RgwcEyx2a/swZsgFh0+Wji+zzmyvY4vEiX2aAR6LONJajLgEr1q2law5G24ezHIQmNjbAHVFOLCrTUK+2ofbiQBVSX620llVhvcIX1quOUqlTGjgWpRbsYBR4L9Klrq/9Yrn7lHwBP/cz51MTvrx/0fAByA43/Cw8vHT0HDHavL0KMrrDv6Mcmzl70RlFR0H6WMaLpcOCSiX+J04XIYZ1FYR/m8+fwVm+dNCb90FmtqVG0XcE2oWqMcG/9jVHfRGsi1SI+l8uV0JHEXUbXOAt0h9uVH32p5IeaGCNlunZNob/FWKhN8549eXbdvwmdYRF6ZRjp3Y63hn4TPsCVypr2ajSceUIZYg5iaKhZeLs3Tb/VnQ1hBfE3hC4qH1JdJp5DgLDZZSAj0BZAOH8wF0QelG1k4sPMSYqUPJisvOljy8hhmOA6R1NbODu2bX3DefgrkWo7OCB2Er50hcYrl7U1PGizZxHBL1bfTCU4+grxuNI4lyUG4H832oscoXCC++cx2hH7xY+Re6tg/R9UykE40ieHOIZBXXfxmCzumaoUpYnhkawsn1LSLjYrurIeWJsoUTnjmme/G63EC302DxCFnCF8i3Z11IJdtv/NWY5L1qKZX0uao4WU83qjFZULqqD1WvM6o2568/XYbijzx9g9ZOcPt7l55wW1wsZzf9tCWHMoDdlCkO6TqZFoO82w/swulrSUbIoEVJCYgzhYkJSCpGoQxte/2ANzp79g0TXLyZ1tWbJYcCZL1PQ7wJ98BB0FEE03ykITlnEffixTGEdAgJ7S/+UagdBMJry52EyWhLgcVE1zrwiJKpEgloPuQAHjb/wwb0ZFQEipuQRf/4u0QLjbyULoKVZ4wfTzD21EHTrHBV25gsWqADnc=
*/