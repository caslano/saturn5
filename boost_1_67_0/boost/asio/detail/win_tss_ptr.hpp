//
// detail/win_tss_ptr.hpp
// ~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WIN_TSS_PTR_HPP
#define BOOST_ASIO_DETAIL_WIN_TSS_PTR_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_WINDOWS)

#include <boost/asio/detail/noncopyable.hpp>
#include <boost/asio/detail/socket_types.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Helper function to create thread-specific storage.
BOOST_ASIO_DECL DWORD win_tss_ptr_create();

template <typename T>
class win_tss_ptr
  : private noncopyable
{
public:
  // Constructor.
  win_tss_ptr()
    : tss_key_(win_tss_ptr_create())
  {
  }

  // Destructor.
  ~win_tss_ptr()
  {
    ::TlsFree(tss_key_);
  }

  // Get the value.
  operator T*() const
  {
    return static_cast<T*>(::TlsGetValue(tss_key_));
  }

  // Set the value.
  void operator=(T* value)
  {
    ::TlsSetValue(tss_key_, value);
  }

private:
  // Thread-specific storage to allow unlocked access to determine whether a
  // thread is a member of the pool.
  DWORD tss_key_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/win_tss_ptr.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_WINDOWS)

#endif // BOOST_ASIO_DETAIL_WIN_TSS_PTR_HPP

/* win_tss_ptr.hpp
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
*/