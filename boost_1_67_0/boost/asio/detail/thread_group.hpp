//
// detail/thread_group.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_THREAD_GROUP_HPP
#define BOOST_ASIO_DETAIL_THREAD_GROUP_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/scoped_ptr.hpp>
#include <boost/asio/detail/thread.hpp>

namespace boost {
namespace asio {
namespace detail {

class thread_group
{
public:
  // Constructor initialises an empty thread group.
  thread_group()
    : first_(0)
  {
  }

  // Destructor joins any remaining threads in the group.
  ~thread_group()
  {
    join();
  }

  // Create a new thread in the group.
  template <typename Function>
  void create_thread(Function f)
  {
    first_ = new item(f, first_);
  }

  // Create new threads in the group.
  template <typename Function>
  void create_threads(Function f, std::size_t num_threads)
  {
    for (std::size_t i = 0; i < num_threads; ++i)
      create_thread(f);
  }

  // Wait for all threads in the group to exit.
  void join()
  {
    while (first_)
    {
      first_->thread_.join();
      item* tmp = first_;
      first_ = first_->next_;
      delete tmp;
    }
  }

  // Test whether the group is empty.
  bool empty() const
  {
    return first_ == 0;
  }

private:
  // Structure used to track a single thread in the group.
  struct item
  {
    template <typename Function>
    explicit item(Function f, item* next)
      : thread_(f),
        next_(next)
    {
    }

    boost::asio::detail::thread thread_;
    item* next_;
  };

  // The first thread in the group.
  item* first_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#endif // BOOST_ASIO_DETAIL_THREAD_GROUP_HPP

/* thread_group.hpp
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
*/