//
// detail/win_global.hpp
// ~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WIN_GLOBAL_HPP
#define BOOST_ASIO_DETAIL_WIN_GLOBAL_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/static_mutex.hpp>
#include <boost/asio/detail/tss_ptr.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

template <typename T>
struct win_global_impl
{
  // Destructor automatically cleans up the global.
  ~win_global_impl()
  {
    delete ptr_;
  }

  static win_global_impl instance_;
  static static_mutex mutex_;
  T* ptr_;
  static tss_ptr<T> tss_ptr_;
};

template <typename T>
win_global_impl<T> win_global_impl<T>::instance_ = { 0 };

template <typename T>
static_mutex win_global_impl<T>::mutex_ = BOOST_ASIO_STATIC_MUTEX_INIT;

template <typename T>
tss_ptr<T> win_global_impl<T>::tss_ptr_;

template <typename T>
T& win_global()
{
  if (static_cast<T*>(win_global_impl<T>::tss_ptr_) == 0)
  {
    win_global_impl<T>::mutex_.init();
    static_mutex::scoped_lock lock(win_global_impl<T>::mutex_);
    if (win_global_impl<T>::instance_.ptr_ == 0)
      win_global_impl<T>::instance_.ptr_ = new T;
    win_global_impl<T>::tss_ptr_ = win_global_impl<T>::instance_.ptr_;
  }

  return *win_global_impl<T>::tss_ptr_;
}

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_WIN_GLOBAL_HPP

/* win_global.hpp
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
*/