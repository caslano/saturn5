//
// detail/socket_holder.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_SOCKET_HOLDER_HPP
#define BOOST_ASIO_DETAIL_SOCKET_HOLDER_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/noncopyable.hpp>
#include <boost/asio/detail/socket_ops.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Implement the resource acquisition is initialisation idiom for sockets.
class socket_holder
  : private noncopyable
{
public:
  // Construct as an uninitialised socket.
  socket_holder()
    : socket_(invalid_socket)
  {
  }

  // Construct to take ownership of the specified socket.
  explicit socket_holder(socket_type s)
    : socket_(s)
  {
  }

  // Destructor.
  ~socket_holder()
  {
    if (socket_ != invalid_socket)
    {
      boost::system::error_code ec;
      socket_ops::state_type state = 0;
      socket_ops::close(socket_, state, true, ec);
    }
  }

  // Get the underlying socket.
  socket_type get() const
  {
    return socket_;
  }

  // Reset to an uninitialised socket.
  void reset()
  {
    if (socket_ != invalid_socket)
    {
      boost::system::error_code ec;
      socket_ops::state_type state = 0;
      socket_ops::close(socket_, state, true, ec);
      socket_ = invalid_socket;
    }
  }

  // Reset to take ownership of the specified socket.
  void reset(socket_type s)
  {
    reset();
    socket_ = s;
  }

  // Release ownership of the socket.
  socket_type release()
  {
    socket_type tmp = socket_;
    socket_ = invalid_socket;
    return tmp;
  }

private:
  // The underlying socket.
  socket_type socket_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_SOCKET_HOLDER_HPP

/* socket_holder.hpp
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
*/