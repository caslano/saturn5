//
// detail/buffer_resize_guard.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_BUFFER_RESIZE_GUARD_HPP
#define BOOST_ASIO_DETAIL_BUFFER_RESIZE_GUARD_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>
#include <boost/asio/detail/limits.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Helper class to manage buffer resizing in an exception safe way.
template <typename Buffer>
class buffer_resize_guard
{
public:
  // Constructor.
  buffer_resize_guard(Buffer& buffer)
    : buffer_(buffer),
      old_size_(buffer.size())
  {
  }

  // Destructor rolls back the buffer resize unless commit was called.
  ~buffer_resize_guard()
  {
    if (old_size_ != (std::numeric_limits<size_t>::max)())
    {
      buffer_.resize(old_size_);
    }
  }

  // Commit the resize transaction.
  void commit()
  {
    old_size_ = (std::numeric_limits<size_t>::max)();
  }

private:
  // The buffer being managed.
  Buffer& buffer_;

  // The size of the buffer at the time the guard was constructed.
  size_t old_size_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // BOOST_ASIO_DETAIL_BUFFER_RESIZE_GUARD_HPP

/* buffer_resize_guard.hpp
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
*/