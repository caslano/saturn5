//
// detail/win_iocp_operation.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WIN_IOCP_OPERATION_HPP
#define BOOST_ASIO_DETAIL_WIN_IOCP_OPERATION_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_IOCP)

#include <boost/asio/detail/handler_tracking.hpp>
#include <boost/asio/detail/op_queue.hpp>
#include <boost/asio/detail/socket_types.hpp>
#include <boost/system/error_code.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class win_iocp_io_context;

// Base class for all operations. A function pointer is used instead of virtual
// functions to avoid the associated overhead.
class win_iocp_operation
  : public OVERLAPPED
    BOOST_ASIO_ALSO_INHERIT_TRACKED_HANDLER
{
public:
  typedef win_iocp_operation operation_type;

  void complete(void* owner, const boost::system::error_code& ec,
      std::size_t bytes_transferred)
  {
    func_(owner, this, ec, bytes_transferred);
  }

  void destroy()
  {
    func_(0, this, boost::system::error_code(), 0);
  }

protected:
  typedef void (*func_type)(
      void*, win_iocp_operation*,
      const boost::system::error_code&, std::size_t);

  win_iocp_operation(func_type func)
    : next_(0),
      func_(func)
  {
    reset();
  }

  // Prevents deletion through this type.
  ~win_iocp_operation()
  {
  }

  void reset()
  {
    Internal = 0;
    InternalHigh = 0;
    Offset = 0;
    OffsetHigh = 0;
    hEvent = 0;
    ready_ = 0;
  }

private:
  friend class op_queue_access;
  friend class win_iocp_io_context;
  win_iocp_operation* next_;
  func_type func_;
  long ready_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_HAS_IOCP)

#endif // BOOST_ASIO_DETAIL_WIN_IOCP_OPERATION_HPP

/* win_iocp_operation.hpp
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
*/