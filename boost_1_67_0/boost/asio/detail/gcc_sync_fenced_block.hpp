//
// detail/gcc_sync_fenced_block.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_GCC_SYNC_FENCED_BLOCK_HPP
#define BOOST_ASIO_DETAIL_GCC_SYNC_FENCED_BLOCK_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(__GNUC__) \
  && ((__GNUC__ == 4 && __GNUC_MINOR__ >= 1) || (__GNUC__ > 4)) \
  && !defined(__INTEL_COMPILER) && !defined(__ICL) \
  && !defined(__ICC) && !defined(__ECC) && !defined(__PATHSCALE__)

#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class gcc_sync_fenced_block
  : private noncopyable
{
public:
  enum half_or_full_t { half, full };

  // Constructor.
  explicit gcc_sync_fenced_block(half_or_full_t)
    : value_(0)
  {
    __sync_lock_test_and_set(&value_, 1);
  }

  // Destructor.
  ~gcc_sync_fenced_block()
  {
    __sync_lock_release(&value_);
  }

private:
  int value_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(__GNUC__)
       // && ((__GNUC__ == 4 && __GNUC_MINOR__ >= 1) || (__GNUC__ > 4))
       // && !defined(__INTEL_COMPILER) && !defined(__ICL)
       // && !defined(__ICC) && !defined(__ECC) && !defined(__PATHSCALE__)

#endif // BOOST_ASIO_DETAIL_GCC_SYNC_FENCED_BLOCK_HPP

/* gcc_sync_fenced_block.hpp
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
*/