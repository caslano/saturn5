//
// detail/eventfd_select_interrupter.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
// Copyright (c) 2008 Roelof Naude (roelof.naude at gmail dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_EVENTFD_SELECT_INTERRUPTER_HPP
#define BOOST_ASIO_DETAIL_EVENTFD_SELECT_INTERRUPTER_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_EVENTFD)

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class eventfd_select_interrupter
{
public:
  // Constructor.
  BOOST_ASIO_DECL eventfd_select_interrupter();

  // Destructor.
  BOOST_ASIO_DECL ~eventfd_select_interrupter();

  // Recreate the interrupter's descriptors. Used after a fork.
  BOOST_ASIO_DECL void recreate();

  // Interrupt the select call.
  BOOST_ASIO_DECL void interrupt();

  // Reset the select interrupter. Returns true if the reset was successful.
  BOOST_ASIO_DECL bool reset();

  // Get the read descriptor to be passed to select.
  int read_descriptor() const
  {
    return read_descriptor_;
  }

private:
  // Open the descriptors. Throws on error.
  BOOST_ASIO_DECL void open_descriptors();

  // Close the descriptors.
  BOOST_ASIO_DECL void close_descriptors();

  // The read end of a connection used to interrupt the select call. This file
  // descriptor is passed to select such that when it is time to stop, a single
  // 64bit value will be written on the other end of the connection and this
  // descriptor will become readable.
  int read_descriptor_;

  // The write end of a connection used to interrupt the select call. A single
  // 64bit non-zero value may be written to this to wake up the select which is
  // waiting for the other end to become readable. This descriptor will only
  // differ from the read descriptor when a pipe is used.
  int write_descriptor_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/eventfd_select_interrupter.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_HAS_EVENTFD)

#endif // BOOST_ASIO_DETAIL_EVENTFD_SELECT_INTERRUPTER_HPP

/* eventfd_select_interrupter.hpp
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
*/