//
// detail/posix_tss_ptr.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_POSIX_TSS_PTR_HPP
#define BOOST_ASIO_DETAIL_POSIX_TSS_PTR_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_PTHREADS)

#include <pthread.h>
#include <boost/asio/detail/noncopyable.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

// Helper function to create thread-specific storage.
BOOST_ASIO_DECL void posix_tss_ptr_create(pthread_key_t& key);

template <typename T>
class posix_tss_ptr
  : private noncopyable
{
public:
  // Constructor.
  posix_tss_ptr()
  {
    posix_tss_ptr_create(tss_key_);
  }

  // Destructor.
  ~posix_tss_ptr()
  {
    ::pthread_key_delete(tss_key_);
  }

  // Get the value.
  operator T*() const
  {
    return static_cast<T*>(::pthread_getspecific(tss_key_));
  }

  // Set the value.
  void operator=(T* value)
  {
    ::pthread_setspecific(tss_key_, value);
  }

private:
  // Thread-specific storage to allow unlocked access to determine whether a
  // thread is a member of the pool.
  pthread_key_t tss_key_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/posix_tss_ptr.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_HAS_PTHREADS)

#endif // BOOST_ASIO_DETAIL_POSIX_TSS_PTR_HPP

/* posix_tss_ptr.hpp
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
*/