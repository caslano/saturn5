//
// detail/impl/dev_poll_reactor.hpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_IMPL_DEV_POLL_REACTOR_HPP
#define BOOST_ASIO_DETAIL_IMPL_DEV_POLL_REACTOR_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_DEV_POLL)

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

template <typename Time_Traits>
void dev_poll_reactor::add_timer_queue(timer_queue<Time_Traits>& queue)
{
  do_add_timer_queue(queue);
}

template <typename Time_Traits>
void dev_poll_reactor::remove_timer_queue(timer_queue<Time_Traits>& queue)
{
  do_remove_timer_queue(queue);
}

template <typename Time_Traits>
void dev_poll_reactor::schedule_timer(timer_queue<Time_Traits>& queue,
    const typename Time_Traits::time_type& time,
    typename timer_queue<Time_Traits>::per_timer_data& timer, wait_op* op)
{
  boost::asio::detail::mutex::scoped_lock lock(mutex_);

  if (shutdown_)
  {
    scheduler_.post_immediate_completion(op, false);
    return;
  }

  bool earliest = queue.enqueue_timer(time, timer, op);
  scheduler_.work_started();
  if (earliest)
    interrupter_.interrupt();
}

template <typename Time_Traits>
std::size_t dev_poll_reactor::cancel_timer(timer_queue<Time_Traits>& queue,
    typename timer_queue<Time_Traits>::per_timer_data& timer,
    std::size_t max_cancelled)
{
  boost::asio::detail::mutex::scoped_lock lock(mutex_);
  op_queue<operation> ops;
  std::size_t n = queue.cancel_timer(timer, ops, max_cancelled);
  lock.unlock();
  scheduler_.post_deferred_completions(ops);
  return n;
}

template <typename Time_Traits>
void dev_poll_reactor::move_timer(timer_queue<Time_Traits>& queue,
    typename timer_queue<Time_Traits>::per_timer_data& target,
    typename timer_queue<Time_Traits>::per_timer_data& source)
{
  boost::asio::detail::mutex::scoped_lock lock(mutex_);
  op_queue<operation> ops;
  queue.cancel_timer(target, ops);
  queue.move_timer(target, source);
  lock.unlock();
  scheduler_.post_deferred_completions(ops);
}

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_HAS_DEV_POLL)

#endif // BOOST_ASIO_DETAIL_IMPL_DEV_POLL_REACTOR_HPP

/* dev_poll_reactor.hpp
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
*/