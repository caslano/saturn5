//
// detail/win_mutex.hpp
// ~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WIN_MUTEX_HPP
#define BOOST_ASIO_DETAIL_WIN_MUTEX_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_WINDOWS)

#include <boost/asio/detail/noncopyable.hpp>
#include <boost/asio/detail/scoped_lock.hpp>
#include <boost/asio/detail/socket_types.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

class win_mutex
  : private noncopyable
{
public:
  typedef boost::asio::detail::scoped_lock<win_mutex> scoped_lock;

  // Constructor.
  BOOST_ASIO_DECL win_mutex();

  // Destructor.
  ~win_mutex()
  {
    ::DeleteCriticalSection(&crit_section_);
  }

  // Lock the mutex.
  void lock()
  {
    ::EnterCriticalSection(&crit_section_);
  }

  // Unlock the mutex.
  void unlock()
  {
    ::LeaveCriticalSection(&crit_section_);
  }

private:
  // Initialisation must be performed in a separate function to the constructor
  // since the compiler does not support the use of structured exceptions and
  // C++ exceptions in the same function.
  BOOST_ASIO_DECL int do_init();

  ::CRITICAL_SECTION crit_section_;
};

} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#if defined(BOOST_ASIO_HEADER_ONLY)
# include <boost/asio/detail/impl/win_mutex.ipp>
#endif // defined(BOOST_ASIO_HEADER_ONLY)

#endif // defined(BOOST_ASIO_WINDOWS)

#endif // BOOST_ASIO_DETAIL_WIN_MUTEX_HPP

/* win_mutex.hpp
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
*/