//
// detail/winrt_utils.hpp
// ~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_DETAIL_WINRT_UTILS_HPP
#define BOOST_ASIO_DETAIL_WINRT_UTILS_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_WINDOWS_RUNTIME)

#include <codecvt>
#include <cstdlib>
#include <future>
#include <locale>
#include <robuffer.h>
#include <windows.storage.streams.h>
#include <wrl/implements.h>
#include <boost/asio/buffer.hpp>
#include <boost/system/error_code.hpp>
#include <boost/asio/detail/memory.hpp>
#include <boost/asio/detail/socket_ops.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {
namespace winrt_utils {

inline Platform::String^ string(const char* from)
{
  std::wstring tmp(from, from + std::strlen(from));
  return ref new Platform::String(tmp.c_str());
}

inline Platform::String^ string(const std::string& from)
{
  std::wstring tmp(from.begin(), from.end());
  return ref new Platform::String(tmp.c_str());
}

inline std::string string(Platform::String^ from)
{
  std::wstring_convert<std::codecvt_utf8<wchar_t>> converter;
  return converter.to_bytes(from->Data());
}

inline Platform::String^ string(unsigned short from)
{
  return string(std::to_string(from));
}

template <typename T>
inline Platform::String^ string(const T& from)
{
  return string(from.to_string());
}

inline int integer(Platform::String^ from)
{
  return _wtoi(from->Data());
}

template <typename T>
inline Windows::Networking::HostName^ host_name(const T& from)
{
  return ref new Windows::Networking::HostName((string)(from));
}

template <typename ConstBufferSequence>
inline Windows::Storage::Streams::IBuffer^ buffer_dup(
    const ConstBufferSequence& buffers)
{
  using Microsoft::WRL::ComPtr;
  using boost::asio::buffer_size;
  std::size_t size = buffer_size(buffers);
  auto b = ref new Windows::Storage::Streams::Buffer(size);
  ComPtr<IInspectable> insp = reinterpret_cast<IInspectable*>(b);
  ComPtr<Windows::Storage::Streams::IBufferByteAccess> bacc;
  insp.As(&bacc);
  byte* bytes = nullptr;
  bacc->Buffer(&bytes);
  boost::asio::buffer_copy(boost::asio::buffer(bytes, size), buffers);
  b->Length = size;
  return b;
}

} // namespace winrt_utils
} // namespace detail
} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#endif // defined(BOOST_ASIO_WINDOWS_RUNTIME)

#endif // BOOST_ASIO_DETAIL_WINRT_UTILS_HPP

/* winrt_utils.hpp
fnXoeettEGJ6n9T62WFIFG+7GLnndvWX6qzHvxT8DHw+ui9Vul+R326GsYknn4Q/JPDNxIYFiefmfPmoVpuw8RoTsrnvCoz4SDgeTmHAvjK0kC7W4pt3hbCTli7plRoLy8i5bIUX8hXYLhwr02KIPDHS/EGV55+ZexE+9cHaODWTWlNrNqVdPKqnEEPGmmwaOTWrUZyj8I3rkNaGjJgd5KX/i3inDxJzDnJ9tEEHSoMhWhvYGnMCC5o8c0EW7N97L7eDpug6oWgMUyr3RuGpKDjQD1m74via4BqDf47pDzQSOvSgrp8JyUtN0X6Q5IQTmLXuP2tNzbh4/IdgNbJxxZ5BSl0MWamugP52UFpV3PXm6Km5zTShqEFC1/mcelqt228bLGeI9IuqwHag2hTkDcBXt13KnhJtePQ4Ot2Q4lGd2BD/YjuytgPzbLoeD7yJblbRlr4eT96yGyxRWSJmkm5Ceuu039SQA8CmxS+ug7+qCTDRcuHAbmacbaedHCByV/fQn7vIxKPIVd8GbqxXMmdMGrowVDdzGruuqVQ4cW9m1jHDo29Wrmu656dfta/VSV+myVlu0VdwFmGXSit11h/Wgzfy13G3tFSOvZYmnIm3SphYaVUyayeYGun6vHtSwCG4pkq3U8BFAry2VpTTR9GdJjKYqaWfOJFduahMl2Ulw3TWKmVDTwJNrM4cdd31hWilXyieh158pj2iT2MFVu5i3af9/vHezSAozfiwAjyIZyyIzRMudWX2erL6hmdu3O4pZmVzeMqnrEMt2qgnqOgsdVFZ4IkWLlzNvOD7Rfmwsn9iKEMgYOTEpGWdJyFtEQxcThOq4V8SgRWsaArkMu7QY4IiHIx2a5aXtOXODYF1dRNrVfZOxwExVPcLmYbFsAHbO04uyB23th/yjYlLPOmo05tbBsQIJRBxTTTb4nad2T/XDdCWEMeCD31DHsvlMVhVKKEivtF2JDThYRp+rtX8QTAV74qs8qHwXgGFuEBkFKlHlOWcfCju1LThLfFI24mnVDYxCktl5yTE+0YKMGlbxJjHNakhMGchG8UARUkhpJXF5InqljwR20Os/8Nz53In2VMJLOTUK82b9DzEKi4HF+z6OEKlltbPHdWVbwfTT2WgQhMf08nwJDSL2khFzdsgP3ZiQhXfQOUSuYbR0Rb/MnQppYveTtGVa9J55x10G76HTkrtYF+ykqwWho4hYDExi3yclsA22atvEcmc/ewkop3InV6v82xK/oCFZ8VXH09KrZJWYJa3jDpOK5dW4lryJH6ALp67vcMslzCbI9Ex5zXUiLiQo2+b9zJ2juRF+BCpjPHHBNbn74n69HnC54OM19PgPXZLi9iGgZdj+JHcSsE5ZszgI/a7qEuu3gWRtuPTkZjq+OXqGDFJrMrNLNwebTLtGm027R5tMe0ZbTXtHS0zt4W3hLfINWIMYUzbc/fj1iP3VetNO5IZpAF4e0Ac3z0BWBxNWF9BhHK+ZLckf6xToLyfmJ+En5Sfjf6qxQzo6Rli2QB9jhSGZJoYxszdShoLJ5+SHpccZtiePJwNgKgfVR/mLtytqx0eG5wWOBxwqv8CxzdPAawPUIKSnT7gnKtbREoafu55z3ee/pQwwp3yc/Ldkg75dclVyaXJI/F9YYeYHTYZjs3OAfC5fxRfGYExAvQoZBBAAuCcQbYVDPfV+pX2pQ7O1wqEP1tY+HIwoF8tGmiVhbmSQ3jJvEwwP4B55DjYP2OsGnrQyH0wOJzLUbGIKd1SKVe2oLY1tTW2tdW1tne1d7b38i3zrfKtMx9KH3OfcjtD/4+hFeZyQ5KMqr3F19/emRT8BFBfyGh6xKLBIz/+OW+uPtUVdR+1H2WRjZONlA3EsURiIbU+J5QO8hg/gJgY3434GD+EuBTfjtgSP6y9xQEpXe789Ofoj7NmGDK6UrTGFchS/DjiBPcz9wp3Efdbb6wE+2WzZMdInWmnaF1p64gt0tmqtu0jkqLtUvVzq7xJQf0wMcOQ8T1yaepUNNYqDq+JrGzaBrvv3vBYVBrCyCTdyxutBD5xbQz9SoEyHwNVEcpYtX9uaBGW1jpnqAP1WUJfdXAufjGHWgfTy57ao8oiaYwmExNdJZ+OMr80f32bU8nsn3mVTRpeN4/j2cOQrysPfT19P0M/X1HP0NIVGUGtW9+YigLNCtUq1a9WeeVlquWF9wvo06AUQF/Yf21kx6nk9IW+Zq4HzxAvOD9Ex8yg3oJD5BFcic3l0UTfVB6iy7cfdVWAU1IRXejIf8EOeGFHzPRZfwKrZ0ey+i0IqvEKAzYrdCtzugN8UBJmwY4BX6r+alYCYdWTVQA9GVVVl1QAvRgNIEuGOTnM7Sel57ZHHsCpAkjmRdXTVgI9GH3Wi5juwADnh5gthmEISuuK7zS15RgzPCVNJ2eTp23v5l17IDpBHWV8QOzgCdS+r6zSFFM5QjviNOI4TjVOOdo0vo5cjeiMyI7YjfSP3NOOxdZbr1u+nVQAWQBFAFUAjQOdb+l2Knckd6DeSLKOs0iwjuceQ5hCnjSYNp48mj6dsJiwHoOYgB53oKdrW4bSI5jmxwaX9Db8IUwFi/yyZmtaA7JfZiwxzw4pR4OC3nNjYTBmacdkQURjSDc/A4PBlr9a9UKO3AgRrS6ZkFvpmh7M+vEOQo8vgkIHaE22EUxGEzX+6BqFZHZN60IzNH7oGjrFYatGKCEkL2crywcz5JCV9NVYcH+f229HbAZ0UI/T4d0EEqFCNySs2htR/lTm7iS55u1a9XlLlIbspLZRPkxqM/YZfGRMkQbt5LJp3kQJJi029tLW3qof2zwc5QpOdhD0Ejy7v2V8YqyUztT495pUTtquQtkp5XH0+igW5CN4wWhbLOPRXOG+z7iYLlHs9NZlHJgCa+8ZcA0QmO4Be5VwXl6sam9EWlk7JnA1hrRf3kZl4Xm+btuscSVSD9jpHwk44H+peIW7gRuCG4DbjetTKBZ6TfXzoubTjC7Z0wMDtPYuONZnB+yEXnN9RLrvkuYOwepVuquYWDNq+qEeUAxKL6v6fBFXW89n/Yx0UP6Oe614zMQACTlFDMcIx8jCSKsltAtwJyNNfRFa+nriU5TRtyDLZWiP+Uy8Cs4Rgh2jWercWjbzhVA/CpWWxcXiP1cKq+pmssQiTtn0tyAcS/CKkKmWZSr+RTDSRadKZiv+Jfdq4CbZzUoVs3M2592r9hw/h67LqrtRNdg6W8aZvYGiGbdX5KlPk6+Nt5/NJIlz2GSoDxb8GhG416Po9hwBQZRcDObkhgGQmYvR7akhDAUJBYki9OCl7Ap+NOqP5dsZZGUW0EI5f5bO9SFf1zKDKyNx2/l48VOzbqGVf4m3ZO/AAvBIK8k0y0g63Pwz2DTVM/MZPGkW+7LQNeCcaJKGRNKmYzkyrUKaNWqTtbGKtXKbdbGJaCtrbI70RYALKQ7AJmYwMZMf7i4QH8Qo2CkwQfR67XqNjw6qNqk2s7bw0nMHXZtshy3X68eja7rN4iuMFvaCJRxZtMw0gvvnbvL0n8mYXuaQ5zQ7+NG40YI4QHGLNmHQ+ikDdwXXmPaRP1YFAQLdvMhwcDkgO2gQsMo7oyD7Qp9CTclNtK4mL69Xvn9/mAc4ePOcpzynOlc4dVZmNedTzIiXrcRcU0M4RUS3R9PbmGRkqzoovMQ2Gylc06bqG4iLHjKZmTivd8CA5PuWY8pw0thROz8uk9ffNGeKOpaHM0aoGh9WOuq1rR8SrBVv0yH1uwcM7igncFcWXHPhJ/DkjjmzpDwaMrUqA6lUXdnvqA3ylei9Xg/396TYg5m8pyPwF9yMeA0SoGiN8mVCDKFsTvNrHttlqtX/JGhABS88C7LPan3agK+73KbpGtpOcOilAX84khkHNWAS5r4F3rC+BY1XunJuXS0HwuOAZmx97QUZfcp1DLKARHfMsQrQBaGcByfZp7oHo6iIZAUtwoe8dEHq6rM2l4rUT0qHT+E/1VjgbzP/PcBbN5SxRoxDwI96lcEdO5FygQrhheW9yY9wkBLF0/L2kPZmJjkkoYt+u1ZEGm3KRnT5QIqreWinnWmY6nOq4fKkGSHw5aON3rLgniny2jZx/9FvvzOoUHnz42/dOjLo0PkK6F1KfV7AEEA4c1p5MHxOtd3xonLoOSXVq++Al8Z8lBDarXePoeG4lBu/5wBwKac8euWDRGPaG0QsPwx+KklcPONa2u4x8NxJnpioombAbLOuiZlk5DpOhTttu+aswdSkfYASxXz0Ch00wtjo129aso41Vzn3sJkJw7E/c8mgJR+hatniRL460Qa/kH2oTAy6Tm3vJ39QXt/SrEcKoqJBW+GE6spbK5IIdmu0qk0lkPKWlSvo+JZYeKAZkevQPnkQStoAo8x3jVwIEPrg1nG6/iH2g68bQDNuJsCavTakT5oEwGToHEN4l4R/zuBbL60ZJY2ZkuOUL9DmJkDkdmohDxiZQee/UAVfHMRLB7qcfX3UhdDmPRtNV8xvoz+wpFsC1V3FGsLJj83TTdtF05dG2YZ0q1MTK1V0GTQJDNJdddcOCxWfLiIi0kPNSWpzZzaO2H8FIGBcy/Wvzf6GUbif9xDH/YuXdPyFQifRJyuVwJhaamLPMoj+JTvYAZrWBfd4jAySE+56E7qHYeTgcsZ6wRqCkjCJq+0fdSzAlVo5RZGPKEQVavEwmxJ1+O73ha3e/RJdWY/K+GkXrHF3B/b6XAQPizedW0URSUEymmEY6eGhez2tfxE35Hkfvk8ZGmg6BzJKa6QL0mzQELXjKjWwbLx+DUps6tGOLD7+Tt70T6E6JYHy02OTv2tykkX6MzqkfpUX2ReRabaUj9DMGZFvLXthiyrycOiInEQ6hGAMnSljdZHeq5t9/ZN2A4HmwTuFvt3F1x2Ca/vB+IGTGWvyNXGzs3lKRMctYA+Zfj7+Jv7n/Puog2FH/3KINhgMHp/oKvZryvwp/QLv6ATkkSOSbmu7t9Jw5mAleYCxFrYW9lUL5M+rPcDNnTDKfRacYnY5cYedJ+0nkPcHbLX7wp7a8J2X+WeS2WenKxR1bFcprbFLZTxKW3+lJs5orTqsfVq9FPso+AD5En+FZJ3iHXRvQv936dCaLqEsIxcd+mOTseOkB8u5b3pNjipboyCJI47Ctpo23DvaQPYxlc068/KbHFcVSNlyhHe82k9bo1Rdk/xLS9MKJJgSBC0ZZW3x1EmSl34fD+/nKRby4y4Ga4/rwrOqD4Om8aQAIsYfh8mEHG0+DVcK93FtaLxtRkgV8llHR3RALMBt7uU4SSTwHZAZw2ebJhnrWagrBLnVpxgluy2IDvsP4n7YiWNO3OTtuuHLgcWk5lgNrvBFKerB+Xde2asFbZ6shp3Bc9V3UZ8b2hp5h2LMTpVaYa6l7kGlHzJdxnQf9+svcQJmzLCFZIXuCyATSUj01fMeqK7DPB6FiIwlzpLOaP/kDMrZBrEuyi5KKf9cXrt5KR6Mf59PbgT8Ord3lWzV8gKftTq8qPDhUprWDxnpZl5OTcxB6IQovfgcwHISEMzxVAJr/+pz33rBUZbccRk6Daqe7EKnLt9VEPYl34btwFVOfS2/Y9hRcbMXPEfHsmAMsNKWZwNoz3rygcc8Bao3bic9StWBz1O9UkdlymBQWPm7EsNzUs8H+7dHK0CpBO8V+sPBbUpBPtlgMxXQvikLJlTPBn8rShYmFv+Uwj1Id+kLsgC6ygODKIIhB5iSNy0eKvgHjMpyUxZL+zHAUuBUDL2EV7OuVaSLU6p67HwYFf1ALmio7G03MYOCuUJ8He32KGynO7tCoHBJK4Uw9B7L9eYNRcOwLnNvNG0QXuAieYOKhGP4JXEOEQ+tSN3qVe6sbqGOMDHJ9HVIFpougbiBKQ1ZNeIYSPVHfNTBxOni6JPOGsf/lVCVgoHJrcokK/TrxoLH/nObDdL7OYDm29nsy770q5OZ9Po6mdn8z1e9AewL/JgFEFA6UQM0FBxj42ud9hLQ5L++Af2UTcDavUBtUdHh6QlJK0MxaBAFJjivkJlS2voE15BCSbtlt3W86dodbDef4u5dHi5vokBYTBwXrn3DmHcKTVJ3OHsXuFh78AmcVwaIrznsUdNY5mWclUZUS+vBT+jGk7OsVYrrnMlyIZ9cK6c0qNcaZbBivgOIeVFRg4MPbl09Ae0r+pgc04kRbU9acYMBIOWgzkDr2xt4ThECs7aocpsvWMcGmMlYLLrKz2yd1tKF7HVomHQu2lJF7fSofyxnD8ka0scXqGh3wPFsl4LK71GFVdMOFcNDcPsKie5i+aLa1shM5KDIr3WjJ2T/uMyI9puTRHLSR51zSRMka482B/jkYcpHD03IIA2hwg1tGAEsvXn5WjsCeoiyvjUSOTdD2FrHMNThDIs0x83fFoRqQE5gORTIohw7L4p9nSEpCos5JL7xvGNwDAUUY5PhzWsSro5ZFeTyTZ1T7ItpgkCDzgWEb16GQ0jDDmRRMyKwoxFJMxRJrcVfNwxoHze9TTEaVe8Nvg5p3wIb/upPpUC3xCyp08I+l/Sv0oISCXTMgNxTSIQyF99BkJv1xy8Z9rTF5LuwJCYXni8bolALv+gatSHPojAqgw1SqrrZ2xB01KxLRX4d9yfkml/+ZaORuLE27+SQ4FIgP8J87DRZyuQeGaVd1rrR8hsmnVUnS881TaD8st3jtV5hu7WFoze6TRE56y59aJfUbZJ8vAQjCG+X2WxysVeNgAB1jMYbBVdVb3IREj4AAiz9061ZP48h858/6CoSEWfxU73bhD1qizTu7ty4Jo+OH+xbvw0+zv8QmRZ9O6eu9NgMcL2S9uAxMnSKihi5kFH6R+MQ1kY+Lz7xOKK7nX8kbTfZN1c6LVCjiH0umYgVOLxdCAo1pPhQUSF4R1mOWjhxYVpNI/XXVLXQZPmOi6RbAlrA0XMnV9rxqTSuI7qLhBZNSUEl+cvDZEl7NHW2m9cWqhAq408Oll/SSY1KLszAEoyIQNnDHfojiwmuhYPr5i65hz03p/A5I8u+bDCMNTFrAQXILdPJjP2INQr8tUNjrfNS4xsKfK9nRlhnf28vxwB61MnuYX0SZ042242PVsKgMD7vfIqYL6QOJbX3Oa5dvwErLuFCLhiefDXGpZAkeo5klYf4dP2c0aM5E6rZbE7tAIoJjuHf/OFY+9SCgIM7aMwUCQkHpKN4m7HYi4j4I2dK2emU3MR4ayPdHsjLozgR7Losrm17h1rtpE2KmEYSznTfeOlLXLnZy3lENjKKOaiNd5IMR2MYWrur96kpGEobibfZycVxk9XOymMgogpkm1C2xVL+sFS+VrgOBh/6BsbK6ffbf+5/0xM+9h7MGIgPPCLgHH0IDD3p5K5RPmxgIIhZmJBVZhahIhQdIYVj0RUcGVdGBCL5KtmQpWIWpVTFYqRMW+RMyK8Z1/Kr/krwpZpK1YuECcaOb3MfMCUmcaMPOqgvscSxiaDrmDDpjvIvsZMaHfNszols6zLUTdjwvUz41j5n2Oz2f0X35LhMxkRIMADwzwUHKT9R/St0Bf5S7IElQiFp/DKBpzb4nqjAgvg5+3IoedA5hvWFVU+p1gnWCa7xp8ncQRcaiJhd7IkNTw43/RvERIqWOztxy2boc0PRYUlTZ7Kwm5SKSMpVkhZbLPU2Q3NrmmKWLDFRNHASbd8ULpnEGeoB1q8pprti+UqL0xDBNGANwnSHAk5gCDKvX+GtCl++GUJ8jWzbcG3kobNzssDo4wySYmLqoUl0UJL+Rsp7YEjnkhmkW0SY61K5mcVZtsU+5mb/t3C3Ml14t4JGL75ZZIrWTu71DKURtY5qb1kUTjdOxgjetzpPWBChIrmSsOxEfTpFfreX2QXkuqMBqqSRGIR/mfaYrPYkfUtGzSpItd1Wuh5DB3yTfM4+pz6l5jR0ervZS9LmufJqJYu9x1e5mfKQ7NU75erczjUuOSzfsXkW28oihOOEy56TaWI0POElPpEVbupvT+bu0eFxktPRo3+Cir6fTbF20dApkUp7H9LttSbELvmW6aJ+QwuIOnBlvtKzpAujt6wvaj5pSxrFqLMlYBC3RJjiqOAhHQX74Uc8glKdmsm/9lIU2QxSEcCOOf+jQTOr/j/6+YNE3C7B1/WGclj0rKZ++9rctGfe8aLurht28mPCYKdjEUHBacj7qgtogEp5WEbLnYWoP9SvY9wJEueHO7erup+8AcsODUa03ut0kcUkE4fevDr0hvgH/RuFWgaEDgI+b2wDUMXA8omzpOl/ozF3Ni8WGi+617g5AdEFJG7vVE6+uDdtyb0M8L8p37W8jqdEw5jCWjjYxkBYoEDDHE+heQcPZMS4GUsVWVei4SfmWGK5QCeyDCG4VxS+xZzM9boyvKGtI6KsxBBdfTnEdA5xHvGqSkbrD3PLbvtYCG3f0IZwWktgVE9hCobSVhnxbRXO/OWGtO3xhuh6gWNcw2OlLuZ1gsUv6bK4RzlJeGD2pg9yHAACvI24QplC2xwecSV0nD+Ve/HKRO/Ih7SenByt3neajiP1BFT4Trmn2JbT+fDZj87hBZTBt9s/8GEEfD6vKyGfllowr/d6loeec8gXspG3hQji1NeG8a0iFhd6BqwJ9Uj8LveJJlfuPnMK1EmURcrGoRXABK6TundX/k50pniWrWFS8Ks5nlJuSpP/oI56j2JjUK9SOrkuTsl74adNaqSmmx9SDlEl5MtOfIQuj7xaaM2Us1FPgXVcrtXwmRkC6ee4uNfGCNuAYE89VqACHZWEB6x/Rlt2Ta8464JeGWTHikBNINVJsjwDC4VasFFxik0sz/WHL8tl1MHvK3KusKRHU40BS3Msd8gMy4nIwfkkXn1sitz0yKHx4fMGUDMmBAzAG7g5kMf44VuWTYT2Jg9U3FWM6APHjZGtG66I0/tn8rAvv1IhARszs+103urF2KXT2a6Vu8E5W8yt1HobwsXhIIbYKFHvVmHMOASpNvazlZSPfc2ULvfTtSHfrK9qkYGvbtHloNboon5yms/szXN/+rU1F5XzXmuKQsiJvi4gsBhHhTzuWWwfNdGBnyvLHh6Q+RAslKz+e0wtme7hB4/3FvJGo/6qO/UPRiAmOKTZcKJk2oQPWw92/M5722Am4/IvAJCsvl8WuVFaqYeee1rDX/g6jvvj6NQ=
*/