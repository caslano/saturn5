//
// co_spawn.hpp
// ~~~~~~~~~~~~
//
// Copyright (c) 2003-2020 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef BOOST_ASIO_CO_SPAWN_HPP
#define BOOST_ASIO_CO_SPAWN_HPP

#if defined(_MSC_VER) && (_MSC_VER >= 1200)
# pragma once
#endif // defined(_MSC_VER) && (_MSC_VER >= 1200)

#include <boost/asio/detail/config.hpp>

#if defined(BOOST_ASIO_HAS_CO_AWAIT) || defined(GENERATING_DOCUMENTATION)

#include <boost/asio/awaitable.hpp>
#include <boost/asio/execution_context.hpp>
#include <boost/asio/is_executor.hpp>

#include <boost/asio/detail/push_options.hpp>

namespace boost {
namespace asio {
namespace detail {

template <typename T>
struct awaitable_signature;

template <typename T, typename Executor>
struct awaitable_signature<awaitable<T, Executor>>
{
  typedef void type(std::exception_ptr, T);
};

template <typename Executor>
struct awaitable_signature<awaitable<void, Executor>>
{
  typedef void type(std::exception_ptr);
};

} // namespace detail

/// Spawn a new thread of execution.
/**
 * The entry point function object @c f must have the signature:
 *
 * @code awaitable<void, E> f(); @endcode
 *
 * where @c E is convertible from @c Executor.
 */
template <typename Executor, typename F,
    BOOST_ASIO_COMPLETION_TOKEN_FOR(typename detail::awaitable_signature<
      typename result_of<F()>::type>::type) CompletionToken
        BOOST_ASIO_DEFAULT_COMPLETION_TOKEN_TYPE(Executor)>
BOOST_ASIO_INITFN_AUTO_RESULT_TYPE(CompletionToken,
    typename detail::awaitable_signature<typename result_of<F()>::type>::type)
co_spawn(const Executor& ex, F&& f,
    CompletionToken&& token
      BOOST_ASIO_DEFAULT_COMPLETION_TOKEN(Executor),
    typename enable_if<
      is_executor<Executor>::value
    >::type* = 0);

/// Spawn a new thread of execution.
/**
 * The entry point function object @c f must have the signature:
 *
 * @code awaitable<void, E> f(); @endcode
 *
 * where @c E is convertible from @c ExecutionContext::executor_type.
 */
template <typename ExecutionContext, typename F,
    BOOST_ASIO_COMPLETION_TOKEN_FOR(typename detail::awaitable_signature<
      typename result_of<F()>::type>::type) CompletionToken
        BOOST_ASIO_DEFAULT_COMPLETION_TOKEN_TYPE(
          typename ExecutionContext::executor_type)>
BOOST_ASIO_INITFN_AUTO_RESULT_TYPE(CompletionToken,
    typename detail::awaitable_signature<typename result_of<F()>::type>::type)
co_spawn(ExecutionContext& ctx, F&& f,
    CompletionToken&& token
      BOOST_ASIO_DEFAULT_COMPLETION_TOKEN(
        typename ExecutionContext::executor_type),
    typename enable_if<
      is_convertible<ExecutionContext&, execution_context&>::value
    >::type* = 0);

} // namespace asio
} // namespace boost

#include <boost/asio/detail/pop_options.hpp>

#include <boost/asio/impl/co_spawn.hpp>

#endif // defined(BOOST_ASIO_HAS_CO_AWAIT) || defined(GENERATING_DOCUMENTATION)

#endif // BOOST_ASIO_CO_SPAWN_HPP

/* co_spawn.hpp
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
*/