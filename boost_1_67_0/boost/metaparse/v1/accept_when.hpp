#ifndef BOOST_METAPARSE_V1_ACCEPT_WHEN_HPP
#define BOOST_METAPARSE_V1_ACCEPT_WHEN_HPP

// Copyright Abel Sinkovics (abel@sinkovics.hu)  2009 - 2010.
// Distributed under the Boost Software License, Version 1.0.
//    (See accompanying file LICENSE_1_0.txt or copy at
//          http://www.boost.org/LICENSE_1_0.txt)

#include <boost/metaparse/v1/get_result.hpp>
#include <boost/metaparse/v1/reject.hpp>
#include <boost/metaparse/v1/is_error.hpp>

#include <boost/mpl/if.hpp>
#include <boost/mpl/eval_if.hpp>

namespace boost
{
  namespace metaparse
  {
    namespace v1
    {
      template <class P, class Pred, class Msg>
      struct accept_when
      {
      private:
        struct unchecked
        {
          template <class S, class Pos>
          struct apply :
            boost::mpl::eval_if<
              typename Pred::template apply<
                typename get_result<typename P::template apply<S, Pos> >::type
              >::type,
              typename P::template apply<S, Pos>,
              reject<Msg, Pos>
            >
          {};
        };
      public:
        typedef accept_when type;
        
        template <class S, class Pos>
        struct apply :
          boost::mpl::if_<
            is_error<typename P::template apply<S, Pos> >,
            P,
            unchecked
          >::type::template apply<
            S,
            Pos
          >
        {};
      };
    }
  }
}

#endif


/* accept_when.hpp
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
*/