#ifndef POSIX_TIME_CONVERSION_HPP___
#define POSIX_TIME_CONVERSION_HPP___

/* Copyright (c) 2002-2005 CrystalClear Software, Inc.
 * Use, modification and distribution is subject to the
 * Boost Software License, Version 1.0. (See accompanying
 * file LICENSE_1_0.txt or http://www.boost.org/LICENSE_1_0.txt)
 * Author: Jeff Garland, Bart Garst
 * $Date$
 */

#include <cstring>
#include <boost/cstdint.hpp>
#include <boost/date_time/posix_time/ptime.hpp>
#include <boost/date_time/posix_time/posix_time_duration.hpp>
#include <boost/date_time/filetime_functions.hpp>
#include <boost/date_time/c_time.hpp>
#include <boost/date_time/time_resolution_traits.hpp> // absolute_value
#include <boost/date_time/gregorian/conversion.hpp>

namespace boost {

namespace posix_time {

  //! Function that converts a time_t into a ptime.
  inline
  ptime from_time_t(std::time_t t)
  {
    return ptime(gregorian::date(1970,1,1)) + seconds(static_cast<long>(t));
  }

  //! Function that converts a ptime into a time_t
  inline
  std::time_t to_time_t(ptime pt)
  {
    return (pt - ptime(gregorian::date(1970,1,1))).total_seconds();
  }

  //! Convert a time to a tm structure truncating any fractional seconds
  inline
  std::tm to_tm(const boost::posix_time::ptime& t) {
    std::tm timetm = boost::gregorian::to_tm(t.date());
    boost::posix_time::time_duration td = t.time_of_day();
    timetm.tm_hour = static_cast<int>(td.hours());
    timetm.tm_min = static_cast<int>(td.minutes());
    timetm.tm_sec = static_cast<int>(td.seconds());
    timetm.tm_isdst = -1; // -1 used when dst info is unknown
    return timetm;
  }
  //! Convert a time_duration to a tm structure truncating any fractional seconds and zeroing fields for date components
  inline
  std::tm to_tm(const boost::posix_time::time_duration& td) {
    std::tm timetm;
    std::memset(&timetm, 0, sizeof(timetm));
    timetm.tm_hour = static_cast<int>(date_time::absolute_value(td.hours()));
    timetm.tm_min = static_cast<int>(date_time::absolute_value(td.minutes()));
    timetm.tm_sec = static_cast<int>(date_time::absolute_value(td.seconds()));
    timetm.tm_isdst = -1; // -1 used when dst info is unknown
    return timetm;
  }

  //! Convert a tm struct to a ptime ignoring is_dst flag
  inline
  ptime ptime_from_tm(const std::tm& timetm) {
    boost::gregorian::date d = boost::gregorian::date_from_tm(timetm);
    return ptime(d, time_duration(timetm.tm_hour, timetm.tm_min, timetm.tm_sec));
  }


#if defined(BOOST_HAS_FTIME)

  //! Function to create a time object from an initialized FILETIME struct.
  /*! Function to create a time object from an initialized FILETIME struct.
   * A FILETIME struct holds 100-nanosecond units (0.0000001). When
   * built with microsecond resolution the FILETIME's sub second value
   * will be truncated. Nanosecond resolution has no truncation.
   *
   * \note FILETIME is part of the Win32 API, so it is not portable to non-windows
   * platforms.
   *
   * \note The function is templated on the FILETIME type, so that
   *       it can be used with both native FILETIME and the ad-hoc
   *       boost::detail::winapi::FILETIME_ type.
   */
  template< typename TimeT, typename FileTimeT >
  inline
  TimeT from_ftime(const FileTimeT& ft)
  {
    return boost::date_time::time_from_ftime<TimeT>(ft);
  }

#endif // BOOST_HAS_FTIME

} } //namespace boost::posix_time




#endif


/* conversion.hpp
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
*/