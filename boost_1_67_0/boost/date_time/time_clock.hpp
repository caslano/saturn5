#ifndef DATE_TIME_TIME_CLOCK_HPP___
#define DATE_TIME_TIME_CLOCK_HPP___

/* Copyright (c) 2002,2003,2005 CrystalClear Software, Inc.
 * Use, modification and distribution is subject to the
 * Boost Software License, Version 1.0. (See accompanying
 * file LICENSE_1_0.txt or http://www.boost.org/LICENSE_1_0.txt)
 * Author: Jeff Garland, Bart Garst
 * $Date$
 */

/*! @file time_clock.hpp
  This file contains the interface for clock devices.
*/

#include "boost/date_time/c_time.hpp"
#include "boost/shared_ptr.hpp"

namespace boost {
namespace date_time {


  //! A clock providing time level services based on C time_t capabilities
  /*! This clock provides resolution to the 1 second level
   */
  template<class time_type>
  class second_clock
  {
  public:
    typedef typename time_type::date_type date_type;
    typedef typename time_type::time_duration_type time_duration_type;

    static time_type local_time()
    {
      ::std::time_t t;
      ::std::time(&t);
      ::std::tm curr, *curr_ptr;
      //curr_ptr = ::std::localtime(&t);
      curr_ptr = c_time::localtime(&t, &curr);
      return create_time(curr_ptr);
    }


    //! Get the current day in universal date as a ymd_type
    static time_type universal_time()
    {

      ::std::time_t t;
      ::std::time(&t);
      ::std::tm curr, *curr_ptr;
      //curr_ptr = ::std::gmtime(&t);
      curr_ptr = c_time::gmtime(&t, &curr);
      return create_time(curr_ptr);
    }

    template<class time_zone_type>
    static time_type local_time(boost::shared_ptr<time_zone_type> tz_ptr)
    {
      typedef typename time_type::utc_time_type utc_time_type;
      utc_time_type utc_time = second_clock<utc_time_type>::universal_time();
      return time_type(utc_time, tz_ptr);
    }


  private:
    static time_type create_time(::std::tm* current)
    {
      date_type d(static_cast<unsigned short>(current->tm_year + 1900),
                  static_cast<unsigned short>(current->tm_mon + 1),
                  static_cast<unsigned short>(current->tm_mday));
      time_duration_type td(current->tm_hour,
                            current->tm_min,
                            current->tm_sec);
      return time_type(d,td);
    }

  };


} } //namespace date_time


#endif

/* time_clock.hpp
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
*/