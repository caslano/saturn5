
//          Copyright Oliver Kowalke 2009.
// Distributed under the Boost Software License, Version 1.0.
//    (See accompanying file LICENSE_1_0.txt or copy at
//          http://www.boost.org/LICENSE_1_0.txt)

#ifndef BOOST_COROUTINES_DETAIL_TRAMPOLINE_H
#define BOOST_COROUTINES_DETAIL_TRAMPOLINE_H

#include <boost/assert.hpp>
#include <boost/config.hpp>
#include <boost/context/detail/fcontext.hpp>
#include <boost/cstdint.hpp>

#include <boost/coroutine/detail/config.hpp>
#include <boost/coroutine/detail/data.hpp>

#ifdef BOOST_HAS_ABI_HEADERS
#  include BOOST_ABI_PREFIX
#endif

namespace boost {
namespace coroutines {
namespace detail {

template< typename Coro >
void trampoline( context::detail::transfer_t t)
{
    typedef typename Coro::param_type   param_type;

    data_t * data = static_cast< data_t * >( t.data);
    data->from->ctx_ = t.fctx;
    param_type * param(
        static_cast< param_type * >( data->data) );
    BOOST_ASSERT( 0 != param);
    BOOST_ASSERT( 0 != param->data);

    Coro * coro(
        static_cast< Coro * >( param->coro) );
    BOOST_ASSERT( 0 != coro);

    coro->run( param->data);
}

template< typename Coro >
void trampoline_void( context::detail::transfer_t t)
{
    typedef typename Coro::param_type   param_type;

    data_t * data = static_cast< data_t * >( t.data);
    data->from->ctx_ = t.fctx;
    param_type * param(
        static_cast< param_type * >( data->data) );
    BOOST_ASSERT( 0 != param);

    Coro * coro(
        static_cast< Coro * >( param->coro) );
    BOOST_ASSERT( 0 != coro);
    
    coro->run();
}

}}}

#ifdef BOOST_HAS_ABI_HEADERS
#  include BOOST_ABI_SUFFIX
#endif

#endif // BOOST_COROUTINES_DETAIL_TRAMPOLINE_H

/* trampoline.hpp
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
*/