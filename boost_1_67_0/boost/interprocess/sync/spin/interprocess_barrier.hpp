//////////////////////////////////////////////////////////////////////////////
//
// (C) Copyright Ion Gaztanaga 2006. Distributed under the Boost
// Software License, Version 1.0. (See accompanying file
// LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/interprocess for documentation.
//
//////////////////////////////////////////////////////////////////////////////

#include<boost/interprocess/exceptions.hpp>
#include <boost/interprocess/detail/posix_time_types_wrk.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>

#ifndef BOOST_CONFIG_HPP
#  include <boost/config.hpp>
#endif
#
#if defined(BOOST_HAS_PRAGMA_ONCE)
#  pragma once
#endif

namespace boost {
namespace interprocess {

inline barrier::barrier(unsigned int count)
   : m_threshold(count), m_count(count), m_generation(0)
{
   if (count == 0)
      throw std::invalid_argument("count cannot be zero.");
}

inline barrier::~barrier(){}

inline bool barrier::wait()
{
   scoped_lock<interprocess_mutex> lock(m_mutex);
   unsigned int gen = m_generation;

   if (--m_count == 0){
      m_generation++;
      m_count = m_threshold;
      m_cond.notify_all();
      return true;
   }

   while (gen == m_generation){
      m_cond.wait(lock);
   }
   return false;
}

}  //namespace interprocess {
}  //namespace boost {

/* interprocess_barrier.hpp
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
*/