//////////////////////////////////////////////////////////////////////////////
//
// (C) Copyright Ion Gaztanaga 2005-2012. Distributed under the Boost
// Software License, Version 1.0. (See accompanying file
// LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/interprocess for documentation.
//
//////////////////////////////////////////////////////////////////////////////

#ifndef BOOST_INTERPROCESS_IN_PLACE_INTERFACE_HPP
#define BOOST_INTERPROCESS_IN_PLACE_INTERFACE_HPP

#ifndef BOOST_CONFIG_HPP
#  include <boost/config.hpp>
#endif
#
#if defined(BOOST_HAS_PRAGMA_ONCE)
#  pragma once
#endif

#include <boost/interprocess/detail/config_begin.hpp>
#include <boost/interprocess/detail/workaround.hpp>
#include <boost/interprocess/detail/type_traits.hpp>
#include <boost/container/detail/type_traits.hpp>  //alignment_of, aligned_storage
#include <typeinfo>  //typeid

//!\file
//!Describes an abstract interface for placement construction and destruction.

namespace boost {
namespace interprocess {
namespace ipcdetail {

struct in_place_interface
{
   in_place_interface(std::size_t alignm, std::size_t sz, const char *tname)
   :  alignment(alignm), size(sz), type_name(tname)
   {}

   std::size_t alignment;
   std::size_t size;
   const char *type_name;

   virtual void construct_n(void *mem, std::size_t num, std::size_t &constructed) = 0;
   virtual void destroy_n(void *mem, std::size_t num, std::size_t &destroyed) = 0;
   virtual ~in_place_interface(){}
};

template<class T>
struct placement_destroy :  public in_place_interface
{
   placement_destroy()
      :  in_place_interface(::boost::container::dtl::alignment_of<T>::value, sizeof(T), typeid(T).name())
   {}

   virtual void destroy_n(void *mem, std::size_t num, std::size_t &destroyed)
   {
      T* memory = static_cast<T*>(mem);
      for(destroyed = 0; destroyed < num; ++destroyed)
         (memory++)->~T();
   }

   virtual void construct_n(void *, std::size_t, std::size_t &) {}

   private:
   void destroy(void *mem)
   {  static_cast<T*>(mem)->~T();   }
};

}
}
}   //namespace boost { namespace interprocess { namespace ipcdetail {

#include <boost/interprocess/detail/config_end.hpp>

#endif //#ifndef BOOST_INTERPROCESS_IN_PLACE_INTERFACE_HPP

/* in_place_interface.hpp
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
*/