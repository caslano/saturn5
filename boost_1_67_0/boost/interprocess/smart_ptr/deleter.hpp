//////////////////////////////////////////////////////////////////////////////
//
// (C) Copyright Ion Gaztanaga 2007-2012.
//
// Distributed under the Boost Software License, Version 1.0.
// (See accompanying file LICENSE_1_0.txt or copy at
// http://www.boost.org/LICENSE_1_0.txt)
//
// See http://www.boost.org/libs/interprocess for documentation.
//
//////////////////////////////////////////////////////////////////////////////

#ifndef BOOST_INTERPROCESS_DELETER_HPP
#define BOOST_INTERPROCESS_DELETER_HPP

#ifndef BOOST_CONFIG_HPP
#  include <boost/config.hpp>
#endif
#
#if defined(BOOST_HAS_PRAGMA_ONCE)
#  pragma once
#endif

#include <boost/interprocess/detail/config_begin.hpp>
#include <boost/interprocess/interprocess_fwd.hpp>
#include <boost/interprocess/detail/utilities.hpp>
#include <boost/intrusive/pointer_traits.hpp>

//!\file
//!Describes the functor to delete objects from the segment.

namespace boost {
namespace interprocess {

//!A deleter that uses the segment manager's destroy_ptr
//!function to destroy the passed pointer resource.
//!
//!This deleter is used
template<class T, class SegmentManager>
class deleter
{
   public:
   typedef typename boost::intrusive::
      pointer_traits<typename SegmentManager::void_pointer>::template
         rebind_pointer<T>::type                pointer;

   private:
   typedef typename boost::intrusive::
      pointer_traits<pointer>::template
         rebind_pointer<SegmentManager>::type                segment_manager_pointer;

   segment_manager_pointer mp_mngr;

   public:
   deleter(segment_manager_pointer pmngr)
      :  mp_mngr(pmngr)
   {}

   void operator()(const pointer &p)
   {  mp_mngr->destroy_ptr(ipcdetail::to_raw_pointer(p));   }
};

}  //namespace interprocess {
}  //namespace boost {

#include <boost/interprocess/detail/config_end.hpp>

#endif   //#ifndef BOOST_INTERPROCESS_DELETER_HPP

/* deleter.hpp
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
*/