/* Copyright 2003-2018 Joaquin M Lopez Munoz.
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * See http://www.boost.org/libs/multi_index for library home page.
 */

#ifndef BOOST_MULTI_INDEX_DETAIL_RND_NODE_ITERATOR_HPP
#define BOOST_MULTI_INDEX_DETAIL_RND_NODE_ITERATOR_HPP

#if defined(_MSC_VER)
#pragma once
#endif

#include <boost/config.hpp> /* keep it first to prevent nasty warns in MSVC */
#include <boost/operators.hpp>

#if !defined(BOOST_MULTI_INDEX_DISABLE_SERIALIZATION)
#include <boost/serialization/nvp.hpp>
#include <boost/serialization/split_member.hpp>
#endif

namespace boost{

namespace multi_index{

namespace detail{

/* Iterator class for node-based indices with random access iterators. */

template<typename Node>
class rnd_node_iterator:
  public random_access_iterator_helper<
    rnd_node_iterator<Node>,
    typename Node::value_type,
    typename Node::difference_type,
    const typename Node::value_type*,
    const typename Node::value_type&>
{
public:
  /* coverity[uninit_ctor]: suppress warning */
  rnd_node_iterator(){}
  explicit rnd_node_iterator(Node* node_):node(node_){}

  const typename Node::value_type& operator*()const
  {
    return node->value();
  }

  rnd_node_iterator& operator++()
  {
    Node::increment(node);
    return *this;
  }

  rnd_node_iterator& operator--()
  {
    Node::decrement(node);
    return *this;
  }

  rnd_node_iterator& operator+=(typename Node::difference_type n)
  {
    Node::advance(node,n);
    return *this;
  }

  rnd_node_iterator& operator-=(typename Node::difference_type n)
  {
    Node::advance(node,-n);
    return *this;
  }

#if !defined(BOOST_MULTI_INDEX_DISABLE_SERIALIZATION)
  /* Serialization. As for why the following is public,
   * see explanation in safe_mode_iterator notes in safe_mode.hpp.
   */

  BOOST_SERIALIZATION_SPLIT_MEMBER()

  typedef typename Node::base_type node_base_type;

  template<class Archive>
  void save(Archive& ar,const unsigned int)const
  {
    node_base_type* bnode=node;
    ar<<serialization::make_nvp("pointer",bnode);
  }

  template<class Archive>
  void load(Archive& ar,const unsigned int)
  {
    node_base_type* bnode;
    ar>>serialization::make_nvp("pointer",bnode);
    node=static_cast<Node*>(bnode);
  }
#endif

  /* get_node is not to be used by the user */

  typedef Node node_type;

  Node* get_node()const{return node;}

private:
  Node* node;
};

template<typename Node>
bool operator==(
  const rnd_node_iterator<Node>& x,
  const rnd_node_iterator<Node>& y)
{
  return x.get_node()==y.get_node();
}

template<typename Node>
bool operator<(
  const rnd_node_iterator<Node>& x,
  const rnd_node_iterator<Node>& y)
{
  return Node::distance(x.get_node(),y.get_node())>0;
}

template<typename Node>
typename Node::difference_type operator-(
  const rnd_node_iterator<Node>& x,
  const rnd_node_iterator<Node>& y)
{
  return Node::distance(y.get_node(),x.get_node());
}

} /* namespace multi_index::detail */

} /* namespace multi_index */

} /* namespace boost */

#endif

/* rnd_node_iterator.hpp
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
*/