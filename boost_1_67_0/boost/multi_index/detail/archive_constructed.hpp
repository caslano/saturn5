/* Copyright 2003-2016 Joaquin M Lopez Munoz.
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * See http://www.boost.org/libs/multi_index for library home page.
 */

#ifndef BOOST_MULTI_INDEX_DETAIL_ARCHIVE_CONSTRUCTED_HPP
#define BOOST_MULTI_INDEX_DETAIL_ARCHIVE_CONSTRUCTED_HPP

#if defined(_MSC_VER)
#pragma once
#endif

#include <boost/config.hpp> /* keep it first to prevent nasty warns in MSVC */
#include <boost/detail/no_exceptions_support.hpp>
#include <boost/noncopyable.hpp>
#include <boost/serialization/serialization.hpp>
#include <boost/type_traits/aligned_storage.hpp>
#include <boost/type_traits/alignment_of.hpp> 

namespace boost{

namespace multi_index{

namespace detail{

/* constructs a stack-based object from a serialization archive */

template<typename T>
struct archive_constructed:private noncopyable
{
  template<class Archive>
  archive_constructed(Archive& ar,const unsigned int version)
  {
    serialization::load_construct_data_adl(ar,&get(),version);
    BOOST_TRY{
      ar>>get();
    }
    BOOST_CATCH(...){
      (&get())->~T();
      BOOST_RETHROW;
    }
    BOOST_CATCH_END
  }

  template<class Archive>
  archive_constructed(const char* name,Archive& ar,const unsigned int version)
  {
    serialization::load_construct_data_adl(ar,&get(),version);
    BOOST_TRY{
      ar>>serialization::make_nvp(name,get());
    }
    BOOST_CATCH(...){
      (&get())->~T();
      BOOST_RETHROW;
    }
    BOOST_CATCH_END
  }

  ~archive_constructed()
  {
    (&get())->~T();
  }

#include <boost/multi_index/detail/ignore_wstrict_aliasing.hpp>

  T& get(){return *reinterpret_cast<T*>(&space);}

#include <boost/multi_index/detail/restore_wstrict_aliasing.hpp>

private:
  typename aligned_storage<sizeof(T),alignment_of<T>::value>::type space;
};

} /* namespace multi_index::detail */

} /* namespace multi_index */

} /* namespace boost */

#endif

/* archive_constructed.hpp
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
*/