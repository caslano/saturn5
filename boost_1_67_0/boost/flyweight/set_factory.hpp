/* Copyright 2006-2009 Joaquin M Lopez Munoz.
 * Distributed under the Boost Software License, Version 1.0.
 * (See accompanying file LICENSE_1_0.txt or copy at
 * http://www.boost.org/LICENSE_1_0.txt)
 *
 * See http://www.boost.org/libs/flyweight for library home page.
 */

#ifndef BOOST_FLYWEIGHT_SET_FACTORY_HPP
#define BOOST_FLYWEIGHT_SET_FACTORY_HPP

#if defined(_MSC_VER)
#pragma once
#endif

#include <boost/config.hpp> /* keep it first to prevent nasty warns in MSVC */
#include <boost/detail/allocator_utilities.hpp>
#include <boost/flyweight/assoc_container_factory.hpp>
#include <boost/flyweight/factory_tag.hpp>
#include <boost/flyweight/set_factory_fwd.hpp>
#include <boost/mpl/aux_/lambda_support.hpp>
#include <boost/mpl/if.hpp>
#include <set>

/* Particularization of assoc_container_factory_class using a set.
 */

namespace boost{

namespace flyweights{

template<
  typename Entry,typename Key,
  typename Compare,typename Allocator
>
class set_factory_class:
  public assoc_container_factory_class<
    std::set<
      Entry,
      typename boost::mpl::if_<
        mpl::is_na<Compare>,
        std::less<Key>,
        Compare
      >::type,
      typename boost::mpl::if_<
        mpl::is_na<Allocator>,
        std::allocator<Entry>,
        Allocator
      >::type
    >
  >
{
public:
  typedef set_factory_class type;
  BOOST_MPL_AUX_LAMBDA_SUPPORT(
    4,set_factory_class,(Entry,Key,Compare,Allocator))
};

/* set_factory_class specifier */

template<
  typename Compare,typename Allocator
  BOOST_FLYWEIGHT_NOT_A_PLACEHOLDER_EXPRESSION_DEF
>
struct set_factory:factory_marker
{
  template<typename Entry,typename Key>
  struct apply:
    mpl::apply2<
      set_factory_class<
        boost::mpl::_1,boost::mpl::_2,Compare,Allocator
      >,
      Entry,Key
    >
  {};
};

} /* namespace flyweights */

} /* namespace boost */

#endif

/* set_factory.hpp
6TI0554TQSjbQNYJteeeC7MM1j/DbdNsu/o50yRnIRsqrYF0ToqIR0CdLR9Pw3nn49mb19BlHCOBD4s6AwlFzR+Ay61Qj/KOPvuvqi/w10Xv9TIN1FghYYAQ+zE5iVuUsLBTMp+mSeUmsTdze6AnCKz9jS5SppsaKADNo3TnxT9SyhSG9CNst6iakn7YtBVQtzxe5tKU44PngSPgkqqfGuDD3ONKXs2sH24IwrKxQ50R7gezAvUqCe6Laltd5aUpF54KWoc/eOsxKw0oBIyoCbF5aRGrxT5HAGbUGWOZINIcmrWq7VmEeYELByjKIWWqET77yc+giaAv7HySmq3FVdFUOUG1agZZFc4mhrfwpqvDHdG8PpbSMdzNH6nLdZV5t/XWipZkqHiUiNgXnK4xSLuO+SrflZikO8jVhtmCaCfh2uyTN7WGYtJCn+ZgwN6gY6nLpRgvLoLcxaKb7ca7uqACQPaIiH8RVeqwUIv9Y4DviAgxdSyJrBTTUCxT61mUFU/TwKOct48112BvKIqFdAMa5u546BRSEttfbGXY7roNzxhqlqJi1XDay1hUaGSslRSD4lwwZRGoCOrJfkyuZ+gfJiVuI2KEtKGHrK7j1rEG3zJUkjIDr+EF9+nM2zXcADR5gc6FkSZLAq6SXSyeSQYo+WBoQLUj5sRSPkX3ujupI5fK0J3QOXUQxRW4moUqKmJOiO+E1klvEobQ4bMaLzMjHC5JB6Ayqc0MGbQntOwiGVqjCMVc321NMQPyULjOKfNbnAJQ6zZrArRdEQlATaIPOtViD4E+rHUiOTkwr++Vm1jWskjDPv6Mu3e7FVo16Zukr5Q1Lh/0fLAMBTui45GGWII7qvXycsDinl+oaHZVsWCLvyDH/XFIWgizcAPO0Es5TVKXaGNFIEpm/3ZfcC7wQ3KmfivWOjHvzu75A5knpGbrdGnKWgDvmtz9563gVitiwnVUxi0lc24VpVi90f9pNwjV5t5QJ17tC6JOpXdxzoroithjr8KOmvXb8Yj9/IFYHyGQ1Uz4kLFAigRlFquRZR6MXvrVlWggmNWEKwRNPrsCp+HGu+4utOEWR21vrytAiGlc/x8Vjcdgd3gYTzvga4eSqN/AANmyN7pyQF9bK0e9TDPOAGX1KrI4KD1mllEnscO8QAEwJR91RphW3AD/AKLCzjojLKNeJX0PJ7cUvZKYM2Pm8D+wp8/w17VNugslcgyFfA0bfPFuzWgIYkrgqZ/wyLDjailGWio3tkR1EOrqV6Ucij0VxhzqWp/bedXZYGLkJv0gZhNsE7v0bFJvz24AwP5pV/XYLz9FdeFccRBqZnuwZntSfqU862Gg4DGtjE19C44PN67hIIU5WRoB859pzmRjpGJE4Q1H5Q2z/HIY13o/InRmdQ0sq7MdyFhFpZgSiMVu0awqeyfV70ORDrFkgQLHrMSlLrmAF95MmpXGKbhYHvUlmJe2WGb3pULc4cYn1pYRp65kxAEmbMigN/fMYHNqkTdt3bAu+e244+woAbCOIv46zjHhp9QhqmQ4FtTxKeBHZxcl4+y7I6f3W7r9vxzoLvoazWlX2ZxXPS3poYrLrxmeTHiYtXrFwS7SSem+/LUNhYPs+LId17TDxiRL0+BVmev6Tx3LqpUSrEnYNWC7vtvhJu28SvE/+dhwyHpLaSLWrefNEVVGCJvoFn/WbGc1/G8HhzOFntacuigGZcDTQYWvydg7rdeM9jbSZT0BNgfUx2qP3mohQrAiyDTPqe1B3xZole228mvFFUa05lvIYTDAsszIEDrFEv/RuD4Ed3HZA3JTI6Jeg9XYVUPPqIAQJ/LqV6w3If91u8iidElpkdemZ2KgUaFS1Ee+Xuggxk3rn45ef1nUn8K//FHeIijuHxMfa2mbzKTqLmKWGlyzeY+qtvVMizTcVtdYBAmnWFgbyLbSok3Tdi6hTOtLUK/TrsGJd0cVY/E76zjrDIf1yJtzWdYG0Isx4ZKz0lynKxZXeyZ0saV5OMlZ03FhhTtuXLQVLVJD81hdHvu7C2yDyyDpY4O/LSZmqXmBt7bhjEfYkP6IQwsjHnswDq7LlKA8KaoAVSOUXOuumBcIkN12IvtwsTXUWDaAnq4qOrEhtJk3hZsC+LYL+W1AhF6qQC7N7hpNzDEamIFVXiArgaK1yJsO/66wsi6rInt74f91husxoyVl1/fy0D9Gtjj5hAQbdzS1KkXruBON69UBsO9+AxNPy7B9imcnATVTY9zZKGmliFblM0zOuCpSC+w8bde8sNgOGIoPNPM0MCheb4O/dbuSgG7+fvIqb57o+Iz2jAeOPX0R3wOp9Y3NdZX0tliSnxTlh8FE49cEQoFra+dgVyrHhEauE9tSPei1EG5mR+mNGJ5WVDBmntaHx45D9qc74fvPQiX7ILk09vGQFT3Wwh7g0zkHLQ4k8Fwd+CA9k09LWyhweP7GnGHkWcdo+6VOCex8ZaaXoR0wVwOwer9vjcnPsnsDtlRJxuch2RF9SmtXE6mXhEaU6d9iijMomy5xQn9lVc9Sav0anm7sIxUJ+w0f0kkUTU2W+FbO2cOEogN+P/US0SbEStdaYr9h7mzcP1jP2c2p3iyy2P84BAWvqGn3OeHldjEjjnw2H2+LESrqkxWhzMZKoAVRyvE96yUn0GF3Lij1NhZk0pKzEIYm0SbkVTOwjFZ09gNgxyQt22GIm0u4iqg7zVnRdp1VbiiEVWg62WNOzCkHaraQipk56wJNUv7tvOXqEWqVcE0tqQ1V4CmKazwiFTMxa3+0qi7m6MCZ60bd3JqgN6hHF6FnwnVQSjWeMNEaUWq6ULsqCw6eRNOyb3nZcyxXA8nxDb45fY4NG5W9t5T02b64aK8xKRNmzDNksFmbnR9etsR5t8iEs/9ZT++0K9Jwz3zsxcGjBughOe3WRdKWUmWbb+cZGklnxF6XDuNkfvlbPGFMx27gd/lt8w4ohxBVMAyOJTcysxhgvWBTbUyl1f35QFEd0rx3/nXbdl8PyaVeKsKx17QgsLisU4GnxYXuIdZngTagtOtOmvYS4plEJb90gKum2P0P177Jpw6dpQBPq87mjjpS8kSdNNtyqR7S+QjPcuJtGIH90HYgDNk7bTv2Qavz5L4tKusmxSS70UWi+1hDSo3+4LJv1Gu6UKWTJbjVN1ON9xOCnkfwuvoV2N3JoP26idL844aLLk3H3X7dH6UOiralSSH++G5+VofX/V5qD7SKdmygLqigre876I1HPUyHtOPqXkfQvoPnK2zYJFxg0jqMJKmdWpagAAnvjGaJ2fOxfupj4X1fXhnNQrmu0KxoKX0LOjD93t+SomdFiCdniM9e6vQAX6MzR5IDV/YF8yAK9tXigPglkCD6EeefBUKJpKzyivvWcB0p44SlN5zqpqvXIDpaZ85JQ32DiXN+wSWE17L9056SA7yPWtxa7xZFl3Zsohv/gREuL7M4pg2+PCnPoV2WO4ee0vhkyXL8flRDxRh6nj7ZepAY347mQFGSFRwK95iHoDoQapGgVBMZN2A9kwhBznOJtNtrb/16L0nnKrn5AbnXnuLt2zD6ME/6eKbjBAIh1959wyyKq5+xBmYkvJyp7N4RY0LUAyGp6MrgbF/S0RCTmBGvcoqzXFd764uWQJfhRPZ1rJkvV1QKvoopAEl9oJ1oa1dd13ognBg8glr3buS7ZlXURUUDlXKbySmurr+UlLT03lqxsKOl4YjQFXr4SOypgvhTm5DT1zAvdE4E7bpEeVnURRLODPJcNhh3F6CyDVKLVvElIO1C7ulXKuRuAjp4OZxycoRnU/njpaRoAxMBaHJsI7Jkd7DEbiA4rrAkCts89c6reDgYLE++piFscVWi9KVMPKTg2WVSfl1QKIIHh5VLK6soNOl1hBRXl918oq05jciKteiE5BlQ8ApYxZA5Vf3WM3rMaAFzq5unvjK+nh5kXYwPH7z7DICEC+ofec9V0SvKdPxoe750h9wvcB9wssB4iyJRxOjP17MQCXhaiU0EaBGtSPFLwI196YjI5P2jAWmLjZQv9i3pJVLJxAUK/C3XyYiEbzOIZSPd1QYEb3Kr/RVxF2SS8wy7r2qGSEKrmVMtDtQ5/NXEJcJMGDpwJdtJAyuaG+tNXyemzOSCkEPziRkoI5KbBsX69sXStSEyYhmdemiqXBzO3ptxm6Q/Ez/n4yYmhapBpkDHBcmjm7L9dtL218+mXgctZivVDV1TdGq6BmUVRtTDsMo66Aop9zVNk1OVRpuD+6r7DXi8bVeRl0IyWiFcjqlqZezqudgzw1+J0CTkCzw5rhOmHo1NaVZO/2wkZkFTIE4iZpC71/da29srYgm7nxsu/YYIQ0tYbcINSZMU81OkYlI+C0IgOmsAj4+OKveF+mS31VMQLqsEgqpYM51H4LQ4DOwD5F81MmIE4VjMlHpnqHkUWwpiRngs0ItjF9ynEws2E7NyaI4qbt6wXuRRo2c2Jt2EIBf85DUcdG/NLr1LXBQUjK8o7LWxnxsmN8TGJh4Imjn9vTEf9kU/AuAktqlOCRBPbyZEYXOLgczHExeL6R2qmrcKfIC2Y8N02nuhqC5xVsp6GRpnFgQLbHe2kIaD5gUDUtsOnbsMiYcHvZ8SfP69OOxjCQ1RgNstlZPOzayTj7FnJw5TNU4btzSsRMy6nHf1pyqBHFNBCc+6SLiA9VaJCxkkHMAhUiSqouwwD+hQjGjbYj2HHhUustNAwA+BuVv2n9DMf1ZU2e7rJ43uDKQMRFurL2ZWvdtetI/6RMWF39zewfVurDa5r9pVx2bLR0SDk5x4l7EebLzOCxHdkxxL9v8lueUZ7wA960Ds6u009spIB8GcctBo3YjCMbk0SjzLaSD+LdOJn1wXgboMws+ahonmmyC2xknbuvDFYUCs2TRlblFuuYS0Jysx1+n01cSKL+JaAkWbyfEKcMwarM0P5fltqpikA7Iv9dio0ws2/ag0wnDVSnOkYke8ujga7fyG0ZXEOcYsSFKvCmGkdi0Rjdl+z7tlwTPYQRb9VddP2/YIRzYOYwdWP73WnHNxzKkMEcttdindkU33IXLs+dNOD5QMmIIhxSwIZuIXelzAtyK56io0wQ9B6Y/3rw+ng1laUbntVg/V1l/dZLpjVGBTuR5pANQ55c51ElxRalXcPh1J8VYBY5fKX2tWwFV/grFQn4HU8C3achfY6rMzVG6BQL71XEA1lhxeAcJM72hwR1AC09RWszy5zTygu+yFlDtiFafs2eu8bzt3nvcWl7k7p11O5orJV3uQJjDNW/94NrkoieNJCARXjKEez8vUTiQJauXyk/ghYV2kxKetiVFuAkIX8jsZq8S18b8wcZhKY3pdwY4yqmN150KkYMcy1Zs96qVpqJwMR3bvrr6Qu2EMYVGevnjSzXKaVeV/e5+Zh/yYvt9c8cn9JBJhlNCGrukg78DCKK6IQUFfrdmxB23UVXRblJu+Ly7SHvNoQKp+bzm2EnghlvFF3y0oJe9toPM/0GXjCtqrKTFJH6fP7xan9FezSsjaCBb3s4JpljzIyn6mzF/gIVdHC/AN74aCwaH2Mwjhcwe5KweVVAcQEWw22zfg2qZt65+yf7c7+7B5UZQYRsSh+Vk2ET8n95sCRpk15acWkOGCw2yj8XUY6rsgxq+7avHQr1dBP19ICyhoVmSEc21lhS0SoTv1mnBK3oKeFY04Q0qVo49hPau7rbXFnb+vXvA8wPbX30R9UmTWhj6q0hlidLFJHboLF40GVsPI67QfJJrIdTNTdmXwGtJcz4daYwuKwyvYR3/BHh60lakH2towHigcFBptrpww9h4jhxUaMbEmgtKOMjmKxltGs8/b7uzfDRaujYjUuytgSEHalW0HsZHitsh4sBj23VbKZmHti4bmVhCd5THoG2V5DVdPm7R5J0gYLWuz+fRrPVInkRgXHCBrIT+KcYG1imP/YDLY56nanTdh6rCvrmyu1iQTclhAlCppPbGp0OBxjaxrPVHYMlDlp8B+0/+DcQRxps1X1I/zHYtlXo0i1RWJuo4Mc5N7tzfaVWszUDjIVteMfQhYuD/H2InnFI7VkZSG58NzC9KhHrUQBRn3YkbWRdEIIeeEieZwcqpg9KKjlUjcsVIGtxCD59zRxM72VCqGmTRCDQn0BtDunTF/DLrcZ1+cmqa9uFmpQ7ljmaNzQv54itOStHBzwJFs+rjjc7qk5gZUq8HsLu5lz4l3dZG9X1w+V9XmbraE0f7u0mKD5Iw1ETFxX56nn2RI1vEcBLI4xZcIngMFKQDwiXe8qm42yG+00rd58CbmPQiq8NefWNuj3FD1oFUNJx1QLKgsUdLRaa+pFPtXVoO2t2SDmlpE1xrPIl5eGfWTW020ttuCkS8vDjeH1FOK3QfdWGRHejgvMhTQ2rYUItr5VRO+jWvrXqQc/UXNfdo7ng/GbTVqMTXqqT8wJ+3RZfaTqDePY4MxmABe+nUpwJ+DUZgxW0wBmUK2aDJuKM4Yyq32dDpwznNhwJ6IhnrrDj1/YWyIzUEDYwLjrPcIakyNZ02olOCOUzvcjz8SsDIfox+YpcpaxOx1srd71GCNuDx8SFzAOUHzRvOtZ5PV1Q969A9lK1meE2gh0biT/Wua6vNsXgPRhfP6QRAVptm536PtzfzyiEJVExj0zQaprLVVUpRWetIwXbPEwo0NkzNNFUVJcFRNMkTCwtJXrrdOtDMmtenumpvcixDtci6lfgkllJLGd6YEVYI3MyM2v0a90DB9UizyW38TrDHNdle3YUxImS/kLL0AG9eD9qS4B15rgqAeU8SeO2v9IUeMGntt4Ka+EhxzAEGMe46UEzn8bEjjlkpUNtaybLBZX6pDsg3HhehiQzu3cNnrh1d7REgbMbcJ2NY+NTD/pSu5DGrUkIhAFuJ75gvzlHJhg0RuyCUw7LaeOdUEH263VXQb/eMZbn4Y3MEQcDvuRcFR3/akVk5CUABl7+kWUNrte9Jv2X7dtAQyFzVsCzWgQhzNfvCz+y53RW1JFqzyZhv06SN0Ft5aW0cMlzsO0zKyNACxYYjIqYhupGN5Tz+aICbE8DLkLpG70vaIfbMyhulFwIFz7YcMcuRHe0U+dvoIYZExBp+eESqf303KUPizZHdqsqvydAzzdTLt0rlJQoV5ymtMwKSiRuR9H9G1Y3BG8Vr9XdowmbxTvMQ5eRq6rcFUesIbYIs7PqHdOlGUtWz0tqnLqW/h3aO1LNIIERFoKMqWm1ESzGZBbXo6sO3Oeeu34RaJVrljzy7BNJqXlKfByfR4H5Y889T2kLdlgD1lt/5LmqFytpFCH9ixiO4R3LNdWATM+TTIqflv6Zqxb+CLAXzddPSfXzbYjKx71Um+KV5Dp2rDTHHKs87HUhwmgW16pTCXmCME2b0oFDDzprGsNMJzeAkZe+efBv7D4c4f/r0N7ThTEdae11276m26MKNdZ3aHncIdb/ZyVE3uU2/cIxPSr6I9rYVUirKMohJt5RcBpWz55XuI/X5BoUDJOJj4SYHXvk8KZg0NDG35/AtSbFfGy7VrfXnLlXGNCs+ynNouF/VkWDqerSx+nGRSTF2RONes+CbS8CiOqMZr9oRTXbcvz7jVgSql57Xy3Jeicsvr2UqprvKeRZ9rHGVfhUBtEf1Gl0+WA5QSQZAqRfbpa0rVGiPRDIpq+047MHp1bmfMCpoycW7X4DoucXySEIfbXO8UEHhlZ3DdlBwiSDzJnTDH9dSHYa/coA9GLW2uXLktgxA3gzMM5T5fGNdDW6KA1c4ll+T9jcakD+qPlj1gyMtNjJ0m4swTOoQlrc3M8qHlSrK6TDXOjdWHriEwlVr5DzByF+imKJxND8wyM39a2IwygW0pfRrrfUWTCJQn7lqLUlHbSPZM58UhPaoDQMhgL66jC4tuNLj9DIZi7MbydnkXmDVuTUxijyTbp5qXn+4GpRAI+zaN6wHer5jzrNlHt8dWTMybkZFEkcrCwtLFb0VkYnZmevml2TlY4jVj5bnZx1bfmpmZESHiLaP7xs2a9Gxd/1zdMmqb1eTmy79rd0MbR3y83CeauDd4m7rMk5c+/js+ils+hls+nls+SNzeLV/e/Jlz0S9lZuFhc9D4BReSYms4ie3cxPY9oofPfpMq3fkTx3ZIftzzEwJtrvbJp+MKtZHkho5tWAfI1fl5uIyjZ9HJmlHMCOf+6KdOM4FNSUQ5OhIqR19/Gdy7JNLJD/4VFBW0A7X0m3NIL2PN33/N7/KUgdooVzSU+Upk3Dnf975++3T3gHt72CtuqMDj3pHU7AE3xCPv2ICOstcHMtQC4zcfqAi/Y02nTEWFNX1jpgU1cUS15A6kUjEOn6jeuNE12wglPziz4CYnAdalLbwckX3cA79/iTy91QLRtzCWpyrmFD24mLuCfDd3HAcNv+wBMyI5g3zxQkKGj8irvVvJuOxfbsYlMQZ0hgb4cZ+/uNm5sMs2Tp1OBlnyqlzvwUYetfD10edg1ujdtAhtEyBI9azuvKIDIHJBmd6M/NMgKyouYYW9CAU/XTpA4naG7ovC7o6ZyesrS0yvy1xhnCULT20bTDr7iiNC5u3FV6p4LkhKaucpWxorKDTb2Hh0NejNXDgWZJGDt/vEup/rCiRgMyDEzFbx3GloKcS2nmrxKUhMOmyALBnhnn3Z+GoJ7UGTmnafEVEIEd5YniJQbafesDyhyVDTxOMCaT8P81ieqT1RXZnp5mlYWWGZyVIdML51WNSHVQbjccgXJ3adRgvmVPO9zOntzYUJA0crfP7oUfLeXJsS3gzm8dh4cTDrl2E5Xn55NJ3Rv8rhrW2eXLLNYjau1AXlKH110whrmEHt6yqf1Mx8sqnOVIMPPTUbiAHaGWn2kly8tNJ8RbaTGFrPBUrcm1MAm9uueAdp7Yd/U88Ov73NCcxdPRQonxzykn0Kj3lpGcyleL2wtMra6s2ZfML/NoYSQ4D4830EX2GNUEoArV5vBkZpathGrW3xcLF63wdO7zZnd9frarbT39gIT37n3/l8yjQL0Eg3v+HTHeVKe8I4oglCyw4fmloA6ajQWpcbPXVWRpITIlinDPdoNCWfzGh76c+zJGrJg8fnPBT/d1Ct6Mgcn0djreFGP1KbPWBmWSTKvO+8vNkpcbQxLS4jbh3eUobIDbHZ860=
*/